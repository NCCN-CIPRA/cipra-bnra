import _regeneratorRuntime from"C:/Users/joep.driesen/Code/cipra-bnra/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js";import _asyncToGenerator from"C:/Users/joep.driesen/Code/cipra-bnra/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js";/* eslint-disable no-restricted-globals */import exportExcel from"./exportExcel";import{EXPORT_TYPE,renderPDF}from"./renderPDF";/* @ts-expect-error any */if(import.meta.webpackHot){/* @ts-expect-error any */import.meta.webpackHot.accept();}self.onmessage=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(event){var onProgress,blob;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:console.log(event.data);if(event.data.exportType===EXPORT_TYPE.ALL){self.postMessage({type:"progress",message:"Exporting all risk files"});}else{self.postMessage({type:"progress",message:"Exporting ".concat(event.data.exportedRiskFiles.length," risk file").concat(event.data.exportedRiskFiles.length>1?"s":"")});}onProgress=function onProgress(message){self.postMessage({type:"progress",message:message});};if(!(event.data.exportType===EXPORT_TYPE.DATA)){_context.next=9;break;}_context.next=6;return exportExcel({exportedRiskFiles:event.data.exportedRiskFiles,riskFiles:event.data.riskFiles,allCascades:event.data.cascades,onProgress:onProgress});case 6:blob=_context.sent;_context.next=12;break;case 9:_context.next=11;return renderPDF({exportType:event.data.exportType,exportedRiskFiles:event.data.exportedRiskFiles,riskFiles:event.data.riskFiles,allCascades:event.data.cascades,allAttachments:event.data.attachments,onProgress:onProgress});case 11:blob=_context.sent;case 12:self.postMessage({type:"result",fileType:event.data.exportType===EXPORT_TYPE.DATA?"excel":"pdf",value:blob});case 13:case"end":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}();export{};