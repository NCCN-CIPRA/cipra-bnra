{"version":3,"file":"static/js/531.8aee27b2.chunk.js","mappings":"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","sources":["functions/scenarios.tsx","types/dataverse/DVRiskFile.ts","functions/cascades.ts","functions/export/exportExcel.ts","functions/i18Backend.ts","functions/svg2PDF.worker.ts","components/charts/svg/ProbabilityBarsChart.tsx","functions/TotalImpact.tsx","functions/CategoryImpact.ts","functions/getImpactColor.tsx","assets/icons/BNRA_Logo.svg","components/charts/svg/SummaryImpactChart.tsx","assets/icons/NCCN_Logo.svg","assets/icons/Triangles_detail.svg","functions/colors.tsx","components/charts/svg/ScenarioMatrixChart.tsx","functions/getCategoryColor.tsx","functions/roundNumberString.tsx","components/charts/svg/ProbabilitySankeyChart.tsx","components/charts/svg/ImpactSankeyChart.tsx","components/charts/svg/ImpactBarChart.tsx","components/charts/svg/ClimateChangeChart.tsx","functions/Impact.tsx","components/charts/svg/ActionsSankeyChart.tsx","functions/export/renderSVG.tsx","components/export/fonts.ts","components/export/styles.ts","components/export/CategoryFrontPage.tsx","components/export/Footer.tsx","components/export/BibliographySection.tsx","components/export/FrontPage.tsx","pages/ExportRiskFilePage/styles.ts","functions/html2pdf.tsx","functions/getScaleString.tsx","functions/translations.ts","components/export/Watermark.tsx","components/export/SummarySection.tsx","components/export/Header.tsx","components/export/LeftBorderSection.tsx","components/export/DescriptionSection.tsx","functions/historicalEvents.ts","functions/tableToJson.tsx","components/export/AnalysisSection.tsx","components/export/EvolutionSection.tsx","components/export/MMAnalysisSection.tsx","components/export/EmergingDescriptionSection.tsx","components/export/RiskFilePDF.tsx","components/export/BNRAExport.tsx","functions/export/renderPDF.tsx","functions/export/export.worker.ts","../webpack/bootstrap","../webpack/runtime/chunk loaded","../webpack/runtime/compat get default export","../webpack/runtime/define property getters","../webpack/runtime/ensure chunk","../webpack/runtime/get javascript chunk filename","../webpack/runtime/get mini-css chunk filename","../webpack/runtime/global","../webpack/runtime/hasOwnProperty shorthand","../webpack/runtime/make namespace object","../webpack/runtime/node module decorator","../webpack/runtime/publicPath","../webpack/runtime/importScripts chunk loading","../webpack/runtime/startup chunk dependencies","../webpack/startup"],"sourcesContent":["import { RiskCalculation } from \"../types/dataverse/DVAnalysisRun\";\r\nimport {\r\n  CASCADE_RESULT_SNAPSHOT,\r\n  DVRiskCascade,\r\n} from \"../types/dataverse/DVRiskCascade\";\r\nimport { RISKFILE_RESULT_FIELD } from \"../types/dataverse/DVRiskFile\";\r\nimport { SmallRisk } from \"../types/dataverse/DVSmallRisk\";\r\nimport { IntensityParameter } from \"./intensityParameters\";\r\nimport tableToJson from \"./tableToJson\";\r\n\r\nexport enum SCENARIOS {\r\n  CONSIDERABLE = \"considerable\",\r\n  MAJOR = \"major\",\r\n  EXTREME = \"extreme\",\r\n}\r\n\r\nexport type SCENARIO_LETTER = \"c\" | \"m\" | \"e\";\r\n\r\nexport type SCENARIO_SUFFIX = \"_c\" | \"_m\" | \"_e\";\r\n\r\nexport interface Scenarios {\r\n  considerable: IntensityParameter<string>[];\r\n  major: IntensityParameter<string>[];\r\n  extreme: IntensityParameter<string>[];\r\n}\r\n\r\nexport const SCENARIO_PARAMS = {\r\n  [SCENARIOS.CONSIDERABLE]: {\r\n    titleI18N: \"2A.progress.considerable.title\",\r\n    titleDefault: \"Considerable\",\r\n    color: \"#9DC3E6\",\r\n    prefix: \"c\",\r\n  },\r\n  [SCENARIOS.MAJOR]: {\r\n    titleI18N: \"2A.progress.major.title\",\r\n    titleDefault: \"Major\",\r\n    color: \"#FFE699\",\r\n    prefix: \"m\",\r\n  },\r\n  [SCENARIOS.EXTREME]: {\r\n    titleI18N: \"2A.progress.extreme.title\",\r\n    titleDefault: \"Extreme\",\r\n    color: \"#F47C7C\",\r\n    prefix: \"e\",\r\n  },\r\n};\r\n\r\nconst noScenarios = {\r\n  considerable: [],\r\n  major: [],\r\n  extreme: [],\r\n};\r\n\r\nexport const unwrapScenario = (\r\n  scenarioJSON: string,\r\n  parameters: IntensityParameter[]\r\n): IntensityParameter<string>[] => {\r\n  try {\r\n    const scenario = JSON.parse(scenarioJSON) as IntensityParameter<string>[];\r\n\r\n    return scenario.map((p) => {\r\n      const realParam = parameters.find((p2) => p.name === p2.name);\r\n\r\n      if (realParam)\r\n        return {\r\n          ...p,\r\n          description: realParam.description,\r\n        };\r\n\r\n      return p;\r\n    });\r\n  } catch {\r\n    // Old HTML format\r\n    const json = tableToJson(scenarioJSON);\r\n\r\n    if (!json) return [];\r\n\r\n    if (parameters.length <= 0)\r\n      return [\r\n        {\r\n          name: \"Capacity\",\r\n          description: \"Actor capacity\",\r\n          value: json[0][0],\r\n        },\r\n      ];\r\n\r\n    return parameters.map((p, i) => ({\r\n      ...p,\r\n      value: json[i] as unknown as string,\r\n    }));\r\n  }\r\n};\r\n\r\nexport function unwrap(\r\n  parameters: IntensityParameter[],\r\n  considerable: string | null,\r\n  major: string | null,\r\n  extreme: string | null\r\n): Scenarios {\r\n  if (!considerable || !major || !extreme) return noScenarios;\r\n\r\n  return {\r\n    considerable: unwrapScenario(considerable, parameters),\r\n    major: unwrapScenario(major, parameters),\r\n    extreme: unwrapScenario(extreme, parameters),\r\n  };\r\n}\r\n\r\nexport function wrap(scenario: IntensityParameter<string>[]): string {\r\n  return JSON.stringify(scenario);\r\n}\r\n\r\n// export function scenariosEquals(a?: Scenarios, b?: Scenarios) {\r\n//   // TODO\r\n//   return false;\r\n// }\r\n\r\nexport const getScenarioSuffix = (scenario: SCENARIOS): SCENARIO_SUFFIX => {\r\n  if (scenario === SCENARIOS.CONSIDERABLE) return \"_c\";\r\n  else if (scenario === SCENARIOS.MAJOR) return \"_m\";\r\n  return \"_e\";\r\n};\r\n\r\nexport const getScenarioParameter = (\r\n  rf: SmallRisk,\r\n  parameter: RISKFILE_RESULT_FIELD,\r\n  scenario: SCENARIOS\r\n): number | null => {\r\n  if (!rf.results) return null;\r\n\r\n  return rf.results[scenario][parameter];\r\n};\r\n\r\nconst cascadeScenarios: { [key in SCENARIOS]: \"C\" | \"M\" | \"E\" } = {\r\n  considerable: \"C\",\r\n  major: \"M\",\r\n  extreme: \"E\",\r\n};\r\n\r\nexport type CASCADE_RESULT_FIELD =\r\n  | \"IP\"\r\n  | \"IP50\"\r\n  | \"CP_AVG\"\r\n  | \"II\"\r\n  | \"II_H\"\r\n  | \"II_Ha\"\r\n  | \"II_Hb\"\r\n  | \"II_Hc\"\r\n  | \"II_S\"\r\n  | \"II_Sa\"\r\n  | \"II_Sb\"\r\n  | \"II_Sc\"\r\n  | \"II_Sd\"\r\n  | \"II_E\"\r\n  | \"II_Ea\"\r\n  | \"II_F\"\r\n  | \"II_Fa\"\r\n  | \"II_Fb\";\r\n\r\nexport const getCascadeParameter = (\r\n  cascade: DVRiskCascade,\r\n  mainScenario: SCENARIOS,\r\n  parameter: CASCADE_RESULT_FIELD\r\n): number | null => {\r\n  if (!cascade.results) return null;\r\n\r\n  if (parameter === \"IP\" || parameter === \"IP50\")\r\n    return cascade.results[\r\n      `${parameter}_All2${cascadeScenarios[mainScenario]}`\r\n    ];\r\n\r\n  if (parameter === \"CP_AVG\")\r\n    return cascade.results[\r\n      `${parameter}_${cascadeScenarios[mainScenario]}2All`\r\n    ];\r\n\r\n  if (parameter.indexOf(\"II_\") >= 0)\r\n    return cascade.results[\r\n      `II_${cascadeScenarios[mainScenario]}2All_${parameter.slice(\r\n        3\r\n      )}` as keyof CASCADE_RESULT_SNAPSHOT\r\n    ];\r\n\r\n  if (parameter === \"II\")\r\n    return cascade.results[`II_${cascadeScenarios[mainScenario]}2All`];\r\n\r\n  return null;\r\n};\r\n\r\nexport const getScenarioLetter = (scenario: SCENARIOS): SCENARIO_LETTER => {\r\n  if (scenario === SCENARIOS.CONSIDERABLE) return \"c\";\r\n  else if (scenario === SCENARIOS.MAJOR) return \"m\";\r\n  return \"e\";\r\n};\r\n\r\nexport const getWorstCaseScenario = (calculation: RiskCalculation) => {\r\n  const rs = [\r\n    calculation.tp_c * calculation.ti_c,\r\n    calculation.tp_m * calculation.ti_m,\r\n    calculation.tp_e * calculation.ti_e,\r\n  ];\r\n\r\n  return [SCENARIOS.CONSIDERABLE, SCENARIOS.MAJOR, SCENARIOS.EXTREME][\r\n    rs.indexOf(Math.max(...rs))\r\n  ];\r\n};\r\n","import { SCENARIOS } from \"../../functions/scenarios\";\r\nimport { DiscussionRequired } from \"../DiscussionRequired\";\r\n\r\nexport enum RISK_TYPE {\r\n  STANDARD = \"Standard Risk\",\r\n  MANMADE = \"Malicious Man-made Risk\",\r\n  EMERGING = \"Emerging Risk\",\r\n}\r\n\r\nexport const RISK_TYPE_NAMES: { [key in RISK_TYPE]: string } = {\r\n  [RISK_TYPE.STANDARD]: \"Standard Risk\",\r\n  [RISK_TYPE.MANMADE]: \"Malicious Actors\",\r\n  [RISK_TYPE.EMERGING]: \"Emerging Risk\",\r\n};\r\n\r\nexport enum RISK_CATEGORY {\r\n  CYBER = \"Cyber\",\r\n  ECOTECH = \"EcoTech\",\r\n  HEALTH = \"Health\",\r\n  MANMADE = \"Man-made\",\r\n  NATURE = \"Nature\",\r\n  TRANSVERSAL = \"Transversal\",\r\n  EMERGING = \"Emerging Risk\",\r\n  TEST = \"Test\",\r\n}\r\n\r\nexport const CATEGORY_NAMES: Partial<{ [key in RISK_CATEGORY]: string }> = {\r\n  Cyber: \"Cyber Risks\",\r\n  EcoTech: \"Economic and Technological Risks\",\r\n  Health: \"Health Risks\",\r\n  \"Man-made\": \"Human-made Risks\",\r\n  Nature: \"Natural Risks\",\r\n  Transversal: \"Societal Risks\",\r\n  \"Emerging Risk\": \"Emerging Risks\",\r\n};\r\n\r\nexport enum CONSENSUS_TYPE {\r\n  MEETING = 0,\r\n  SILENCE = 1,\r\n  NONE = 2,\r\n}\r\n\r\nexport interface RiskFileEditableFields {\r\n  cr4de_definition: string | null;\r\n  cr4de_historical_events: string | null;\r\n  cr4de_intensity_parameters: string | null;\r\n  cr4de_scenario_considerable: string | null;\r\n  cr4de_scenario_major: string | null;\r\n  cr4de_scenario_extreme: string | null;\r\n  cr4de_horizon_analysis: string | null;\r\n  cr4de_legal_bases: string | null;\r\n  cr4de_roles_responsibilities: string | null;\r\n  cr4de_existing_measures: string | null;\r\n  cr4de_online_sources: string | null;\r\n}\r\n\r\nexport interface DiscussionsRequired {\r\n  dp_c: DiscussionRequired;\r\n  dp_m: DiscussionRequired;\r\n  dp_e: DiscussionRequired;\r\n\r\n  h_c: DiscussionRequired;\r\n  s_c: DiscussionRequired;\r\n  e_c: DiscussionRequired;\r\n  f_c: DiscussionRequired;\r\n\r\n  h_m: DiscussionRequired;\r\n  s_m: DiscussionRequired;\r\n  e_m: DiscussionRequired;\r\n  f_m: DiscussionRequired;\r\n\r\n  h_e: DiscussionRequired;\r\n  s_e: DiscussionRequired;\r\n  e_e: DiscussionRequired;\r\n  f_e: DiscussionRequired;\r\n\r\n  cb: DiscussionRequired;\r\n}\r\n\r\nexport interface DVRiskFile<CalculationType = unknown>\r\n  extends RiskFileEditableFields {\r\n  cr4de_riskfilesid: string;\r\n  cr4de_hazard_id: string;\r\n\r\n  cr4de_title: string;\r\n  cr4de_risk_type: RISK_TYPE;\r\n  cr4de_risk_category: RISK_CATEGORY;\r\n  cr4de_key_risk: boolean;\r\n\r\n  cr4de_label_hilp: boolean | null;\r\n  cr4de_label_cc: boolean | null;\r\n  cr4de_label_cb: boolean | null;\r\n  cr4de_label_impact:\r\n    | \"Human\"\r\n    | \"Societal\"\r\n    | \"Environmental\"\r\n    | \"Financial\"\r\n    | null;\r\n\r\n  cr4de_mrs: SCENARIOS | null;\r\n  cr4de_mrs_summary: string | null;\r\n  cr4de_mrs_summary_nl: string | null;\r\n  cr4de_mrs_summary_fr: string | null;\r\n  cr4de_mrs_summary_de: string | null;\r\n  cr4de_mrs_scenario: string | null;\r\n  cr4de_mrs_disclaimer: string | null;\r\n  cr4de_mrs_probability: string | null;\r\n  cr4de_mrs_impact_h: string | null;\r\n  cr4de_mrs_impact_s: string | null;\r\n  cr4de_mrs_impact_e: string | null;\r\n  cr4de_mrs_impact_f: string | null;\r\n  cr4de_mrs_actions: string | null;\r\n  cr4de_mrs_mm_impact: string | null;\r\n  cr4de_mrs_cc: string | null;\r\n\r\n  cr4de_subjective_importance: number;\r\n\r\n  cr4de_dp_quali: string | null;\r\n  cr4de_dp_quali_c: string | null;\r\n  cr4de_dp_quali_m: string | null;\r\n  cr4de_dp_quali_e: string | null;\r\n  cr4de_di_quali_h: string | null;\r\n  cr4de_di_quali_s: string | null;\r\n  cr4de_di_quali_e: string | null;\r\n  cr4de_di_quali_f: string | null;\r\n\r\n  cr4de_di_quali_h_c: string | null;\r\n  cr4de_di_quali_s_c: string | null;\r\n  cr4de_di_quali_e_c: string | null;\r\n  cr4de_di_quali_f_c: string | null;\r\n  cr4de_di_quali_h_m: string | null;\r\n  cr4de_di_quali_s_m: string | null;\r\n  cr4de_di_quali_e_m: string | null;\r\n  cr4de_di_quali_f_m: string | null;\r\n  cr4de_di_quali_h_e: string | null;\r\n  cr4de_di_quali_s_e: string | null;\r\n  cr4de_di_quali_e_e: string | null;\r\n  cr4de_di_quali_f_e: string | null;\r\n\r\n  cr4de_dp_quanti_c: string | null;\r\n  cr4de_dp_quanti_m: string | null;\r\n  cr4de_dp_quanti_e: string | null;\r\n\r\n  cr4de_di_quanti_ha_c: string | null;\r\n  cr4de_di_quanti_hb_c: string | null;\r\n  cr4de_di_quanti_hc_c: string | null;\r\n  cr4de_di_quanti_sa_c: string | null;\r\n  cr4de_di_quanti_sb_c: string | null;\r\n  cr4de_di_quanti_sc_c: string | null;\r\n  cr4de_di_quanti_sd_c: string | null;\r\n  cr4de_di_quanti_ea_c: string | null;\r\n  cr4de_di_quanti_fa_c: string | null;\r\n  cr4de_di_quanti_fb_c: string | null;\r\n\r\n  cr4de_di_quanti_ha_m: string | null;\r\n  cr4de_di_quanti_hb_m: string | null;\r\n  cr4de_di_quanti_hc_m: string | null;\r\n  cr4de_di_quanti_sa_m: string | null;\r\n  cr4de_di_quanti_sb_m: string | null;\r\n  cr4de_di_quanti_sc_m: string | null;\r\n  cr4de_di_quanti_sd_m: string | null;\r\n  cr4de_di_quanti_ea_m: string | null;\r\n  cr4de_di_quanti_fa_m: string | null;\r\n  cr4de_di_quanti_fb_m: string | null;\r\n\r\n  cr4de_di_quanti_ha_e: string | null;\r\n  cr4de_di_quanti_hb_e: string | null;\r\n  cr4de_di_quanti_hc_e: string | null;\r\n  cr4de_di_quanti_sa_e: string | null;\r\n  cr4de_di_quanti_sb_e: string | null;\r\n  cr4de_di_quanti_sc_e: string | null;\r\n  cr4de_di_quanti_sd_e: string | null;\r\n  cr4de_di_quanti_ea_e: string | null;\r\n  cr4de_di_quanti_fa_e: string | null;\r\n  cr4de_di_quanti_fb_e: string | null;\r\n\r\n  cr4de_climate_change_quali: string | null;\r\n  cr4de_climate_change_quanti_c: string | null;\r\n  cr4de_climate_change_quanti_m: string | null;\r\n  cr4de_climate_change_quanti_e: string | null;\r\n\r\n  cr4de_cross_border_impact_quali_c: string | null;\r\n  cr4de_cross_border_impact_quali_m: string | null;\r\n  cr4de_cross_border_impact_quali_e: string | null;\r\n\r\n  cr4de_validations_processed: boolean | null;\r\n  cr4de_validation_silent_procedure_until: Date | null;\r\n\r\n  cr4de_step2a_enabled: boolean | null;\r\n  cr4de_step2a_enabled_on: Date | null;\r\n  cr4de_step2b_enabled: boolean | null;\r\n  cr4de_step2b_enabled_on: Date | null;\r\n  cr4de_consensus_type: CONSENSUS_TYPE | null;\r\n  cr4de_consensus_date: Date | null;\r\n  cr4de_discussion_required: DiscussionsRequired | null;\r\n\r\n  cr4de_is_test: boolean | null;\r\n\r\n  cr4de_latest_calculation: CalculationType | null;\r\n  _cr4de_latest_calculation_value: string | null;\r\n\r\n  cr4de_result_snapshot: string | null;\r\n  results?: RESULT_SNAPSHOT | null;\r\n\r\n  createdon: string;\r\n  modifiedon: string;\r\n}\r\n\r\nexport const RISK_FILE_QUANTI_FIELDS: (keyof DVRiskFile)[] = [\r\n  \"cr4de_dp_quanti_c\",\r\n  \"cr4de_dp_quanti_m\",\r\n  \"cr4de_dp_quanti_e\",\r\n\r\n  \"cr4de_di_quanti_ha_c\",\r\n  \"cr4de_di_quanti_hb_c\",\r\n  \"cr4de_di_quanti_hc_c\",\r\n  \"cr4de_di_quanti_sa_c\",\r\n  \"cr4de_di_quanti_sb_c\",\r\n  \"cr4de_di_quanti_sc_c\",\r\n  \"cr4de_di_quanti_sd_c\",\r\n  \"cr4de_di_quanti_ea_c\",\r\n  \"cr4de_di_quanti_fa_c\",\r\n  \"cr4de_di_quanti_fb_c\",\r\n\r\n  \"cr4de_di_quanti_ha_m\",\r\n  \"cr4de_di_quanti_hb_m\",\r\n  \"cr4de_di_quanti_hc_m\",\r\n  \"cr4de_di_quanti_sa_m\",\r\n  \"cr4de_di_quanti_sb_m\",\r\n  \"cr4de_di_quanti_sc_m\",\r\n  \"cr4de_di_quanti_sd_m\",\r\n  \"cr4de_di_quanti_ea_m\",\r\n  \"cr4de_di_quanti_fa_m\",\r\n  \"cr4de_di_quanti_fb_m\",\r\n\r\n  \"cr4de_di_quanti_ha_e\",\r\n  \"cr4de_di_quanti_hb_e\",\r\n  \"cr4de_di_quanti_hc_e\",\r\n  \"cr4de_di_quanti_sa_e\",\r\n  \"cr4de_di_quanti_sb_e\",\r\n  \"cr4de_di_quanti_sc_e\",\r\n  \"cr4de_di_quanti_sd_e\",\r\n  \"cr4de_di_quanti_ea_e\",\r\n  \"cr4de_di_quanti_fa_e\",\r\n  \"cr4de_di_quanti_fb_e\",\r\n\r\n  \"cr4de_climate_change_quanti_c\",\r\n  \"cr4de_climate_change_quanti_m\",\r\n  \"cr4de_climate_change_quanti_e\",\r\n];\r\n\r\nexport type RISKFILE_RESULT_FIELD =\r\n  | \"TP\"\r\n  | \"TP50\"\r\n  | \"TI\" // Total Impact of the risk in relative scale (0 - 5)\r\n  | \"TI_H\" // Total human impact of the risk as a ratio to TI (0 - 1)\r\n  | \"TI_Ha\" // Total Ha impact of the risk as a ratio to TI (0 - 1)\r\n  | \"TI_Hb\" // Etc...\r\n  | \"TI_Hc\"\r\n  | \"TI_S\"\r\n  | \"TI_Sa\"\r\n  | \"TI_Sb\"\r\n  | \"TI_Sc\"\r\n  | \"TI_Sd\"\r\n  | \"TI_E\"\r\n  | \"TI_Ea\"\r\n  | \"TI_F\"\r\n  | \"TI_Fa\"\r\n  | \"TI_Fb\"\r\n  | \"TI_Ha_abs\"\r\n  | \"TI_Hb_abs\"\r\n  | \"TI_Hc_abs\"\r\n  | \"TI_Sa_abs\"\r\n  | \"TI_Sb_abs\"\r\n  | \"TI_Sc_abs\"\r\n  | \"TI_Sd_abs\"\r\n  | \"TI_Ea_abs\"\r\n  | \"TI_Fa_abs\"\r\n  | \"TI_Fb_abs\"\r\n  | \"DP\"\r\n  | \"DP50\"\r\n  | \"DI\"\r\n  | \"DI_H\"\r\n  | \"DI_Ha\"\r\n  | \"DI_Hb\"\r\n  | \"DI_Hc\"\r\n  | \"DI_S\"\r\n  | \"DI_Sa\"\r\n  | \"DI_Sb\"\r\n  | \"DI_Sc\"\r\n  | \"DI_Sd\"\r\n  | \"DI_E\"\r\n  | \"DI_Ea\"\r\n  | \"DI_F\"\r\n  | \"DI_Fa\"\r\n  | \"DI_Fb\";\r\n\r\nexport type RESULT_SNAPSHOT = {\r\n  [key in SCENARIOS]: { [key in RISKFILE_RESULT_FIELD]: number };\r\n};\r\n","import { CascadeCalculation } from \"../types/dataverse/DVAnalysisRun\";\r\nimport { DVCascadeAnalysis } from \"../types/dataverse/DVCascadeAnalysis\";\r\nimport { DVRiskCascade } from \"../types/dataverse/DVRiskCascade\";\r\nimport { DVRiskFile, RISK_TYPE } from \"../types/dataverse/DVRiskFile\";\r\nimport { SmallRisk } from \"../types/dataverse/DVSmallRisk\";\r\nimport {\r\n  SCENARIOS,\r\n  SCENARIO_LETTER,\r\n  getCascadeParameter,\r\n  getScenarioParameter,\r\n} from \"./scenarios\";\r\n\r\nexport type CASCADE_LETTER =\r\n  | \"c2c\"\r\n  | \"c2m\"\r\n  | \"c2e\"\r\n  | \"m2c\"\r\n  | \"m2m\"\r\n  | \"m2e\"\r\n  | \"e2c\"\r\n  | \"e2m\"\r\n  | \"e2e\";\r\n\r\nexport interface CascadeAnalysisInput {\r\n  cr4de_c2c: number | null;\r\n  cr4de_c2m: number | null;\r\n  cr4de_c2e: number | null;\r\n  cr4de_m2c: number | null;\r\n  cr4de_m2m: number | null;\r\n  cr4de_m2e: number | null;\r\n  cr4de_e2c: number | null;\r\n  cr4de_e2m: number | null;\r\n  cr4de_e2e: number | null;\r\n\r\n  cr4de_quali_cascade: string | null;\r\n}\r\n\r\nexport type Cascades = {\r\n  all: DVRiskCascade<SmallRisk, SmallRisk>[];\r\n  causes: DVRiskCascade<SmallRisk, SmallRisk>[];\r\n  effects: DVRiskCascade<SmallRisk, SmallRisk>[];\r\n  catalyzingEffects: DVRiskCascade<SmallRisk, SmallRisk>[];\r\n  climateChange: DVRiskCascade<SmallRisk, SmallRisk> | null;\r\n};\r\n\r\nexport function getCauses(\r\n  riskFile: SmallRisk,\r\n  cascades: DVRiskCascade[],\r\n  hazardCatalogue: { [id: string]: SmallRisk }\r\n): DVRiskCascade<SmallRisk, SmallRisk>[] {\r\n  return cascades\r\n    .filter(\r\n      (c) =>\r\n        c._cr4de_effect_hazard_value === riskFile.cr4de_riskfilesid &&\r\n        (hazardCatalogue[c._cr4de_cause_hazard_value].cr4de_risk_type ===\r\n          RISK_TYPE.STANDARD ||\r\n          hazardCatalogue[c._cr4de_cause_hazard_value].cr4de_risk_type ===\r\n            RISK_TYPE.MANMADE)\r\n    )\r\n    .map((c) => ({\r\n      ...c,\r\n      cr4de_cause_hazard: hazardCatalogue[c._cr4de_cause_hazard_value],\r\n      cr4de_effect_hazard: hazardCatalogue[c._cr4de_effect_hazard_value],\r\n    }));\r\n}\r\n\r\nexport function getCausesWithDP(\r\n  riskFile: DVRiskFile,\r\n  cascades: Cascades,\r\n  scenario: SCENARIOS\r\n) {\r\n  return [\r\n    {\r\n      name: \"2A.dp.title\",\r\n      p: getScenarioParameter(riskFile, \"DP\", scenario) || 0,\r\n    },\r\n    ...cascades.causes.map((c) => ({\r\n      id: c.cr4de_cause_hazard.cr4de_riskfilesid,\r\n      name: `risk.${c.cr4de_cause_hazard.cr4de_hazard_id}.name`,\r\n      p: getCascadeParameter(c, scenario, \"IP\") || 0,\r\n      cascade: c,\r\n    })),\r\n  ];\r\n}\r\n\r\nexport function getEffects(\r\n  riskFile: SmallRisk,\r\n  cascades: DVRiskCascade[],\r\n  hazardCatalogue: { [id: string]: SmallRisk }\r\n): DVRiskCascade<SmallRisk, SmallRisk>[] {\r\n  return cascades\r\n    .filter((c) => c._cr4de_cause_hazard_value === riskFile.cr4de_riskfilesid)\r\n    .map((c) => ({\r\n      ...c,\r\n      cr4de_cause_hazard: hazardCatalogue[c._cr4de_cause_hazard_value],\r\n      cr4de_effect_hazard: hazardCatalogue[c._cr4de_effect_hazard_value],\r\n    }));\r\n}\r\n\r\nexport function getEffectsWithDI(\r\n  riskFile: DVRiskFile,\r\n  cascades: Cascades,\r\n  scenario: SCENARIOS\r\n) {\r\n  return [\r\n    {\r\n      name: \"Direct Impact\",\r\n      i: getScenarioParameter(riskFile, \"DI\", scenario) || 0,\r\n      iH:\r\n        (getScenarioParameter(riskFile, \"DI_Ha\", scenario) || 0) +\r\n        (getScenarioParameter(riskFile, \"DI_Hb\", scenario) || 0) +\r\n        (getScenarioParameter(riskFile, \"DI_Hc\", scenario) || 0),\r\n      iS:\r\n        (getScenarioParameter(riskFile, \"DI_Sa\", scenario) || 0) +\r\n        (getScenarioParameter(riskFile, \"DI_Sb\", scenario) || 0) +\r\n        (getScenarioParameter(riskFile, \"DI_Sc\", scenario) || 0) +\r\n        (getScenarioParameter(riskFile, \"DI_Sd\", scenario) || 0),\r\n      iE: getScenarioParameter(riskFile, \"DI_Ea\", scenario) || 0,\r\n      iF:\r\n        (getScenarioParameter(riskFile, \"DI_Fa\", scenario) || 0) +\r\n        (getScenarioParameter(riskFile, \"DI_Fb\", scenario) || 0),\r\n    },\r\n    ...cascades.effects.map((e) => ({\r\n      id: e.cr4de_effect_hazard.cr4de_riskfilesid,\r\n      name: `risk.${e.cr4de_effect_hazard.cr4de_hazard_id}.name`,\r\n      i: getCascadeParameter(e, scenario, \"II\") || 0,\r\n      iH:\r\n        (getCascadeParameter(e, scenario, \"II_Ha\") || 0) +\r\n        (getCascadeParameter(e, scenario, \"II_Hb\") || 0) +\r\n        (getCascadeParameter(e, scenario, \"II_Hc\") || 0),\r\n      iS:\r\n        (getCascadeParameter(e, scenario, \"II_Sa\") || 0) +\r\n        (getCascadeParameter(e, scenario, \"II_Sb\") || 0) +\r\n        (getCascadeParameter(e, scenario, \"II_Sc\") || 0) +\r\n        (getCascadeParameter(e, scenario, \"II_Sd\") || 0),\r\n      iE: getCascadeParameter(e, scenario, \"II_Ea\") || 0,\r\n      iF:\r\n        (getCascadeParameter(e, scenario, \"II_Fa\") || 0) +\r\n        (getCascadeParameter(e, scenario, \"II_Fb\") || 0),\r\n      cascade: e,\r\n    })),\r\n  ];\r\n}\r\n\r\nexport function getCatalyzingEffects<T extends DVRiskCascade>(\r\n  riskFile: SmallRisk,\r\n  cascades: T[],\r\n  hazardCatalogue: { [id: string]: SmallRisk },\r\n  includeClimateChange: boolean = true\r\n): T[] {\r\n  return cascades.filter(\r\n    (c) =>\r\n      c._cr4de_effect_hazard_value === riskFile.cr4de_riskfilesid &&\r\n      hazardCatalogue[c._cr4de_cause_hazard_value].cr4de_risk_type ===\r\n        RISK_TYPE.EMERGING &&\r\n      (includeClimateChange ||\r\n        hazardCatalogue[c._cr4de_cause_hazard_value].cr4de_title.indexOf(\r\n          \"Climate\"\r\n        ) < 0)\r\n  );\r\n}\r\n\r\nexport function getClimateChange<T extends DVRiskCascade>(\r\n  riskFile: SmallRisk,\r\n  cascades: T[],\r\n  hazardCatalogue: { [id: string]: SmallRisk }\r\n): T | null {\r\n  return (\r\n    cascades.find(\r\n      (c) =>\r\n        c._cr4de_effect_hazard_value === riskFile.cr4de_riskfilesid &&\r\n        hazardCatalogue[c._cr4de_cause_hazard_value].cr4de_risk_type ===\r\n          RISK_TYPE.EMERGING &&\r\n        hazardCatalogue[c._cr4de_cause_hazard_value].cr4de_title.indexOf(\r\n          \"Climate\"\r\n        ) >= 0\r\n    ) || null\r\n  );\r\n}\r\n\r\nexport function getCascadeField(\r\n  causeScenario: SCENARIOS,\r\n  effectScenario: SCENARIOS\r\n): keyof CascadeAnalysisInput {\r\n  if (causeScenario === SCENARIOS.CONSIDERABLE) {\r\n    if (effectScenario === SCENARIOS.CONSIDERABLE) {\r\n      return \"cr4de_c2c\";\r\n    } else if (effectScenario === SCENARIOS.MAJOR) {\r\n      return \"cr4de_c2m\";\r\n    } else {\r\n      return \"cr4de_c2e\";\r\n    }\r\n  } else if (causeScenario === SCENARIOS.MAJOR) {\r\n    if (effectScenario === SCENARIOS.CONSIDERABLE) {\r\n      return \"cr4de_m2c\";\r\n    } else if (effectScenario === SCENARIOS.MAJOR) {\r\n      return \"cr4de_m2m\";\r\n    } else {\r\n      return \"cr4de_m2e\";\r\n    }\r\n  } else {\r\n    if (effectScenario === SCENARIOS.CONSIDERABLE) {\r\n      return \"cr4de_e2c\";\r\n    } else if (effectScenario === SCENARIOS.MAJOR) {\r\n      return \"cr4de_e2m\";\r\n    } else {\r\n      return \"cr4de_e2e\";\r\n    }\r\n  }\r\n}\r\n\r\nexport function getCascadeInput(ca: DVCascadeAnalysis): CascadeAnalysisInput {\r\n  return {\r\n    cr4de_c2c: ca.cr4de_c2c ? parseInt(ca.cr4de_c2c.slice(2), 10) : null,\r\n    cr4de_c2m: ca.cr4de_c2m ? parseInt(ca.cr4de_c2m.slice(2), 10) : null,\r\n    cr4de_c2e: ca.cr4de_c2e ? parseInt(ca.cr4de_c2e.slice(2), 10) : null,\r\n    cr4de_m2c: ca.cr4de_m2c ? parseInt(ca.cr4de_m2c.slice(2), 10) : null,\r\n    cr4de_m2m: ca.cr4de_m2m ? parseInt(ca.cr4de_m2m.slice(2), 10) : null,\r\n    cr4de_m2e: ca.cr4de_m2e ? parseInt(ca.cr4de_m2e.slice(2), 10) : null,\r\n    cr4de_e2c: ca.cr4de_e2c ? parseInt(ca.cr4de_e2c.slice(2), 10) : null,\r\n    cr4de_e2m: ca.cr4de_e2m ? parseInt(ca.cr4de_e2m.slice(2), 10) : null,\r\n    cr4de_e2e: ca.cr4de_e2e ? parseInt(ca.cr4de_e2e.slice(2), 10) : null,\r\n\r\n    cr4de_quali_cascade: ca.cr4de_quali_cascade,\r\n  };\r\n}\r\n\r\nexport const getAverageCP = (\r\n  causeScenario: SCENARIO_LETTER,\r\n  effect: CascadeCalculation\r\n): number => {\r\n  const ii_s2c = effect[`${causeScenario}2c`] * effect.effect.ti_c;\r\n  const ii_s2m = effect[`${causeScenario}2m`] * effect.effect.ti_m;\r\n  const ii_s2e = effect[`${causeScenario}2e`] * effect.effect.ti_e;\r\n\r\n  const ii_tot = 0.0001 + ii_s2c + ii_s2m + ii_s2e;\r\n\r\n  return (\r\n    (effect[`${causeScenario}2c`] * ii_s2c +\r\n      effect[`${causeScenario}2m`] * ii_s2m +\r\n      effect[`${causeScenario}2e`] * ii_s2e) /\r\n    ii_tot\r\n  );\r\n};\r\n\r\nexport const getCascades =\r\n  (\r\n    riskFile: DVRiskFile,\r\n    cs: { [riskId: string]: Cascades },\r\n    hc: { [id: string]: SmallRisk }\r\n  ) =>\r\n  (rcResult: DVRiskCascade<SmallRisk, SmallRisk>[]) => {\r\n    const causes = getCauses(riskFile, rcResult, hc);\r\n    const effects = getEffects(riskFile, rcResult, hc);\r\n    const catalyzingEffects = getCatalyzingEffects(\r\n      riskFile,\r\n      rcResult,\r\n      hc,\r\n      false\r\n    );\r\n    const climateChange = getClimateChange(riskFile, rcResult, hc);\r\n\r\n    return {\r\n      ...cs,\r\n      [riskFile.cr4de_riskfilesid]: {\r\n        all: [...causes, ...effects, ...catalyzingEffects],\r\n        causes,\r\n        effects,\r\n        catalyzingEffects,\r\n        climateChange,\r\n      },\r\n    };\r\n  };\r\n","import xlsx from \"xlsx\";\r\nimport { DVRiskFile } from \"../../types/dataverse/DVRiskFile\";\r\nimport { getScenarioParameter, SCENARIOS } from \"../scenarios\";\r\nimport {\r\n  Cascades,\r\n  getCascades,\r\n  getCausesWithDP,\r\n  getEffectsWithDI,\r\n} from \"../cascades\";\r\nimport { DVRiskCascade } from \"../../types/dataverse/DVRiskCascade\";\r\nimport { SmallRisk } from \"../../types/dataverse/DVSmallRisk\";\r\nimport { t } from \"i18next\";\r\nimport round from \"../roundNumberString\";\r\n\r\nexport enum Pareto {\r\n  SIGNIFICANT = \"significant\",\r\n  OTHER = \"other\",\r\n}\r\n\r\nexport type ExcelCause = {\r\n  scenario: SCENARIOS; // The risk file scenario for which the probabilities of this cause apply\r\n  causeId: string;\r\n  causeTitle: string;\r\n  pareto: Pareto; // Wether this cause is considered significant according to pareto analysis\r\n  pRank: number; // The ranking of this cause, highest P % => rank 0\r\n  //   pRel: string; // The relative scale of the probability (TPX)\r\n  pAbs: number; // The absolute (daily) probability of this cause\r\n  pPerc: number; // The percentage contribution of this cause to the total probability of the scenario\r\n};\r\n\r\nexport type ExcelEffect = {\r\n  scenario: SCENARIOS; // The risk file scenario for which the impacts of this effect apply\r\n  effectId: string;\r\n  effectTitle: string;\r\n  iTotPareto: Pareto; // Wether this effect is considered significant according to pareto analysis\r\n  iTotRank: number; // The ranking of the impact of this effect, highest I % => rank 0\r\n  iTotAbs: number; // The absolute (monetary) impact of this effect\r\n  iTotPerc: number; // The percentage contribution of the impact of this effect to the total impact of the scenario\r\n  iHPareto: Pareto; // Wether this effect is considered significant according to pareto analysis\r\n  iHRank: number; // The ranking of the impact of this effect, highest I % => rank 0\r\n  iHAbs: number; // The absolute (monetary) impact of this effect\r\n  iHPerc: number; // The percentage contribution of the impact of this effect to the total impact of the scenario\r\n  iSPareto: Pareto; // Wether this effect is considered significant according to pareto analysis\r\n  iSRank: number; // The ranking of the impact of this effect, highest I % => rank 0\r\n  iSAbs: number; // The absolute (monetary) impact of this effect\r\n  iSPerc: number; // The percentage contribution of the impact of this effect to the total impact of the scenario\r\n  iEPareto: Pareto; // Wether this effect is considered significant according to pareto analysis\r\n  iERank: number; // The ranking of the impact of this effect, highest I % => rank 0\r\n  iEAbs: number; // The absolute (monetary) impact of this effect\r\n  iEPerc: number; // The percentage contribution of the impact of this effect to the total impact of the scenario\r\n  iFPareto: Pareto; // Wether this effect is considered significant according to pareto analysis\r\n  iFRank: number; // The ranking of the impact of this effect, highest I % => rank 0\r\n  iFAbs: number; // The absolute (monetary) impact of this effect\r\n  iFPerc: number; // The percentage contribution of the impact of this effect to the total impact of the scenario\r\n};\r\n\r\nexport default function exportExcel({\r\n  exportedRiskFiles,\r\n  riskFiles,\r\n  allCascades,\r\n  onProgress,\r\n}: {\r\n  exportedRiskFiles: DVRiskFile[];\r\n  riskFiles: DVRiskFile[];\r\n  allCascades: DVRiskCascade[];\r\n  onProgress: (message: string) => void;\r\n}) {\r\n  const hc: { [key: string]: DVRiskFile } = riskFiles.reduce(\r\n    (acc, sr) => ({ ...acc, [sr.cr4de_riskfilesid]: sr }),\r\n    {}\r\n  );\r\n  const riskCascades: DVRiskCascade<SmallRisk, SmallRisk>[] = allCascades.map(\r\n    (c) => ({\r\n      ...c,\r\n      cr4de_cause_hazard: hc[c._cr4de_cause_hazard_value],\r\n      cr4de_effect_hazard: hc[c._cr4de_effect_hazard_value],\r\n    })\r\n  );\r\n\r\n  const cascades: { [key: string]: Cascades } = riskFiles.reduce(\r\n    (acc, rf) => getCascades(rf, acc, hc)(riskCascades),\r\n    {}\r\n  );\r\n\r\n  const workbook = xlsx.utils.book_new();\r\n\r\n  for (const riskFile of exportedRiskFiles) {\r\n    addRiskFile({\r\n      workbook,\r\n      riskFile,\r\n      cascades: cascades[riskFile.cr4de_riskfilesid],\r\n    });\r\n  }\r\n  const excelBuffer = xlsx.write(workbook, { bookType: \"xlsx\", type: \"array\" });\r\n  const blob = new Blob([excelBuffer], { type: \"application/octet-stream\" });\r\n\r\n  return blob;\r\n}\r\n\r\nfunction addRiskFile({\r\n  workbook,\r\n  riskFile,\r\n  cascades,\r\n}: {\r\n  workbook: xlsx.WorkBook;\r\n  riskFile: DVRiskFile;\r\n  cascades: Cascades;\r\n}) {\r\n  const causes = getCauses(riskFile, cascades);\r\n  const effects = getEffects(riskFile, cascades);\r\n\r\n  const PSheet = xlsx.utils.json_to_sheet(causes);\r\n  xlsx.utils.book_append_sheet(\r\n    workbook,\r\n    PSheet,\r\n    `P - ${riskFile.cr4de_hazard_id}`\r\n  );\r\n\r\n  const ISheet = xlsx.utils.json_to_sheet(effects);\r\n  xlsx.utils.book_append_sheet(\r\n    workbook,\r\n    ISheet,\r\n    `I - ${riskFile.cr4de_hazard_id}`\r\n  );\r\n}\r\n\r\nfunction getCauses(\r\n  riskFile: DVRiskFile<unknown>,\r\n  cascades: Cascades\r\n): ExcelCause[] {\r\n  if (!riskFile.results) throw new Error(\"No result snapshot\");\r\n\r\n  return [SCENARIOS.CONSIDERABLE, SCENARIOS.MAJOR, SCENARIOS.EXTREME].reduce(\r\n    (acc, s) => {\r\n      const causes = getCausesWithDP(riskFile, cascades, s);\r\n\r\n      return [\r\n        ...acc,\r\n        ...causes\r\n          .sort((a, b) => b.p - a.p)\r\n          .reduce(\r\n            (acc, c) => [\r\n              ...acc,\r\n              {\r\n                id: \"\",\r\n                ...c,\r\n                pCumul: causes.reduce(\r\n                  (pCumul, prevC) =>\r\n                    prevC.p > c.p ? pCumul + prevC.p : pCumul,\r\n                  0\r\n                ),\r\n              },\r\n            ],\r\n            [] as { id: string; name: string; p: number; pCumul: number }[]\r\n          )\r\n          .map((c, i) => ({\r\n            scenario: s,\r\n            causeId: \"id\" in c ? c.id : \"Direct Probability\",\r\n            causeTitle: t(c.name),\r\n            pareto:\r\n              c.pCumul <=\r\n              0.8 * (getScenarioParameter(riskFile, \"TP\", s) || 0.001)\r\n                ? Pareto.SIGNIFICANT\r\n                : Pareto.OTHER,\r\n            pRank: i + 1,\r\n            pAbs: Math.round(100000 * c.p) / 100000,\r\n            pPerc:\r\n              Math.round(\r\n                (100000 * c.p) /\r\n                  (getScenarioParameter(riskFile, \"TP\", s) || 0.001)\r\n              ) / 100000,\r\n          }))\r\n          .sort((a, b) => a.pRank - b.pRank),\r\n      ];\r\n    },\r\n    [] as ExcelCause[]\r\n  );\r\n}\r\n\r\nfunction getEffects(riskFile: DVRiskFile, cascades: Cascades): ExcelEffect[] {\r\n  if (!riskFile.results) throw new Error(\"No result snapshot\");\r\n\r\n  return [SCENARIOS.CONSIDERABLE, SCENARIOS.MAJOR, SCENARIOS.EXTREME].reduce(\r\n    (acc, s) => {\r\n      const effects = getEffectsWithDI(riskFile, cascades, s);\r\n\r\n      return [\r\n        ...acc,\r\n        ...effects\r\n          .sort((a, b) => b.i - a.i)\r\n          .reduce(\r\n            (acc, e) => [\r\n              ...acc,\r\n              {\r\n                id: \"\",\r\n                ...e,\r\n                iTotCumul: effects.reduce(\r\n                  (iCumul, prevC) =>\r\n                    prevC.i > e.i ? iCumul + prevC.i : iCumul,\r\n                  0\r\n                ),\r\n                iHCumul: effects\r\n                  .sort((a, b) => b.iH - a.iH)\r\n                  .reduce(\r\n                    (iCumul, prevC) =>\r\n                      prevC.iH > e.iH ? iCumul + prevC.iH : iCumul,\r\n                    0\r\n                  ),\r\n                iSCumul: effects\r\n                  .sort((a, b) => b.iS - a.iS)\r\n                  .reduce(\r\n                    (iCumul, prevC) =>\r\n                      prevC.iS > e.iS ? iCumul + prevC.iS : iCumul,\r\n                    0\r\n                  ),\r\n                iECumul: effects\r\n                  .sort((a, b) => b.iE - a.iE)\r\n                  .reduce(\r\n                    (iCumul, prevC) =>\r\n                      prevC.iE > e.iE ? iCumul + prevC.iE : iCumul,\r\n                    0\r\n                  ),\r\n                iFCumul: effects\r\n                  .sort((a, b) => b.iF - a.iF)\r\n                  .reduce(\r\n                    (iCumul, prevC) =>\r\n                      prevC.iF > e.iF ? iCumul + prevC.iF : iCumul,\r\n                    0\r\n                  ),\r\n                iTot: e.i,\r\n              },\r\n            ],\r\n            [] as {\r\n              id: string;\r\n              name: string;\r\n              iTot: number;\r\n              iH: number;\r\n              iS: number;\r\n              iE: number;\r\n              iF: number;\r\n              iTotCumul: number;\r\n              iHCumul: number;\r\n              iSCumul: number;\r\n              iFCumul: number;\r\n              iECumul: number;\r\n            }[]\r\n          )\r\n          .map((e, i) => ({\r\n            scenario: s,\r\n            effectId: \"id\" in e ? e.id : \"Direct Impact\",\r\n            effectTitle: t(e.name),\r\n            iTotPareto:\r\n              e.iTotCumul <=\r\n              0.8 * (getScenarioParameter(riskFile, \"TI\", s) || 0.001)\r\n                ? Pareto.SIGNIFICANT\r\n                : Pareto.OTHER,\r\n            iTotRank: i + 1,\r\n            iTotAbs: Math.round(100000 * e.iTot) / 100000,\r\n            iTotPerc:\r\n              Math.round(\r\n                (100000 * e.iTot) /\r\n                  (getScenarioParameter(riskFile, \"TI\", s) || 0.001)\r\n              ) / 100000,\r\n            iHPareto:\r\n              e.iHCumul <=\r\n              0.8 * (getScenarioParameter(riskFile, \"TI_H\", s) || 0.001)\r\n                ? Pareto.SIGNIFICANT\r\n                : Pareto.OTHER,\r\n            iHRank: i + 1,\r\n            iHAbs: Math.round(100000 * e.iTot) / 100000,\r\n            iHPerc:\r\n              Math.round(\r\n                (100000 * e.iH) /\r\n                  (getScenarioParameter(riskFile, \"TI_H\", s) || 0.001)\r\n              ) / 100000,\r\n            iSPareto:\r\n              e.iSCumul <=\r\n              0.8 * (getScenarioParameter(riskFile, \"TI_S\", s) || 0.001)\r\n                ? Pareto.SIGNIFICANT\r\n                : Pareto.OTHER,\r\n            iSRank: 0,\r\n            iSAbs: Math.round(100000 * e.iS) / 100000,\r\n            iSPerc:\r\n              Math.round(\r\n                (100000 * e.iS) /\r\n                  (getScenarioParameter(riskFile, \"TI_S\", s) || 0.001)\r\n              ) / 100000,\r\n            iEPareto:\r\n              e.iECumul <=\r\n              0.8 * (getScenarioParameter(riskFile, \"TI_E\", s) || 0.001)\r\n                ? Pareto.SIGNIFICANT\r\n                : Pareto.OTHER,\r\n            iERank: 0,\r\n            iEAbs: Math.round(100000 * e.iE) / 100000,\r\n            iEPerc:\r\n              Math.round(\r\n                (100000 * e.iE) /\r\n                  (getScenarioParameter(riskFile, \"TI_E\", s) || 0.001)\r\n              ) / 100000,\r\n            iFPareto:\r\n              e.iFCumul <=\r\n              0.8 * (getScenarioParameter(riskFile, \"TI_F\", s) || 0.001)\r\n                ? Pareto.SIGNIFICANT\r\n                : Pareto.OTHER,\r\n            iFRank: 0,\r\n            iFAbs: Math.round(100000 * e.iF) / 100000,\r\n            iFPerc:\r\n              Math.round(\r\n                (100000 * e.iF) /\r\n                  (getScenarioParameter(riskFile, \"TI_F\", s) || 0.001)\r\n              ) / 100000,\r\n          }))\r\n          .sort((a, b) => a.iTotRank - b.iTotRank),\r\n      ];\r\n    },\r\n    [] as ExcelEffect[]\r\n  );\r\n}\r\n","import { Module, ModuleType } from \"i18next\";\r\nimport { DVTranslation } from \"../types/dataverse/DVTranslation\";\r\n\r\ninterface Translations {\r\n  en: { [key: string]: string | null };\r\n  nl: { [key: string]: string | null };\r\n  fr: { [key: string]: string | null };\r\n  de: { [key: string]: string | null };\r\n}\r\n\r\nclass DataverseBackend implements Module {\r\n  type: ModuleType = \"backend\";\r\n\r\n  translations: Promise<Translations>;\r\n\r\n  constructor() {\r\n    // eslint-disable-next-line no-async-promise-executor\r\n    this.translations = new Promise<Translations>(async (resolve) => {\r\n      const response = await fetch(\r\n        `https://bnra.powerappsportals.com/_api/cr4de_bnratranslations?$select=cr4de_en,cr4de_nl,cr4de_fr,cr4de_de,cr4de_name`\r\n      );\r\n\r\n      const allTranslations: DVTranslation[] = (await response.json()).value;\r\n\r\n      const loadedTranslations: Translations = {\r\n        en: {},\r\n        nl: {},\r\n        fr: {},\r\n        de: {},\r\n      };\r\n\r\n      allTranslations.forEach((t) => {\r\n        if (t.cr4de_en) loadedTranslations.en[t.cr4de_name] = t.cr4de_en;\r\n        if (t.cr4de_nl) loadedTranslations.nl[t.cr4de_name] = t.cr4de_nl;\r\n        if (t.cr4de_fr) loadedTranslations.fr[t.cr4de_name] = t.cr4de_fr;\r\n        if (t.cr4de_de) loadedTranslations.de[t.cr4de_name] = t.cr4de_de;\r\n      });\r\n\r\n      return resolve(loadedTranslations);\r\n    });\r\n  }\r\n\r\n  init() {\r\n    // console.log(\"INIT\");\r\n  }\r\n\r\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n  async read(language: string, namespace: string, callback: any) {\r\n    callback(null, (await this.translations)[language as keyof Translations]);\r\n  }\r\n\r\n  async create(\r\n    languages: string[],\r\n    namespace: string,\r\n    key: string,\r\n    fallbackValue: string\r\n  ) {\r\n    if (languages[0] !== \"en\") return;\r\n\r\n    fetch(`https://bnra.powerappsportals.com/_api/cr4de_bnratranslations`, {\r\n      method: \"POST\",\r\n      headers: {\r\n        __RequestVerificationToken:\r\n          localStorage.getItem(\"antiforgerytoken\") || \"\",\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n      body: JSON.stringify({\r\n        cr4de_name: key,\r\n        [`cr4de_${languages[0]}`]: fallbackValue,\r\n      }),\r\n    });\r\n  }\r\n}\r\n\r\nexport default DataverseBackend;\r\n","/* eslint-disable @typescript-eslint/ban-ts-comment */\r\nimport { DOMParser } from \"xmldom\";\r\nimport { Canvg, presets } from \"canvg\";\r\nimport { ReactElement } from \"react\";\r\nimport { renderToString } from \"react-dom/server\";\r\n\r\nconst preset = presets.offscreen({\r\n  DOMParser,\r\n});\r\n\r\n// const scale= 1;\r\n\r\nexport default async function svg2PDF(\r\n  jsxChart: ReactElement,\r\n  width: number,\r\n  height: number,\r\n  type: string = \"image/jpeg\"\r\n) {\r\n  const svgString = renderToString(jsxChart);\r\n\r\n  try {\r\n    const canvas = new OffscreenCanvas(width, height);\r\n    // canvas.width = scale*1000; // Default width if not specified\r\n    // canvas.height = scale*550; // Default height if not specified\r\n\r\n    const context = canvas.getContext(\"2d\");\r\n\r\n    if (context) {\r\n      // context.imageSmoothingEnabled = true;\r\n      // context.imageSmoothingQuality = 'low';\r\n\r\n      // @ts-expect-error any\r\n      const v = Canvg.fromString(context, svgString.trim(), preset);\r\n      await v.render();\r\n\r\n      if (type.indexOf(\"jpeg\") >= 0) {\r\n        //set to draw behind current content\r\n        // @ts-ignore\r\n        context.globalCompositeOperation = \"destination-over\";\r\n\r\n        //set background color\r\n        // @ts-ignore\r\n        context.fillStyle = \"#FFFFFF\";\r\n\r\n        //draw background / rect on entire canvas\r\n        // @ts-ignore\r\n        context.fillRect(0, 0, canvas.width, canvas.height);\r\n      }\r\n\r\n      // @ts-ignore\r\n      const blob = await canvas.convertToBlob({ type, quality: 1 });\r\n\r\n      const dataUri = URL.createObjectURL(blob);\r\n      return dataUri;\r\n    }\r\n\r\n    throw Error(\"No context\");\r\n  } catch (error) {\r\n    console.error(\"Error occurred:\", error);\r\n    throw error;\r\n  }\r\n}\r\n","import { Bar, BarChart, YAxis } from \"recharts\";\r\n\r\nexport const arrow = (\r\n  value: number,\r\n  cy: number,\r\n  arrowWidth: number,\r\n  graphWidth: number,\r\n  color: string\r\n) => {\r\n  const ratio = graphWidth - 20;\r\n  const x0 = 10 + ratio * value * 0.2;\r\n  const y0 = cy + arrowWidth;\r\n\r\n  const xa = x0 - arrowWidth / 2;\r\n  const ya = y0;\r\n  const xb = x0;\r\n  const yb = y0 - arrowWidth;\r\n  const xc = x0 + arrowWidth / 2;\r\n  const yc = y0;\r\n\r\n  return (\r\n    <path\r\n      d={`M${xa} ${ya} L${xb} ${yb} L${xc} ${yc} L${xa} ${ya}`}\r\n      stroke=\"#none\"\r\n      fill={color}\r\n    />\r\n  );\r\n};\r\n\r\nexport const getProbabilityBars = (value: number) => {\r\n  return [0, 1, 2, 3, 4].map((i) => ({\r\n    name: i,\r\n    uv: value >= i ? i + 1 : 0,\r\n    pv: value < i ? i + 1 : 0,\r\n  }));\r\n};\r\n\r\nexport function ProbabilityBarsChart({\r\n  tp,\r\n  chartWidth,\r\n  height = 100,\r\n}: {\r\n  tp: number;\r\n  chartWidth: number;\r\n  manmade?: boolean;\r\n  height?: number;\r\n}) {\r\n  return (\r\n    <BarChart\r\n      width={chartWidth}\r\n      height={height}\r\n      data={getProbabilityBars(tp)}\r\n      style={{}}\r\n    >\r\n      {/* <CartesianGrid strokeDasharray=\"3 3\" /> */}\r\n      <YAxis domain={[0, 5]} hide />\r\n      <Bar dataKey=\"uv\" fill=\"#000000b0\" stackId=\"a\" />\r\n      <Bar dataKey=\"pv\" fill=\"#00000040\" stackId=\"a\" />\r\n      {arrow(tp, height, 10, chartWidth, \"#000000b0\")}\r\n    </BarChart>\r\n  );\r\n}\r\n","import { RiskCalculation } from \"../types/dataverse/DVAnalysisRun\";\r\nimport { DAMAGE_INDICATOR, IMPACT_CATEGORY } from \"./Impact\";\r\nimport { SCENARIO_SUFFIX } from \"./scenarios\";\r\n\r\nconst BASE_TOTAL_IMPACT = 8 * 10 ** 8;\r\n\r\n/**\r\n * ABSOLUTE IMPACT:\r\n *      Linear Scale from 0 to 16 * 10^10\r\n *\r\n * RELATIVE IMPACT:\r\n *      Logarithmic Scale with base 5 from 0 to 5\r\n */\r\n\r\nexport const getTotalImpactRelative = (\r\n  calculation: RiskCalculation,\r\n  scenarioSuffix: SCENARIO_SUFFIX\r\n) => {\r\n  const totalImpactAbsolute = calculation[`ti${scenarioSuffix}`];\r\n\r\n  if (totalImpactAbsolute < BASE_TOTAL_IMPACT)\r\n    return totalImpactAbsolute / BASE_TOTAL_IMPACT;\r\n\r\n  return (\r\n    1 + Math.log10(totalImpactAbsolute / BASE_TOTAL_IMPACT) / Math.log10(5)\r\n  );\r\n};\r\n\r\nexport const getTotalImpactAbsolute = (relativeImpact: number) => {\r\n  if (relativeImpact <= 1) return relativeImpact * BASE_TOTAL_IMPACT;\r\n\r\n  return BASE_TOTAL_IMPACT * Math.pow(5, relativeImpact - 1);\r\n};\r\n\r\n/**\r\n * @returns The impact attributable to the given damage indicator (0 - 5)\r\n */\r\nexport const getDamageIndicatorImpactRelative = (\r\n  calculation: RiskCalculation,\r\n  damageIndicator: DAMAGE_INDICATOR,\r\n  scenarioSuffix: SCENARIO_SUFFIX\r\n) => {\r\n  const totalImpactAbsolute = calculation[`ti${scenarioSuffix}`];\r\n  const totalImpactRelative = getTotalImpactRelative(\r\n    calculation,\r\n    scenarioSuffix\r\n  );\r\n\r\n  const damageIndicatorImpactAbsolute =\r\n    calculation[`ti_${damageIndicator}${scenarioSuffix}`] || 0;\r\n\r\n  return (\r\n    (totalImpactRelative * damageIndicatorImpactAbsolute) / totalImpactAbsolute\r\n  );\r\n};\r\n\r\n// export const getDamageIndicatorImpactAbsolute = () => {\r\n//     return (damageIndicatorImpactRelative * totalImpactAbsolute) / totalImpactRelative;\r\n// };\r\n\r\nexport const getTotalCategoryImpactAbsolute = (\r\n  calculation: RiskCalculation,\r\n  category: IMPACT_CATEGORY,\r\n  scenarioSuffix: SCENARIO_SUFFIX\r\n) => {\r\n  return (\r\n    (calculation[`ti_${category}a${scenarioSuffix}`] || 0) +\r\n    ((calculation[\r\n      `ti_${category}b${scenarioSuffix}` as keyof RiskCalculation\r\n    ] as number) || 0) +\r\n    ((calculation[\r\n      `ti_${category}c${scenarioSuffix}` as keyof RiskCalculation\r\n    ] as number) || 0) +\r\n    ((calculation[\r\n      `ti_${category}d${scenarioSuffix}` as keyof RiskCalculation\r\n    ] as number) || 0)\r\n  );\r\n};\r\n\r\n/**\r\n * @returns The impact attributable to the given impact category (0 - 5)\r\n *          i.e. the sum of all damage indicators of this category\r\n */\r\nexport const getCategoryImpactRelative = (\r\n  calculation: RiskCalculation,\r\n  category: IMPACT_CATEGORY,\r\n  scenarioSuffix: SCENARIO_SUFFIX\r\n) => {\r\n  const totalImpactAbsolute = calculation[`ti${scenarioSuffix}`];\r\n  const totalImpactRelative = getTotalImpactRelative(\r\n    calculation,\r\n    scenarioSuffix\r\n  );\r\n\r\n  const categoryImpactAbsolute = getTotalCategoryImpactAbsolute(\r\n    calculation,\r\n    category,\r\n    scenarioSuffix\r\n  );\r\n\r\n  return (totalImpactRelative * categoryImpactAbsolute) / totalImpactAbsolute;\r\n};\r\n\r\n// export const getCategoryImpactAbsolute = () => {};\r\n","/**\r\n * These function try to rescale the impact per category so as to\r\n * provide comparable and logical values.\r\n *\r\n * The magic numbers are chosen somewhat arbitrarily to provide\r\n * better visual representations\r\n */\r\n\r\nimport {\r\n  DVRiskFile,\r\n  RISKFILE_RESULT_FIELD,\r\n} from \"../types/dataverse/DVRiskFile\";\r\nimport { DAMAGE_INDICATOR, IMPACT_CATEGORY } from \"./Impact\";\r\nimport { getScenarioParameter, SCENARIOS } from \"./scenarios\";\r\nimport { getTotalImpactAbsolute } from \"./TotalImpact\";\r\n\r\nconst BASE_CATEGORY_IMPACT = 15811388;\r\n\r\nconst getCategoryImpactAbsolute = (\r\n  riskFile: DVRiskFile,\r\n  category: IMPACT_CATEGORY,\r\n  scenario: SCENARIOS\r\n) => {\r\n  const totalImpactRelative =\r\n    getScenarioParameter(riskFile, \"TI\", scenario) || 0;\r\n  const totalImpactAbsolute = getTotalImpactAbsolute(totalImpactRelative);\r\n\r\n  const categoryImpactRelative =\r\n    (getScenarioParameter(\r\n      riskFile,\r\n      `TI_${category}a` as RISKFILE_RESULT_FIELD,\r\n      scenario\r\n    ) || 0) +\r\n    (getScenarioParameter(\r\n      riskFile,\r\n      `TI_${category}b` as RISKFILE_RESULT_FIELD,\r\n      scenario\r\n    ) || 0) +\r\n    (getScenarioParameter(\r\n      riskFile,\r\n      `TI_${category}c` as RISKFILE_RESULT_FIELD,\r\n      scenario\r\n    ) || 0) +\r\n    (getScenarioParameter(\r\n      riskFile,\r\n      `TI_${category}d` as RISKFILE_RESULT_FIELD,\r\n      scenario\r\n    ) || 0);\r\n\r\n  return (categoryImpactRelative * totalImpactAbsolute) / totalImpactRelative;\r\n};\r\n\r\nconst rescaleImpact = (i: number) => {\r\n  // return i;\r\n  if (i < 1.5) return 0.5 * (i / 1.5);\r\n  // if (i > 3.5) return 4.5 + 0.5 * ((i - 3.5) / 1.5);\r\n  return 0.5 + (4.5 * (i - 1.5)) / 3.5;\r\n};\r\n\r\nexport const getCategoryImpactRescaled = (\r\n  riskFile: DVRiskFile,\r\n  category: IMPACT_CATEGORY,\r\n  scenario: SCENARIOS\r\n) => {\r\n  const totalImpact = getCategoryImpactAbsolute(riskFile, category, scenario);\r\n\r\n  if (totalImpact < BASE_CATEGORY_IMPACT) {\r\n    return rescaleImpact(totalImpact / (2 * BASE_CATEGORY_IMPACT));\r\n  }\r\n  return rescaleImpact(Math.log10(totalImpact / 5) - 6);\r\n};\r\n\r\nexport const getDamageIndicatorToCategoryImpactRatio = (\r\n  riskFile: DVRiskFile,\r\n  di: DAMAGE_INDICATOR,\r\n  scenario: SCENARIOS\r\n) => {\r\n  const diImpact = getScenarioParameter(riskFile, `TI_${di}`, scenario) || 0;\r\n  const categoryImpact =\r\n    (getScenarioParameter(\r\n      riskFile,\r\n      `TI_${di[0]}a` as RISKFILE_RESULT_FIELD,\r\n      scenario\r\n    ) || 0) +\r\n    (getScenarioParameter(\r\n      riskFile,\r\n      `TI_${di[0]}b` as RISKFILE_RESULT_FIELD,\r\n      scenario\r\n    ) || 0) +\r\n    (getScenarioParameter(\r\n      riskFile,\r\n      `TI_${di[0]}c` as RISKFILE_RESULT_FIELD,\r\n      scenario\r\n    ) || 0) +\r\n    (getScenarioParameter(\r\n      riskFile,\r\n      `TI_${di[0]}d` as RISKFILE_RESULT_FIELD,\r\n      scenario\r\n    ) || 0);\r\n\r\n  if (categoryImpact <= 0) return 0;\r\n\r\n  return diImpact / categoryImpact;\r\n};\r\n","export default function getImpactColor(impactPrefix: string) {\r\n  if (impactPrefix === \"Ha\") return DAMAGE_INDICATOR_COLORS.Ha;\r\n  if (impactPrefix === \"Hb\") return DAMAGE_INDICATOR_COLORS.Hb;\r\n  if (impactPrefix === \"Hc\") return DAMAGE_INDICATOR_COLORS.Hc;\r\n  if (impactPrefix === \"H\") return DAMAGE_INDICATOR_COLORS.H;\r\n\r\n  if (impactPrefix === \"Sa\") return DAMAGE_INDICATOR_COLORS.Sa;\r\n  if (impactPrefix === \"Sb\") return DAMAGE_INDICATOR_COLORS.Sb;\r\n  if (impactPrefix === \"Sc\") return DAMAGE_INDICATOR_COLORS.Sc;\r\n  if (impactPrefix === \"Sd\") return DAMAGE_INDICATOR_COLORS.Sd;\r\n  if (impactPrefix === \"S\") return DAMAGE_INDICATOR_COLORS.S;\r\n\r\n  if (impactPrefix === \"Ea\") return DAMAGE_INDICATOR_COLORS.Ea;\r\n  if (impactPrefix === \"E\") return DAMAGE_INDICATOR_COLORS.E;\r\n\r\n  if (impactPrefix === \"Fa\") return DAMAGE_INDICATOR_COLORS.Fa;\r\n  if (impactPrefix === \"Fb\") return DAMAGE_INDICATOR_COLORS.Fb;\r\n  if (impactPrefix === \"F\") return DAMAGE_INDICATOR_COLORS.F;\r\n}\r\n\r\nexport const DAMAGE_INDICATOR_COLORS = {\r\n  H: \"#de6148\",\r\n  Ha: \"#de6148\",\r\n  Hb: \"#f39d87\",\r\n  Hc: \"#ffd7cc\",\r\n\r\n  S: \"#bca632\",\r\n  Sa: \"#bca632\",\r\n  Sb: \"#d2ba37\",\r\n  Sc: \"#e8ce3d\",\r\n  Sd: \"#ffe342\",\r\n\r\n  E: \"#83af70\",\r\n  Ea: \"#83af70\",\r\n\r\n  F: \"#6996b3\",\r\n  Fa: \"#6996b3\",\r\n  Fb: \"#c1e7ff\",\r\n};\r\n\r\nexport const IMPACT_COLOR_SCALES = {\r\n  H: [\r\n    \"rgba(240, 73, 46, 0.2)\",\r\n    \"rgba(240, 73, 46, 0.35)\",\r\n    \"rgba(240, 73, 46, 0.5)\",\r\n    \"rgba(240, 73, 46, 0.65)\",\r\n    \"rgba(240, 73, 46, 0.8)\",\r\n  ],\r\n  S: [\r\n    \"rgba(255,223,28,0.2)\",\r\n    \"rgba(255,223,28,0.35)\",\r\n    \"rgba(255,223,28,0.5)\",\r\n    \"rgba(255,223,28,0.65)\",\r\n    \"rgba(255,223,28,0.8)\",\r\n  ],\r\n  E: [\r\n    \"rgba(0, 164, 154, 0.2)\",\r\n    \"rgba(0, 164, 154, 0.35)\",\r\n    \"rgba(0, 164, 154, 0.5)\",\r\n    \"rgba(0, 164, 154, 0.65)\",\r\n    \"rgba(0, 164, 154, 0.8)\",\r\n  ],\r\n  F: [\r\n    \"rgba(45, 117, 240, 0.2)\",\r\n    \"rgba(45, 117, 240, 0.35)\",\r\n    \"rgba(45, 117, 240, 0.5)\",\r\n    \"rgba(45, 117, 240, 0.65)\",\r\n    \"rgba(45, 117, 240, 0.8)\",\r\n  ],\r\n};\r\n","var _defs;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgBnraLogo(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    id: \"svg2\",\n    width: 2857.3333,\n    height: 1020,\n    viewBox: \"0 0 2857.3333 1020\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _defs || (_defs = /*#__PURE__*/React.createElement(\"defs\", {\n    id: \"defs6\"\n  }, /*#__PURE__*/React.createElement(\"clipPath\", {\n    clipPathUnits: \"userSpaceOnUse\",\n    id: \"clipPath16\"\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M 0,765 H 2143 V 0 H 0 Z\",\n    id: \"path14\"\n  })))), /*#__PURE__*/React.createElement(\"g\", {\n    id: \"g8\",\n    transform: \"matrix(1.3333333,0,0,-1.3333333,0,1020)\"\n  }, /*#__PURE__*/React.createElement(\"g\", {\n    id: \"g10\"\n  }, /*#__PURE__*/React.createElement(\"g\", {\n    id: \"g12\",\n    clipPath: \"url(#clipPath16)\"\n  }, /*#__PURE__*/React.createElement(\"g\", {\n    id: \"g18\",\n    transform: \"translate(994.0208,291.3252)\"\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"m 0,0 h 49.592 c 16.736,0 28.813,3.21 36.23,9.632 7.415,6.421 11.124,14.685 11.124,24.796 0,7.539 -1.864,14.355 -5.592,20.445 -3.729,6.091 -9.033,10.896 -15.91,14.418 -6.879,3.521 -15.082,5.282 -24.609,5.282 H 0 Z m 0,107.759 h 45.614 c 7.955,0 15.121,1.47 21.503,4.412 6.379,2.94 11.413,7.125 15.101,12.554 3.686,5.425 5.531,11.869 5.531,19.327 0,9.859 -3.461,17.978 -10.378,24.36 -6.92,6.38 -17.174,9.57 -30.762,9.57 H 0 Z M -46.111,-38.53 v 254.546 h 97.443 c 18.395,0 33.702,-2.881 45.925,-8.639 12.222,-5.76 21.378,-13.609 27.468,-23.553 6.09,-9.943 9.135,-21.213 9.135,-33.806 0,-10.36 -1.988,-19.204 -5.965,-26.537 -3.978,-7.333 -9.323,-13.279 -16.034,-17.835 -6.712,-4.558 -14.212,-7.831 -22.497,-9.819 v -2.486 c 9.032,-0.497 17.712,-3.253 26.039,-8.265 8.327,-5.014 15.142,-12.078 20.446,-21.191 5.301,-9.116 7.955,-20.135 7.955,-33.062 0,-13.175 -3.192,-25.004 -9.571,-35.484 -6.381,-10.484 -15.993,-18.748 -28.835,-24.796 -12.844,-6.05 -29.002,-9.073 -48.473,-9.073 z\",\n    style: {\n      fill: \"#ffffff\",\n      fillOpacity: 1,\n      fillRule: \"nonzero\",\n      stroke: \"none\"\n    },\n    id: \"path20\"\n  })), /*#__PURE__*/React.createElement(\"g\", {\n    id: \"g22\",\n    transform: \"translate(1387.1448,507.3408)\"\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"m 0,0 v -254.546 h -41.016 l -119.939,173.384 h -2.113 V -254.546 H -209.18 V 0 h 41.265 L -48.1,-173.509 h 2.237 V 0 Z\",\n    style: {\n      fill: \"#ffffff\",\n      fillOpacity: 1,\n      fillRule: \"nonzero\",\n      stroke: \"none\"\n    },\n    id: \"path24\"\n  })), /*#__PURE__*/React.createElement(\"g\", {\n    id: \"g26\",\n    transform: \"translate(1568.7278,368.1357)\"\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M 0,0 63.015,-115.341 H 11.559 L -50.338,0 Z m -131.499,-115.341 v 254.546 h 95.455 c 19.554,0 35.982,-3.399 49.28,-10.192 C 26.535,122.218 36.603,112.71 43.438,100.488 50.274,88.266 53.692,74.034 53.692,57.795 53.692,41.47 50.232,27.322 43.314,15.35 36.396,3.375 26.225,-5.863 12.802,-12.367 c -13.424,-6.505 -29.913,-9.756 -49.468,-9.756 h -67.986 v 38.281 h 61.772 c 11.435,0 20.797,1.594 28.089,4.785 7.291,3.189 12.697,7.87 16.22,14.044 3.521,6.172 5.282,13.776 5.282,22.808 0,9.03 -1.782,16.758 -5.344,23.18 -3.564,6.421 -8.992,11.31 -16.282,14.666 -7.292,3.356 -16.697,5.034 -28.214,5.034 h -42.259 v -216.016 z\",\n    style: {\n      fill: \"#ffffff\",\n      fillOpacity: 1,\n      fillRule: \"nonzero\",\n      stroke: \"none\"\n    },\n    id: \"path28\"\n  })), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"m 1699.228,352.6 h 134.233 v -37.038 h -134.233 z m -1.615,-99.805 h -49.219 l 89.612,254.546 h 56.925 l 89.737,-254.546 h -49.219 l -67.986,202.344 h -1.988 z\",\n    style: {\n      fill: \"#ffffff\",\n      fillOpacity: 1,\n      fillRule: \"nonzero\",\n      stroke: \"none\"\n    },\n    id: \"path30\"\n  }), /*#__PURE__*/React.createElement(\"g\", {\n    id: \"g32\",\n    transform: \"translate(753.6999,190.7229)\"\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"m 0,0 -66.39,27.863 150.538,358.691 66.39,-27.863 z\",\n    style: {\n      fill: \"#f0492e\",\n      fillOpacity: 1,\n      fillRule: \"nonzero\",\n      stroke: \"none\"\n    },\n    id: \"path34\"\n  })), /*#__PURE__*/React.createElement(\"g\", {\n    id: \"g36\",\n    transform: \"translate(522.6973,207.0119)\"\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"m 0,0 -50.912,50.912 275.065,275.064 50.912,-50.911 z\",\n    style: {\n      fill: \"#ffdf1c\",\n      fillOpacity: 1,\n      fillRule: \"nonzero\",\n      stroke: \"none\"\n    },\n    id: \"path38\"\n  })), /*#__PURE__*/React.createElement(\"g\", {\n    id: \"g40\",\n    transform: \"translate(294.3318,224.5731)\"\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"m 0,0 -36,62.354 336.884,194.5 36,-62.354 z\",\n    style: {\n      fill: \"#000000\",\n      fillOpacity: 1,\n      fillRule: \"nonzero\",\n      stroke: \"none\"\n    },\n    id: \"path42\"\n  }))))));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgBnraLogo);\nexport default __webpack_public_path__ + \"static/media/BNRA_Logo.905d03bb6164ac59a044a85d95518417.svg\";\nexport { ForwardRef as ReactComponent };","import { Cell, Pie, PieChart } from \"recharts\";\r\nimport { IMPACT_CATEGORY } from \"../../../functions/Impact\";\r\nimport { IMPACT_COLOR_SCALES } from \"../../../functions/getImpactColor\";\r\n\r\nconst RADIAN = Math.PI / 180;\r\nconst data = [\r\n  { name: \"1\", value: 1, color: \"red\" },\r\n  { name: \"2\", value: 1, color: \"orange\" },\r\n  { name: \"3\", value: 1, color: \"yellow\" },\r\n  { name: \"4\", value: 1, color: \"green\" },\r\n  { name: \"5\", value: 1, color: \"blue\" },\r\n];\r\nexport const pieWidth = 200;\r\nexport const pieHeight = 100;\r\n\r\nconst getBars = (impact: IMPACT_CATEGORY) => [\r\n  { name: \"1\", value: 1, color: IMPACT_COLOR_SCALES[impact][0] },\r\n  { name: \"2\", value: 1, color: IMPACT_COLOR_SCALES[impact][1] },\r\n  { name: \"3\", value: 1, color: IMPACT_COLOR_SCALES[impact][2] },\r\n  { name: \"4\", value: 1, color: IMPACT_COLOR_SCALES[impact][3] },\r\n  { name: \"5\", value: 1, color: IMPACT_COLOR_SCALES[impact][4] },\r\n];\r\n\r\nconst needle = (\r\n  value: number,\r\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n  data: any[],\r\n  cx: number,\r\n  cy: number,\r\n  iR: number,\r\n  oR: number,\r\n  color: string,\r\n  padding: number,\r\n  needleWidth: number = 3\r\n) => {\r\n  let total = 0;\r\n  data.forEach((v) => {\r\n    total += v.value;\r\n  });\r\n  const ang = 180.0 * (1 - value / total);\r\n  const length = (iR + 2 * oR) / 4;\r\n  const sin = Math.sin(-RADIAN * ang);\r\n  const cos = Math.cos(-RADIAN * ang);\r\n  const r = 5;\r\n  const x0 = cx + padding;\r\n  const y0 = cy + r;\r\n  const xp = x0 + length * cos;\r\n  const yp = y0 + length * sin;\r\n\r\n  return (\r\n    <>\r\n      <circle cx={x0} cy={y0} r={r} fill={color} stroke=\"none\" />\r\n      <path\r\n        d={`M${x0} ${y0} L${xp} ${yp} L${x0} ${y0} Z`}\r\n        stroke={color}\r\n        strokeWidth={needleWidth}\r\n        fill={color}\r\n      />\r\n    </>\r\n  );\r\n};\r\n\r\nexport default function SummaryImpactChart({\r\n  width = pieWidth,\r\n  height = pieHeight,\r\n  category,\r\n  value,\r\n  needleWidth = 3,\r\n}: {\r\n  category: IMPACT_CATEGORY;\r\n  value: number;\r\n  width?: number;\r\n  height?: number;\r\n  needleWidth?: number;\r\n}) {\r\n  const piePadding = width / 40;\r\n  const cx = width / 2 - piePadding;\r\n  const cy = height - piePadding;\r\n  const oR = Math.min(height, width / 2);\r\n  const iR = oR / 2;\r\n\r\n  return (\r\n    <PieChart width={width} height={height}>\r\n      <Pie\r\n        dataKey=\"value\"\r\n        startAngle={180}\r\n        endAngle={0}\r\n        data={getBars(category)}\r\n        cx={cx}\r\n        cy={cy}\r\n        innerRadius={iR}\r\n        outerRadius={oR}\r\n        fill=\"#8884d8\"\r\n        stroke=\"none\"\r\n        paddingAngle={1}\r\n      >\r\n        {getBars(category).map((entry, index) => (\r\n          <Cell key={`cell-${index}`} fill={entry.color} stroke=\"none\" />\r\n        ))}\r\n      </Pie>\r\n      {needle(value, data, cx, cy, iR, oR, \"#555\", piePadding, needleWidth)}\r\n    </PieChart>\r\n  );\r\n}\r\n","var _style, _g, _polygon, _polygon2, _polygon3, _polygon4, _polygon5;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgNccnLogo(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: \"2400px\",\n    height: \"1148px\",\n    id: \"Layer_1\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    xmlnsXlink: \"http://www.w3.org/1999/xlink\",\n    x: \"0px\",\n    y: \"0px\",\n    viewBox: \"0 0 1668.8 300.1\",\n    style: {\n      enableBackground: \"new 0 0 1668.8 300.1\"\n    },\n    xmlSpace: \"preserve\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _style || (_style = /*#__PURE__*/React.createElement(\"style\", {\n    type: \"text/css\"\n  }, \"\\r\\n\\t.st0{fill:#ffffff;}\\r\\n\\t.st3{fill:#231F20;}\\r\\n\\t.st1{fill:#FFDE1B;}\\r\\n\\t.st2{fill:#EF492F;}\\r\\n\")), _g || (_g = /*#__PURE__*/React.createElement(\"g\", null, /*#__PURE__*/React.createElement(\"path\", {\n    className: \"st0\",\n    d: \"M386.7,103.2h12.2l42,64c3.1,4.8,6.7,11.8,6.7,11.8h0.3v-75.8h10.8v92h-11.8l-42.2-64.1 c-3-4.5-6.8-11.5-6.8-11.5h-0.3v75.6h-10.8V103.2z\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    className: \"st0\",\n    d: \"M515.2,186H515c-4,5.1-10.8,10.6-22.1,10.6c-12.6,0-22.5-5.9-22.5-18.5c0-15.7,12.4-18.9,29-21.5 c9.4-1.4,16-2.3,16-9.5c0-7.5-5.4-11.7-14.9-11.7c-10.8,0-16.2,4.6-16.6,14.7h-10c0.4-12.9,8.9-22.5,26.5-22.5 c14.2,0,24.6,5.3,24.6,21.1v31.7c0,5.4,1.3,8.4,7.1,7.1h0.4v7.6c-1.3,0.5-3,1-5.7,1C519.8,195.9,516.2,192.8,515.2,186z  M515.4,170.7v-11.3c-3.5,2.2-9.5,3.9-15.2,4.9c-10.4,1.9-18.8,3.7-18.8,13.5c0,8.9,7,10.8,13.8,10.8 C509.1,188.5,515.4,178.4,515.4,170.7z\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    className: \"st0\",\n    d: \"M534.5,128.7h9.7v-21h10.4v21h12.9v8.5h-12.9v43.2c0,4.6,2.4,6.2,6.7,6.2c2.1,0,4.4-0.5,5.5-0.9h0.4v9 c-2.4,0.5-5.3,0.9-8.4,0.9c-8.5,0-14.7-3.5-14.7-12.9v-45.6h-9.7V128.7z\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    className: \"st0\",\n    d: \"M578.2,103.2h10.4v12.9h-10.4V103.2z M578.2,128.7h10.4v66.5h-10.4V128.7z\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    className: \"st0\",\n    d: \"M599.1,162c0-19.3,12.4-35,32.2-35c20,0,32.1,15.7,32.1,35s-12.1,35-32.1,35C611.4,197,599.1,181.3,599.1,162z  M652.6,162c0-14.7-7.2-26.4-21.4-26.4c-14.2,0-21.5,11.7-21.5,26.4c0,14.7,7.3,26.3,21.5,26.3C645.4,188.3,652.6,176.7,652.6,162z \"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    className: \"st0\",\n    d: \"M684.2,137.4h0.3c4.8-6.3,11.5-10.3,21.1-10.3c13.9,0,22.4,7.6,22.4,21.4v46.7h-10.4v-45.8 c0-8.6-5.7-13.5-15.1-13.5c-10.6,0-18.3,7.5-18.3,18.4v40.9h-10.4v-66.5h10.4V137.4z\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    className: \"st0\",\n    d: \"M782.5,186h-0.1c-4,5.1-10.8,10.6-22.1,10.6c-12.6,0-22.5-5.9-22.5-18.5c0-15.7,12.4-18.9,29-21.5 c9.4-1.4,16-2.3,16-9.5c0-7.5-5.4-11.7-14.9-11.7c-10.8,0-16.2,4.6-16.6,14.7h-10c0.4-12.9,8.9-22.5,26.5-22.5 c14.2,0,24.6,5.3,24.6,21.1v31.7c0,5.4,1.3,8.4,7.1,7.1h0.4v7.6c-1.3,0.5-3,1-5.7,1C787.1,195.9,783.5,192.8,782.5,186z  M782.8,170.7v-11.3c-3.5,2.2-9.5,3.9-15.2,4.9c-10.4,1.9-18.8,3.7-18.8,13.5c0,8.9,7,10.8,13.8,10.8 C776.5,188.5,782.8,178.4,782.8,170.7z\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    className: \"st0\",\n    d: \"M848.1,186H848c-4,5.1-10.8,10.6-22.1,10.6c-12.6,0-22.5-5.9-22.5-18.5c0-15.7,12.4-18.9,29-21.5 c9.4-1.4,16-2.3,16-9.5c0-7.5-5.4-11.7-14.9-11.7c-10.8,0-16.2,4.6-16.6,14.7h-10c0.4-12.9,8.9-22.5,26.5-22.5 c14.2,0,24.6,5.3,24.6,21.1v31.7c0,5.4,1.3,8.4,7.1,7.1h0.4v7.6c-1.3,0.5-3,1-5.7,1C852.8,195.9,849.2,192.8,848.1,186z  M848.4,170.7v-11.3c-3.5,2.2-9.5,3.9-15.2,4.9c-10.4,1.9-18.8,3.7-18.8,13.5c0,8.9,7,10.8,13.8,10.8 C842.1,188.5,848.4,178.4,848.4,170.7z\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    className: \"st0\",\n    d: \"M873.4,103.2h10.4v92h-10.4V103.2z\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    className: \"st0\",\n    d: \"M916.9,149.2c0-27,16.2-48,43.6-48c21.5,0,34.5,12.4,36.9,29.3h-11.3c-2.2-11.5-11.3-19.3-25.9-19.3 c-20.2,0-31.5,16.3-31.5,38c0,22.5,12.5,37.7,31.7,37.7c17.4,0,25.6-11.8,26.8-25.4h11.5c-0.1,9.1-4.5,19.4-11.1,25.9 c-6.4,6.3-15.8,9.7-27.5,9.7C933.9,197,916.9,177.1,916.9,149.2z\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    className: \"st0\",\n    d: \"M1020.5,139.8h0.3c4-6.4,10.9-11.8,19.8-11.8c1.9,0,3,0.3,4.2,0.8v10h-0.4c-1.5-0.5-2.6-0.6-4.6-0.6 c-10.3,0-19.3,7.7-19.3,20.2v36.9h-10.4v-66.5h10.4V139.8z\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    className: \"st0\",\n    d: \"M1054.2,103.2h10.4v12.9h-10.4V103.2z M1054.2,128.7h10.4v66.5h-10.4V128.7z\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    className: \"st0\",\n    d: \"M1074.5,173.6h10.7c1.4,11.6,9.1,14.8,19,14.8c10.9,0,15.4-4.8,15.4-10.9c0-7.5-5.2-9.4-17.4-12 c-13.1-2.7-24.8-5.4-24.8-20c0-11.1,8.5-18.3,23.9-18.3c16.5,0,24.6,7.9,26.1,20.9h-10.7c-1-8.8-5.8-12.6-15.7-12.6 c-9.5,0-13.4,4.3-13.4,9.5c0,7.2,6.4,8.6,17.9,10.9c13.4,2.7,24.6,5.7,24.6,21c0,13.4-10.9,20.2-26.3,20.2 C1085.8,197.2,1075.6,188.5,1074.5,173.6z\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    className: \"st0\",\n    d: \"M1140.3,103.2h10.4v12.9h-10.4V103.2z M1140.3,128.7h10.4v66.5h-10.4V128.7z\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    className: \"st0\",\n    d: \"M1160.7,173.6h10.7c1.4,11.6,9.1,14.8,19,14.8c10.9,0,15.4-4.8,15.4-10.9c0-7.5-5.2-9.4-17.4-12 c-13.1-2.7-24.8-5.4-24.8-20c0-11.1,8.5-18.3,23.9-18.3c16.5,0,24.6,7.9,26.1,20.9H1203c-1-8.8-5.8-12.6-15.7-12.6 c-9.5,0-13.4,4.3-13.4,9.5c0,7.2,6.4,8.6,17.9,10.9c13.4,2.7,24.6,5.7,24.6,21c0,13.4-10.9,20.2-26.3,20.2 C1171.9,197.2,1161.7,188.5,1160.7,173.6z\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    className: \"st0\",\n    d: \"M1224,162c0-19.3,12.4-35,32.2-35c15.7,0,26.1,9,28.4,23.2h-10.6c-1.5-9-7.8-14.5-17.9-14.5 c-14.2,0-21.5,11.7-21.5,26.4c0,14.7,7.3,26.3,21.5,26.3c10.8,0,17.2-6.2,18.2-16.5h10.3c-1.4,16-11.8,25.2-28.4,25.2 C1236.3,197,1224,181.3,1224,162z\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    className: \"st0\",\n    d: \"M1290.8,162c0-19.3,12.6-35,31.5-35c20,0,30.6,15.4,30.6,37.5h-51.5c0.8,13.5,8.1,23.8,21.5,23.8 c9.7,0,16.1-4.6,18.4-13.6h10.2c-3.1,14.3-13.5,22.4-28.6,22.4C1302.6,197,1290.8,181.3,1290.8,162z M1301.7,156.6h40 c-0.6-13.3-7.5-21.4-19.4-21.4C1310,135.3,1303.3,144.5,1301.7,156.6z\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    className: \"st0\",\n    d: \"M1373.6,137.4h0.3c4.8-6.3,11.5-10.3,21.1-10.3c13.9,0,22.4,7.6,22.4,21.4v46.7h-10.4v-45.8 c0-8.6-5.7-13.5-15.1-13.5c-10.6,0-18.3,7.5-18.3,18.4v40.9h-10.4v-66.5h10.4V137.4z\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    className: \"st0\",\n    d: \"M1425.6,128.7h9.7v-21h10.4v21h12.9v8.5h-12.9v43.2c0,4.6,2.4,6.2,6.7,6.2c2.1,0,4.4-0.5,5.5-0.9h0.4v9 c-2.4,0.5-5.3,0.9-8.4,0.9c-8.5,0-14.7-3.5-14.7-12.9v-45.6h-9.7V128.7z\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    className: \"st0\",\n    d: \"M1479.7,139.8h0.3c4-6.4,10.9-11.8,19.8-11.8c1.9,0,3,0.3,4.2,0.8v10h-0.4c-1.5-0.5-2.6-0.6-4.6-0.6 c-10.3,0-19.3,7.7-19.3,20.2v36.9h-10.4v-66.5h10.4V139.8z\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    className: \"st0\",\n    d: \"M1555.8,195.2v-9.1h-0.3c-4.8,6.4-10.4,10.7-20.1,10.7c-13.6,0-22.4-8.2-22.4-22v-46.1h10.4v45.8 c0,8.6,5.5,13.6,14.9,13.6c10.6,0,17.4-8,17.4-18.5v-40.9h10.4v66.5H1555.8z\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    className: \"st0\",\n    d: \"M1580.4,128.7h10.4v9.5h0.3c4.1-6.4,11.2-11.1,19.6-11.1c8.1,0,14.5,4.1,17.4,11.8h0.3 c4.2-7.6,12.2-11.8,20.3-11.8c11.8,0,20.2,7.6,20.2,21.4v46.7h-10.4V149c0-8.2-5.5-13.1-12.2-13.1c-8.6,0-16.3,7.5-16.3,17.9v41.4 h-10.4V149c0-8.2-4.6-13.1-11.5-13.1c-8.1,0-17.1,7.5-17.1,17.9v41.4h-10.4V128.7z\"\n  }))), _polygon || (_polygon = /*#__PURE__*/React.createElement(\"polygon\", {\n    className: \"st3\",\n    points: \"88.5,0 171.4,143.5 254.2,0 \"\n  })), _polygon2 || (_polygon2 = /*#__PURE__*/React.createElement(\"polygon\", {\n    className: \"st3\",\n    points: \"0,146.8 165.7,146.8 82.9,3.3 \"\n  })), _polygon3 || (_polygon3 = /*#__PURE__*/React.createElement(\"polygon\", {\n    className: \"st1\",\n    points: \"0,153.3 82.9,296.8 165.7,153.3 \"\n  })), _polygon4 || (_polygon4 = /*#__PURE__*/React.createElement(\"polygon\", {\n    className: \"st1\",\n    points: \"88.5,300.1 254.2,300.1 171.4,156.5 \"\n  })), _polygon5 || (_polygon5 = /*#__PURE__*/React.createElement(\"polygon\", {\n    className: \"st2\",\n    points: \"177,153.3 259.9,296.8 342.7,153.3 \"\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgNccnLogo);\nexport default __webpack_public_path__ + \"static/media/NCCN_Logo.f48faf552e90b5c577d5a2c8c5c7b93b.svg\";\nexport { ForwardRef as ReactComponent };","var _style, _g;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgTrianglesDetail(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: \"2400px\",\n    height: \"1148px\",\n    id: \"Layer_1\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    xmlnsXlink: \"http://www.w3.org/1999/xlink\",\n    x: \"0px\",\n    y: \"0px\",\n    viewBox: \"0 0 600 287\",\n    style: {\n      backgroundColor: \"rgba(0,0,0,0.2)\"\n    },\n    xmlSpace: \"preserve\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _style || (_style = /*#__PURE__*/React.createElement(\"style\", {\n    type: \"text/css\"\n  }, \"\\r\\n\\t.yellow{fill:#FFDE1B;stroke-width:2px;stroke:#fff}\\r\\n\\t.red{fill:#EF492F;stroke-width:2px;stroke:#fff}\\r\\n\\t.black{fill:#231F20;stroke-width:2px;stroke:#fff}\\r\\n\\t.green{fill:rgb(0, 164, 154);stroke-width:2px;stroke:#fff}\\r\\n\\t.transparent{fill:none;stroke-width:3px;stroke:#fff}\\r\\n\\t.overlay{fill:rgb(0, 164, 154);stroke:rgb(0, 164, 154);stroke-width:0px}\\r\\n\")), _g || (_g = /*#__PURE__*/React.createElement(\"g\", {\n    transform: \"translate(-30 0) scale(0.5 0.5)\"\n  }, /*#__PURE__*/React.createElement(\"g\", {\n    id: \"bottom-left\"\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    className: \"transparent\",\n    d: \"M 83.9,-145.2 L -83.9,-145.2 L -167,0 L -83.9,145.2 L 83.9,145.2 L 167,0 L 0,0 L 83.9,-145.2 L -83.9,-145.2\",\n    transform: \"translate(200 300)\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    className: \"transparent\",\n    d: \"M 0,0 168.2,0 L 252 146\",\n    transform: \"translate(200 300)\"\n  }), /*#__PURE__*/React.createElement(\"polygon\", {\n    className: \"yellow\",\n    points: \"-82.9,144.5 0,1 82.9,144.5\",\n    transform: \"translate(200 300)\"\n  }), /*#__PURE__*/React.createElement(\"polygon\", {\n    className: \"red\",\n    points: \"-82.9,144.5 0,1 82.9,144.5\",\n    transform: \"translate(200 300) rotate(-60 0 0)\"\n  }), /*#__PURE__*/React.createElement(\"polygon\", {\n    className: \"black\",\n    points: \"-82.9,144.5 0,1 82.9,144.5\",\n    transform: \"translate(200 300) rotate(-180 0 0)\"\n  }), /*#__PURE__*/React.createElement(\"polygon\", {\n    className: \"black\",\n    points: \"-82.9,144.5 0,1 82.9,144.5\",\n    transform: \"translate(200 300) rotate(-240 0 0)\"\n  }), /*#__PURE__*/React.createElement(\"polygon\", {\n    className: \"yellow\",\n    points: \"-82.9,144.5 0,1 82.9,144.5\",\n    transform: \"translate(200 300) rotate(-300 0 0)\"\n  })), /*#__PURE__*/React.createElement(\"g\", {\n    id: \"top-right\",\n    transform: \"translate(251 -145.5)\"\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    className: \"transparent\",\n    d: \"M 83.9,-145.2 L -83.9,-145.2 L -167,0 L -83.9,145.2 L 83.9,145.2 L 167,0 L 0,0 L 83.9,-145.2 L -83.9,-145.2\",\n    transform: \"translate(200 300)\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    className: \"transparent\",\n    d: \"M 0,0 168.2,0 L 252 146\",\n    transform: \"translate(200 300)\"\n  }), /*#__PURE__*/React.createElement(\"polygon\", {\n    className: \"yellow\",\n    points: \"-82.9,144.5 0,1 82.9,144.5\",\n    transform: \"translate(200 300)\"\n  }), /*#__PURE__*/React.createElement(\"polygon\", {\n    className: \"red\",\n    points: \"-82.9,144.5 0,1 82.9,144.5\",\n    transform: \"translate(200 300) rotate(-60 0 0)\"\n  }), /*#__PURE__*/React.createElement(\"polygon\", {\n    className: \"black\",\n    points: \"-82.9,144.5 0,1 82.9,144.5\",\n    transform: \"translate(200 300) rotate(-180 0 0)\"\n  }), /*#__PURE__*/React.createElement(\"polygon\", {\n    className: \"black\",\n    points: \"-82.9,144.5 0,1 82.9,144.5\",\n    transform: \"translate(200 300) rotate(-240 0 0)\"\n  }), /*#__PURE__*/React.createElement(\"polygon\", {\n    className: \"yellow\",\n    points: \"-82.9,144.5 0,1 82.9,144.5\",\n    transform: \"translate(200 300) rotate(-300 0 0)\"\n  })), /*#__PURE__*/React.createElement(\"g\", {\n    id: \"bottom-left\",\n    transform: \"translate(167 290)\"\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    className: \"transparent\",\n    d: \"M 83.9,-145.2 L -83.9,-145.2 L -167,0 L -83.9,145.2 L 83.9,145.2 L 167,0 L 0,0 L 83.9,-145.2 L -83.9,-145.2\",\n    transform: \"translate(200 300)\"\n  }), /*#__PURE__*/React.createElement(\"polygon\", {\n    className: \"yellow\",\n    points: \"-82.9,144.5 0,1 82.9,144.5\",\n    transform: \"translate(200 300)\"\n  }), /*#__PURE__*/React.createElement(\"polygon\", {\n    className: \"red\",\n    points: \"-82.9,144.5 0,1 82.9,144.5\",\n    transform: \"translate(200 300) rotate(-60 0 0)\"\n  }), /*#__PURE__*/React.createElement(\"polygon\", {\n    className: \"black\",\n    points: \"-82.9,144.5 0,1 82.9,144.5\",\n    transform: \"translate(200 300) rotate(-180 0 0)\"\n  }), /*#__PURE__*/React.createElement(\"polygon\", {\n    className: \"black\",\n    points: \"-82.9,144.5 0,1 82.9,144.5\",\n    transform: \"translate(200 300) rotate(-240 0 0)\"\n  }), /*#__PURE__*/React.createElement(\"polygon\", {\n    className: \"yellow\",\n    points: \"-82.9,144.5 0,1 82.9,144.5\",\n    transform: \"translate(200 300) rotate(-300 0 0)\"\n  })), /*#__PURE__*/React.createElement(\"g\", {\n    id: \"bottom-right\",\n    transform: \"translate(418 145.5)\"\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    className: \"transparent\",\n    d: \"M 83.9,-145.2 L -83.9,-145.2 L -167,0 L -83.9,145.2 L 83.9,145.2 L 167,0 L 0,0 L 83.9,-145.2 L -83.9,-145.2\",\n    transform: \"translate(200 300)\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    className: \"transparent\",\n    d: \"M 0,0 168.2,0 L 252 146\",\n    transform: \"translate(200 300)\"\n  }), /*#__PURE__*/React.createElement(\"polygon\", {\n    className: \"yellow\",\n    points: \"-82.9,144.5 0,1 82.9,144.5\",\n    transform: \"translate(200 300)\"\n  }), /*#__PURE__*/React.createElement(\"polygon\", {\n    className: \"red\",\n    points: \"-82.9,144.5 0,1 82.9,144.5\",\n    transform: \"translate(200 300) rotate(-60 0 0)\"\n  }), /*#__PURE__*/React.createElement(\"polygon\", {\n    className: \"black\",\n    points: \"-82.9,144.5 0,1 82.9,144.5\",\n    transform: \"translate(200 300) rotate(-180 0 0)\"\n  }), /*#__PURE__*/React.createElement(\"polygon\", {\n    className: \"black\",\n    points: \"-82.9,144.5 0,1 82.9,144.5\",\n    transform: \"translate(200 300) rotate(-240 0 0)\"\n  }), /*#__PURE__*/React.createElement(\"polygon\", {\n    className: \"yellow\",\n    points: \"-82.9,144.5 0,1 82.9,144.5\",\n    transform: \"translate(200 300) rotate(-300 0 0)\"\n  })))));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgTrianglesDetail);\nexport default __webpack_public_path__ + \"static/media/Triangles_detail.bccfe19a81e4157654bfd440d8eec609.svg\";\nexport { ForwardRef as ReactComponent };","export function hexToRGB(hex: string, alpha: number) {\r\n  const r = parseInt(hex.slice(1, 3), 16),\r\n    g = parseInt(hex.slice(3, 5), 16),\r\n    b = parseInt(hex.slice(5, 7), 16);\r\n\r\n  return \"rgba(\" + r + \", \" + g + \", \" + b + \", \" + alpha + \")\";\r\n}\r\n\r\nexport const NCCN_GREEN = \"rgb(0, 164, 154)\";\r\n\r\nexport const BLACK = \"#231F20\";\r\n","import {\r\n  ScatterChart,\r\n  Scatter,\r\n  Cell,\r\n  XAxis,\r\n  YAxis,\r\n  ZAxis,\r\n  CartesianGrid,\r\n  Tooltip,\r\n} from \"recharts\";\r\nimport { DVRiskFile } from \"../../../types/dataverse/DVRiskFile\";\r\nimport {\r\n  SCENARIOS,\r\n  SCENARIO_PARAMS,\r\n  getScenarioParameter,\r\n} from \"../../../functions/scenarios\";\r\nimport { hexToRGB } from \"../../../functions/colors\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { ContentType } from \"recharts/types/component/Tooltip\";\r\nimport {\r\n  NameType,\r\n  ValueType,\r\n} from \"recharts/types/component/DefaultTooltipContent\";\r\n\r\nexport default function ScenarioMatrixChart({\r\n  riskFile,\r\n  mrs,\r\n  fontSize = 12,\r\n  radius = 150,\r\n  width = 300,\r\n  height = 270,\r\n  CustomTooltip,\r\n}: {\r\n  riskFile: DVRiskFile;\r\n  mrs: SCENARIOS;\r\n  fontSize?: number;\r\n  radius?: number;\r\n  width?: number;\r\n  height?: number;\r\n  CustomTooltip?: ContentType<ValueType, NameType> | null;\r\n}) {\r\n  const { t } = useTranslation();\r\n\r\n  const data = [SCENARIOS.CONSIDERABLE, SCENARIOS.MAJOR, SCENARIOS.EXTREME].map(\r\n    (s) => ({\r\n      id: s,\r\n      name: s,\r\n      color: SCENARIO_PARAMS[s].color,\r\n      x: getScenarioParameter(riskFile, \"TP\", s),\r\n      y: getScenarioParameter(riskFile, \"TI\", s),\r\n      z: 1,\r\n    })\r\n  );\r\n\r\n  return (\r\n    <ScatterChart\r\n      id=\"scenario-matrix\"\r\n      width={width}\r\n      height={height}\r\n      margin={{\r\n        top: 30,\r\n        right: 15,\r\n        bottom: 2 * fontSize,\r\n        left: 2 * (fontSize - 12),\r\n      }}\r\n      style={{\r\n        float: \"right\",\r\n        overflow: \"hidden\",\r\n        // backgroundColor: \"rgba(0, 0, 0, 0.2\",\r\n      }}\r\n    >\r\n      <defs>\r\n        <linearGradient id=\"colorUv\" x1=\"0\" y1=\"1\" x2=\"1\" y2=\"0\">\r\n          <stop offset=\"15%\" stopColor=\"#69B34C\" stopOpacity={0.5} />\r\n          <stop offset=\"50%\" stopColor=\"#FAB733\" stopOpacity={0.5} />\r\n          <stop offset=\"95%\" stopColor=\"#FF0D0D\" stopOpacity={0.5} />\r\n        </linearGradient>\r\n      </defs>\r\n      <CartesianGrid fill=\"url(#colorUv)\" />\r\n      <YAxis\r\n        type=\"number\"\r\n        dataKey=\"x\"\r\n        domain={[0, 5.5]}\r\n        ticks={[1, 2, 3, 4, 5]}\r\n        fontSize={fontSize}\r\n        // tickFormatter={(v: number) => `${v * 100}%`}\r\n        name=\"probability\"\r\n        unit=\"\"\r\n        label={{\r\n          value: t(\"probability\"),\r\n          angle: -90,\r\n          position: \"insideLeft\",\r\n          offset: (30 * (20 - fontSize)) / 8,\r\n          fontSize,\r\n        }}\r\n      />\r\n      <XAxis\r\n        type=\"number\"\r\n        dataKey=\"y\"\r\n        scale=\"linear\"\r\n        domain={[0, 5.5]}\r\n        ticks={[1, 2, 3, 4, 5]}\r\n        fontSize={fontSize}\r\n        // tickFormatter={(v: number) => String(Math.round(Math.log10(v)) - 7)}\r\n        name=\"impact\"\r\n        unit=\"\"\r\n        label={{\r\n          value: t(\"impact\"),\r\n          position: \"insideBottom\",\r\n          offset: -width / 30,\r\n          fontSize,\r\n        }}\r\n      />\r\n      <ZAxis dataKey=\"z\" type=\"number\" range={[0, radius]} />\r\n      {CustomTooltip && (\r\n        <Tooltip cursor={{ strokeDasharray: \"3 3\" }} content={CustomTooltip} />\r\n      )}\r\n      <Scatter name=\"BNRA Risk Matrix\" data={data}>\r\n        {data.map((d) => (\r\n          <Cell\r\n            key={d.name}\r\n            fill={d.name === mrs ? d.color : hexToRGB(d.color, 0.3)}\r\n            stroke={d.name === mrs ? \"#888\" : \"#aaa\"}\r\n            strokeWidth={2}\r\n            style={{ cursor: \"pointer\" }}\r\n            // onClick={(e) => navigate(`/reporting/${d.id}`)}\r\n          />\r\n        ))}\r\n      </Scatter>\r\n    </ScatterChart>\r\n  );\r\n}\r\n","export const colors: { [key: string]: string } = {\r\n  Cyber: \"#7D5C65\",\r\n  EcoTech: \"#A69658\",\r\n  \"Emerging Risk\": \"#E5BEED\",\r\n  Health: \"#74b9ff\",\r\n  \"Man-made\": \"#ff7675\",\r\n  Nature: \"#7EA16B\",\r\n  Transversal: \"#636e72\",\r\n};\r\n\r\nexport default function getCategoryColor(category: string) {\r\n  if (colors[category]) return colors[category];\r\n\r\n  return \"rgb(0, 164, 154)\";\r\n}\r\n","export default function round(n?: number, digits: number = 2) {\r\n  if (!n) return \"0\";\r\n\r\n  const m = Math.pow(10, digits);\r\n\r\n  return `${Math.round(m * n) / m}`.replace(\".\", \",\");\r\n}\r\n","import { Layer, Rectangle, ResponsiveContainer, Sankey } from \"recharts\";\r\nimport getCategoryColor from \"../../../functions/getCategoryColor\";\r\nimport { DVRiskFile } from \"../../../types/dataverse/DVRiskFile\";\r\nimport { SCENARIOS, getScenarioParameter } from \"../../../functions/scenarios\";\r\nimport round from \"../../../functions/roundNumberString\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { Cascades, getCausesWithDP } from \"../../../functions/cascades\";\r\nimport { JSXElementConstructor } from \"react\";\r\n\r\nconst baseY = 50;\r\n\r\nconst PSankeyNode = ({\r\n  x,\r\n  y,\r\n  width,\r\n  height,\r\n  index,\r\n  payload,\r\n  totalProbability,\r\n  totalNodes,\r\n  fontSize,\r\n  CustomTooltip,\r\n  onClick,\r\n  onNavigate,\r\n}: // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\nany) => {\r\n  const { t } = useTranslation();\r\n\r\n  if (payload.depth > 0) {\r\n    return (\r\n      <Layer\r\n        className=\"total-probability\"\r\n        key={`CustomNode${index}`}\r\n        height=\"50px\"\r\n      >\r\n        <Rectangle\r\n          x={x}\r\n          y={baseY}\r\n          width={width}\r\n          height={totalNodes <= 2 ? 600 - 2 * baseY : height}\r\n          fill={getCategoryColor(payload.category)}\r\n          fillOpacity=\"1\"\r\n        />\r\n        <text\r\n          textAnchor=\"middle\"\r\n          x={-y - height / 2 - 18}\r\n          y={x - 15}\r\n          fontSize={fontSize || \"16\"}\r\n          stroke=\"#333\"\r\n          transform=\"rotate(270)\"\r\n        >\r\n          {`${t(\"Total Probability\")}:  ${round(totalProbability, 2)} / 5`}\r\n        </text>\r\n      </Layer>\r\n    );\r\n  } else {\r\n    return (\r\n      <Layer className=\"probability-cause\" key={`CustomNode${index}`}>\r\n        <Rectangle\r\n          x={x}\r\n          y={totalNodes <= 2 ? baseY : y}\r\n          width={width}\r\n          height={totalNodes <= 2 ? 600 - 2 * baseY : height}\r\n          fill={getCategoryColor(payload.category)}\r\n          fillOpacity=\"1\"\r\n          style={{ cursor: payload.id && \"pointer\" }}\r\n          onClick={() => {\r\n            if (!payload.id) return;\r\n\r\n            if (onClick) return onClick(payload.id);\r\n\r\n            if (onNavigate) onNavigate(payload.id);\r\n          }}\r\n        />\r\n        {CustomTooltip ? (\r\n          <CustomTooltip\r\n            x={x}\r\n            y={y}\r\n            height={height}\r\n            payload={payload}\r\n            totalProbability={totalProbability}\r\n            fontSize={fontSize}\r\n            onClick={onClick}\r\n          />\r\n        ) : (\r\n          <text\r\n            textAnchor=\"start\"\r\n            x={x + 15}\r\n            y={y + height / 2}\r\n            fontSize={fontSize - 2 || \"14\"}\r\n            stroke=\"#333\"\r\n            cursor=\"pointer\"\r\n          >\r\n            {t(payload.name)}\r\n          </text>\r\n        )}\r\n      </Layer>\r\n    );\r\n  }\r\n};\r\n\r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\nconst PSankeyLink = (props: any) => {\r\n  const {\r\n    targetRelativeY,\r\n    sourceX,\r\n    sourceY,\r\n    sourceControlX,\r\n    targetX,\r\n    targetY,\r\n    targetControlX,\r\n    linkWidth,\r\n    totalNodes,\r\n  } = props;\r\n\r\n  const shiftedTargetY =\r\n    totalNodes <= 2\r\n      ? sourceY\r\n      : targetRelativeY + targetY + (baseY - (targetY - linkWidth / 2));\r\n\r\n  return (\r\n    <path\r\n      d={`\r\n        M${sourceX},${sourceY}\r\n        C${sourceControlX},${sourceY} ${targetControlX},${shiftedTargetY} ${targetX},${shiftedTargetY}\r\n      `}\r\n      stroke=\"rgb(102,200,194)\"\r\n      fill=\"none\"\r\n      strokeWidth={totalNodes <= 2 ? 600 - 2 * baseY : linkWidth}\r\n      strokeOpacity=\"0.2\"\r\n      // {...filterProps(others)}\r\n    />\r\n  );\r\n};\r\n\r\nexport default function ProbabilitySankyChart({\r\n  riskFile = null,\r\n  cascades = null,\r\n  maxCauses = null,\r\n  minCausePortion = null,\r\n  shownCausePortion = null,\r\n  scenario,\r\n  debug = false,\r\n  width = \"100%\",\r\n  height = \"100%\",\r\n  CustomTooltip,\r\n  onClick = null,\r\n  onNavigate,\r\n}: {\r\n  riskFile?: DVRiskFile | null;\r\n  cascades?: Cascades | null;\r\n  maxCauses?: number | null;\r\n  minCausePortion?: number | null;\r\n  shownCausePortion?: number | null;\r\n  scenario: SCENARIOS;\r\n  debug?: boolean;\r\n  manmade?: boolean;\r\n  width?: number | string;\r\n  height?: number | string;\r\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n  CustomTooltip?: JSXElementConstructor<any>;\r\n  onClick?: ((id: string) => void) | null;\r\n  onNavigate?: (id: string) => void;\r\n}) {\r\n  if (!riskFile || !cascades) return null;\r\n\r\n  const causes = getCausesWithDP(riskFile, cascades, scenario);\r\n\r\n  let minP = 0;\r\n\r\n  if (maxCauses !== null) {\r\n    minP =\r\n      maxCauses === null || causes.length <= maxCauses\r\n        ? -1\r\n        : causes.sort((a, b) => b.p - a.p)[\r\n            Math.min(maxCauses - 1, causes.length - 1)\r\n          ].p;\r\n  } else if (minCausePortion !== null) {\r\n    const Ptot = causes.reduce((tot, c) => tot + c.p, 0.000000001);\r\n    minP = minCausePortion * Ptot;\r\n  } else if (shownCausePortion !== null) {\r\n    const Ptot = causes.reduce((tot, c) => tot + c.p, 0.000000001);\r\n\r\n    let cumulP = 0;\r\n    for (const c of causes.sort((a, b) => b.p - a.p)) {\r\n      cumulP += c.p / Ptot;\r\n\r\n      if (cumulP >= shownCausePortion) {\r\n        minP = c.p;\r\n        break;\r\n      }\r\n    }\r\n  }\r\n\r\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n  const nodes: any[] = [\r\n    { name: `risk.${riskFile.cr4de_hazard_id}.name` },\r\n    ...causes.filter((c) => c.p >= minP),\r\n  ];\r\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n  const otherCauses = causes.filter((c: any) => c.p < minP);\r\n\r\n  if (minP >= 0 && otherCauses.length > 0) {\r\n    nodes.push({\r\n      name: \"Other\",\r\n      hidden: otherCauses,\r\n    });\r\n  }\r\n\r\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n  const links: any[] = causes\r\n    .filter((e) => e.p >= minP)\r\n    .map((e, i: number) => ({\r\n      source: i + 1,\r\n      target: 0,\r\n      value: Math.max(0.000000001, e.p),\r\n    }));\r\n  if (minP > 0 && otherCauses.length > 0)\r\n    links.push({\r\n      source: nodes.length - 1,\r\n      target: 0,\r\n      value: causes\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        .filter((e: any) => e.p < minP)\r\n        .reduce((tot, e) => tot + e.p, 0.000000001),\r\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n      hidden: causes.filter((e: any) => e.p < minP),\r\n    });\r\n\r\n  const data = {\r\n    nodes,\r\n    links,\r\n  };\r\n\r\n  if (typeof width === \"string\" || typeof height === \"string\") {\r\n    return (\r\n      <ResponsiveContainer width={width} height={height}>\r\n        <Sankey\r\n          data={data}\r\n          node={\r\n            <PSankeyNode\r\n              onClick={onClick}\r\n              totalProbability={getScenarioParameter(riskFile, \"TP\", scenario)}\r\n              totalNodes={data.nodes.length}\r\n              showComponents={debug}\r\n              scenarioSuffix={scenario}\r\n              CustomTooltip={CustomTooltip}\r\n              onNavigate={onNavigate}\r\n            />\r\n          }\r\n          link={<PSankeyLink totalNodes={data.nodes.length} />}\r\n          nodePadding={\r\n            data.nodes.length > 2 ? 100 / (data.nodes.length - 2) : 0\r\n          }\r\n          iterations={0}\r\n        ></Sankey>\r\n      </ResponsiveContainer>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <Sankey\r\n      width={width as number}\r\n      height={height as number}\r\n      data={data}\r\n      node={\r\n        <PSankeyNode\r\n          onClick={onClick}\r\n          totalProbability={getScenarioParameter(riskFile, \"TP\", scenario)}\r\n          totalNodes={data.nodes.length}\r\n          showComponents={debug}\r\n          scenarioSuffix={scenario}\r\n          fontSize={22}\r\n          CustomTooltip={CustomTooltip}\r\n          onNavigate={onNavigate}\r\n        />\r\n      }\r\n      link={<PSankeyLink totalNodes={data.nodes.length} />}\r\n      nodePadding={data.nodes.length > 2 ? 100 / (data.nodes.length - 2) : 0}\r\n      iterations={0}\r\n    ></Sankey>\r\n  );\r\n}\r\n","import { Layer, Rectangle, ResponsiveContainer, Sankey } from \"recharts\";\r\nimport getCategoryColor from \"../../../functions/getCategoryColor\";\r\nimport { DVRiskFile } from \"../../../types/dataverse/DVRiskFile\";\r\nimport {\r\n  SCENARIOS,\r\n  getScenarioParameter,\r\n  getScenarioSuffix,\r\n} from \"../../../functions/scenarios\";\r\nimport round from \"../../../functions/roundNumberString\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { Cascades, getEffectsWithDI } from \"../../../functions/cascades\";\r\nimport { JSXElementConstructor } from \"react\";\r\n\r\nconst baseY = 50;\r\n\r\nconst ISankeyNode = ({\r\n  x,\r\n  y,\r\n  width,\r\n  height,\r\n  index,\r\n  payload,\r\n  totalImpact,\r\n  totalNodes,\r\n  fontSize,\r\n  CustomTooltip,\r\n  onClick,\r\n  onNavigate,\r\n}: // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\nany) => {\r\n  const { t } = useTranslation();\r\n\r\n  if (payload.depth <= 0) {\r\n    return (\r\n      <Layer className=\"total-impact\" key={`CustomNode${index}`}>\r\n        <Rectangle\r\n          x={x}\r\n          y={baseY}\r\n          width={width}\r\n          height={totalNodes <= 2 ? 600 - 2 * baseY : height}\r\n          fill={getCategoryColor(payload.category)}\r\n          fillOpacity=\"1\"\r\n        />\r\n        <text\r\n          textAnchor=\"middle\"\r\n          x={-y - height / 2 - 18}\r\n          y={x + 30}\r\n          fontSize={fontSize || \"16\"}\r\n          stroke=\"#333\"\r\n          transform=\"rotate(270)\"\r\n        >\r\n          {`${t(\"Total Impact\")}: ${round(totalImpact, 2)} / 5`}\r\n        </text>\r\n      </Layer>\r\n    );\r\n  } else {\r\n    if (payload.value <= 0) return null;\r\n\r\n    return (\r\n      <Layer className=\"impact-effect\" key={`CustomNode${index}`}>\r\n        <Rectangle\r\n          x={x}\r\n          y={totalNodes <= 2 ? baseY : y}\r\n          width={width}\r\n          height={totalNodes <= 2 ? 600 - 2 * baseY : height}\r\n          fill={getCategoryColor(payload.category)}\r\n          fillOpacity=\"1\"\r\n          style={{ cursor: payload.id && \"pointer\" }}\r\n          onClick={() => {\r\n            if (!payload.id) return;\r\n\r\n            if (onClick) return onClick(payload.id);\r\n\r\n            if (onNavigate) onNavigate(payload.id);\r\n          }}\r\n        />\r\n        {CustomTooltip ? (\r\n          <CustomTooltip\r\n            x={x}\r\n            y={y}\r\n            height={height}\r\n            payload={payload}\r\n            totalImpact={totalImpact}\r\n            fontSize={fontSize}\r\n            onClick={onClick}\r\n          />\r\n        ) : (\r\n          <text\r\n            textAnchor=\"end\"\r\n            x={x - 6}\r\n            y={y + height / 2 + 4}\r\n            fontSize={fontSize - 2 || \"14\"}\r\n            stroke=\"#333\"\r\n            cursor=\"pointer\"\r\n          >\r\n            {t(payload.name)}\r\n          </text>\r\n        )}\r\n      </Layer>\r\n    );\r\n  }\r\n};\r\n\r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\nconst ISankeyLink = (props: any) => {\r\n  const {\r\n    sourceRelativeY,\r\n    sourceX,\r\n    sourceY,\r\n    sourceControlX,\r\n    targetX,\r\n    targetY,\r\n    targetControlX,\r\n    linkWidth,\r\n    totalNodes,\r\n  } = props;\r\n\r\n  const shiftedSourceY =\r\n    totalNodes <= 2\r\n      ? targetY\r\n      : sourceRelativeY + sourceY + (baseY - (sourceY - linkWidth / 2));\r\n\r\n  return (\r\n    <path\r\n      d={`\r\n        M${sourceX},${shiftedSourceY}\r\n        C${sourceControlX},${shiftedSourceY} ${targetControlX},${targetY} ${targetX},${targetY}\r\n      `}\r\n      stroke=\"rgb(102,200,194)\"\r\n      fill=\"none\"\r\n      strokeWidth={totalNodes <= 2 ? 600 - 2 * baseY : linkWidth}\r\n      strokeOpacity=\"0.2\"\r\n      // {...filterProps(others)}\r\n    />\r\n  );\r\n};\r\n\r\nexport default function ImpactSankeyChart({\r\n  riskFile = null,\r\n  cascades = null,\r\n  maxEffects = null,\r\n  minEffectPortion = null,\r\n  shownEffectPortion = null,\r\n  scenario,\r\n  debug = false,\r\n  width = \"100%\",\r\n  height = \"100%\",\r\n  CustomTooltip,\r\n  onClick = null,\r\n  onNavigate,\r\n}: {\r\n  riskFile?: DVRiskFile | null;\r\n  cascades?: Cascades | null;\r\n  maxEffects?: number | null;\r\n  minEffectPortion?: number | null;\r\n  shownEffectPortion?: number | null;\r\n  scenario: SCENARIOS;\r\n  debug?: boolean;\r\n  width?: number | string;\r\n  height?: number | string;\r\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n  CustomTooltip?: JSXElementConstructor<any>;\r\n  onClick?: ((id: string) => void) | null;\r\n  onNavigate?: (id: string) => void;\r\n}) {\r\n  const { t } = useTranslation();\r\n  if (!riskFile || !cascades) return null;\r\n\r\n  const scenarioSuffix: string = getScenarioSuffix(scenario);\r\n\r\n  const effects = getEffectsWithDI(riskFile, cascades, scenario);\r\n\r\n  let minI = 0;\r\n\r\n  if (maxEffects !== null) {\r\n    minI =\r\n      maxEffects === null || effects.length < maxEffects\r\n        ? -1\r\n        : effects.sort((a, b) => b.i - a.i)[\r\n            Math.min(maxEffects - 1, effects.length - 1)\r\n          ].i;\r\n  } else if (minEffectPortion !== null) {\r\n    const Itot = effects.reduce((tot, e) => tot + e.i, 0.000000001);\r\n    minI = minEffectPortion * Itot;\r\n  } else if (shownEffectPortion !== null) {\r\n    const Itot = effects.reduce((tot, e) => tot + e.i, 0.000000001);\r\n\r\n    let cumulI = 0;\r\n    for (const e of effects.sort((a, b) => b.i - a.i)) {\r\n      cumulI += e.i / Itot;\r\n\r\n      if (cumulI >= shownEffectPortion) {\r\n        minI = e.i;\r\n        break;\r\n      }\r\n    }\r\n  }\r\n\r\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n  const nodes: any[] = [\r\n    { name: `risk.${riskFile.cr4de_hazard_id}.name` },\r\n    ...effects.filter((c) => c.i >= minI),\r\n  ];\r\n  if (minI >= 0)\r\n    nodes.push({\r\n      name: \"Other\",\r\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n      hidden: effects.filter((e: any) => e.i < minI),\r\n    });\r\n\r\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n  const links: any[] = effects\r\n    .filter((e) => e.i >= minI)\r\n    .map((e, i: number) => ({\r\n      source: 0,\r\n      target: i + 1,\r\n      value: Math.max(0.000000001, e.i),\r\n    }));\r\n  if (minI > 0)\r\n    links.push({\r\n      source: 0,\r\n      target: nodes.length - 1,\r\n      value: effects\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        .filter((e: any) => e.i < minI)\r\n        .reduce((tot, e) => tot + e.i, 0.000000001),\r\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n      hidden: effects.filter((e: any) => e.i < minI),\r\n    });\r\n\r\n  const data = {\r\n    nodes,\r\n    links,\r\n  };\r\n\r\n  if (typeof width === \"string\" || typeof height === \"string\") {\r\n    return (\r\n      <ResponsiveContainer width=\"100%\" height=\"100%\">\r\n        <Sankey\r\n          data={data}\r\n          node={\r\n            <ISankeyNode\r\n              onClick={onClick}\r\n              totalImpact={getScenarioParameter(riskFile, \"TI\", scenario) || 0}\r\n              totalNodes={data.nodes.length}\r\n              showComponents={debug}\r\n              scenarioSuffix={scenarioSuffix}\r\n              CustomTooltip={CustomTooltip}\r\n              onNavigate={onNavigate}\r\n            />\r\n          }\r\n          link={<ISankeyLink totalNodes={data.nodes.length} />}\r\n          nodePadding={\r\n            data.nodes.length > 2 ? 100 / (data.nodes.length - 2) : 0\r\n          }\r\n          iterations={0}\r\n        ></Sankey>\r\n      </ResponsiveContainer>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <Sankey\r\n      width={width as number}\r\n      height={height as number}\r\n      data={data}\r\n      node={\r\n        <ISankeyNode\r\n          onClick={onClick}\r\n          totalImpact={getScenarioParameter(riskFile, \"TI\", scenario) || 0}\r\n          totalNodes={data.nodes.length}\r\n          showComponents={debug}\r\n          scenarioSuffix={scenarioSuffix}\r\n          fontSize={22}\r\n          CustomTooltip={CustomTooltip}\r\n          onNavigate={onNavigate}\r\n        />\r\n      }\r\n      link={<ISankeyLink totalNodes={data.nodes.length} />}\r\n      nodePadding={data.nodes.length > 2 ? 100 / (data.nodes.length - 2) : 0}\r\n      iterations={0}\r\n    ></Sankey>\r\n  );\r\n}\r\n","import {\r\n  BarChart,\r\n  Bar,\r\n  XAxis,\r\n  YAxis,\r\n  CartesianGrid,\r\n  Tooltip,\r\n  ResponsiveContainer,\r\n} from \"recharts\";\r\nimport { DVRiskFile } from \"../../../types/dataverse/DVRiskFile\";\r\nimport { getScenarioParameter, SCENARIOS } from \"../../../functions/scenarios\";\r\nimport {\r\n  NameType,\r\n  ValueType,\r\n} from \"recharts/types/component/DefaultTooltipContent\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport {\r\n  getCategoryImpactRescaled,\r\n  getDamageIndicatorToCategoryImpactRatio,\r\n} from \"../../../functions/CategoryImpact\";\r\nimport { ContentType } from \"recharts/types/component/Tooltip\";\r\n\r\nexport default function ImpactBarChart({\r\n  riskFile,\r\n  scenario,\r\n  width,\r\n  height,\r\n  CustomTooltip,\r\n}: {\r\n  riskFile: DVRiskFile | null;\r\n  scenario: SCENARIOS;\r\n  width?: number;\r\n  height?: number;\r\n  CustomTooltip?: ContentType<ValueType, NameType>;\r\n}) {\r\n  const { t } = useTranslation();\r\n  if (!riskFile) return null;\r\n\r\n  const H = getCategoryImpactRescaled(riskFile, \"H\", scenario);\r\n  const S = getCategoryImpactRescaled(riskFile, \"S\", scenario);\r\n  const E = getCategoryImpactRescaled(riskFile, \"E\", scenario);\r\n  const F = getCategoryImpactRescaled(riskFile, \"F\", scenario);\r\n\r\n  const data = [\r\n    {\r\n      name: t(\"Human\"),\r\n      H: H,\r\n      Ha: getDamageIndicatorToCategoryImpactRatio(riskFile, \"Ha\", scenario) * H,\r\n      Hb: getDamageIndicatorToCategoryImpactRatio(riskFile, \"Hb\", scenario) * H,\r\n      Hc: getDamageIndicatorToCategoryImpactRatio(riskFile, \"Hc\", scenario) * H,\r\n      Ha_abs: getScenarioParameter(riskFile, \"TI_Ha_abs\", scenario),\r\n      Hb_abs: getScenarioParameter(riskFile, \"TI_Hb_abs\", scenario),\r\n      Hc_abs: getScenarioParameter(riskFile, \"TI_Hc_abs\", scenario),\r\n    },\r\n    {\r\n      name: t(\"Societal\"),\r\n      S: S,\r\n      Sa: getDamageIndicatorToCategoryImpactRatio(riskFile, \"Sa\", scenario) * S,\r\n      Sb: getDamageIndicatorToCategoryImpactRatio(riskFile, \"Sb\", scenario) * S,\r\n      Sc: getDamageIndicatorToCategoryImpactRatio(riskFile, \"Sc\", scenario) * S,\r\n      Sd: getDamageIndicatorToCategoryImpactRatio(riskFile, \"Sd\", scenario) * S,\r\n      Sa_abs: getScenarioParameter(riskFile, \"TI_Sa_abs\", scenario),\r\n      Sb_abs: getScenarioParameter(riskFile, \"TI_Sb_abs\", scenario),\r\n      Sc_abs: getScenarioParameter(riskFile, \"TI_Sc_abs\", scenario),\r\n      Sd_abs: getScenarioParameter(riskFile, \"TI_Sd_abs\", scenario),\r\n    },\r\n    {\r\n      name: t(\"Environmental\"),\r\n      E: E,\r\n      Ea: getDamageIndicatorToCategoryImpactRatio(riskFile, \"Ea\", scenario) * E,\r\n      Ea_abs: getScenarioParameter(riskFile, \"TI_Ea_abs\", scenario),\r\n    },\r\n    {\r\n      name: t(\"Financial\"),\r\n      F: F,\r\n      Fa: getDamageIndicatorToCategoryImpactRatio(riskFile, \"Fa\", scenario) * F,\r\n      Fb: getDamageIndicatorToCategoryImpactRatio(riskFile, \"Fb\", scenario) * F,\r\n      Fa_abs: getScenarioParameter(riskFile, \"TI_Fa_abs\", scenario),\r\n      Fb_abs: getScenarioParameter(riskFile, \"TI_Fb_abs\", scenario),\r\n    },\r\n  ];\r\n\r\n  if (width && height) {\r\n    return (\r\n      <BarChart\r\n        width={width}\r\n        height={height}\r\n        data={data}\r\n        margin={{\r\n          top: 20,\r\n          bottom: 125,\r\n        }}\r\n      >\r\n        <CartesianGrid strokeDasharray=\"3 3\" />\r\n        <XAxis\r\n          dataKey=\"name\"\r\n          angle={-90}\r\n          dx={-5}\r\n          dy={5}\r\n          interval={0}\r\n          textAnchor=\"end\"\r\n          fontSize={22}\r\n        />\r\n        <YAxis\r\n          domain={[0, 5.5]}\r\n          ticks={[1, 2, 3, 4, 5]}\r\n          width={10}\r\n          fontSize={22}\r\n        />\r\n        {CustomTooltip && <Tooltip content={CustomTooltip} />}\r\n        <Bar dataKey=\"Ha\" stackId=\"a\" fill=\"#de6148\" />\r\n        <Bar dataKey=\"Hb\" stackId=\"a\" fill=\"#f39d87\" />\r\n        <Bar dataKey=\"Hc\" stackId=\"a\" fill=\"#ffd7cc\" />\r\n        {/* <Bar dataKey=\"H\" stackId=\"b\" style={{ display: \"none\" }} /> */}\r\n        <Bar dataKey=\"Sa\" stackId=\"a\" fill=\"#bca632\" />\r\n        <Bar dataKey=\"Sb\" stackId=\"a\" fill=\"#d2ba37\" />\r\n        <Bar dataKey=\"Sc\" stackId=\"a\" fill=\"#e8ce3d\" />\r\n        <Bar dataKey=\"Sd\" stackId=\"a\" fill=\"#ffe342\" />\r\n        {/* <Bar dataKey=\"S\" stackId=\"a\" style={{ display: \"none\" }} label /> */}\r\n        <Bar dataKey=\"Ea\" stackId=\"a\" fill=\"#83af70\" />\r\n        {/* <Bar dataKey=\"E\" stackId=\"a\" style={{ display: \"none\" }} label /> */}\r\n        <Bar dataKey=\"Fa\" stackId=\"a\" fill=\"#6996b3\" />\r\n        <Bar dataKey=\"Fb\" stackId=\"a\" fill=\"#c1e7ff\" />\r\n        {/* <Bar dataKey=\"F\" stackId=\"a\" style={{ display: \"none\" }} label /> */}\r\n      </BarChart>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <ResponsiveContainer width=\"100%\" height=\"100%\">\r\n      <BarChart\r\n        data={data}\r\n        margin={{\r\n          top: 20,\r\n          bottom: 85,\r\n        }}\r\n      >\r\n        <CartesianGrid strokeDasharray=\"3 3\" />\r\n        <XAxis\r\n          dataKey=\"name\"\r\n          angle={-90}\r\n          dx={-5}\r\n          dy={5}\r\n          interval={0}\r\n          textAnchor=\"end\"\r\n        />\r\n        <YAxis domain={[0, 5.5]} ticks={[1, 2, 3, 4, 5]} width={10} />\r\n        <Tooltip content={CustomTooltip} />\r\n        <Bar dataKey=\"Ha\" stackId=\"a\" fill=\"#de6148\" />\r\n        <Bar dataKey=\"Hb\" stackId=\"a\" fill=\"#f39d87\" />\r\n        <Bar dataKey=\"Hc\" stackId=\"a\" fill=\"#ffd7cc\" />\r\n        {/* <Bar dataKey=\"H\" stackId=\"b\" style={{ display: \"none\" }} /> */}\r\n        <Bar dataKey=\"Sa\" stackId=\"a\" fill=\"#bca632\" />\r\n        <Bar dataKey=\"Sb\" stackId=\"a\" fill=\"#d2ba37\" />\r\n        <Bar dataKey=\"Sc\" stackId=\"a\" fill=\"#e8ce3d\" />\r\n        <Bar dataKey=\"Sd\" stackId=\"a\" fill=\"#ffe342\" />\r\n        {/* <Bar dataKey=\"S\" stackId=\"a\" style={{ display: \"none\" }} label /> */}\r\n        <Bar dataKey=\"Ea\" stackId=\"a\" fill=\"#83af70\" />\r\n        {/* <Bar dataKey=\"E\" stackId=\"a\" style={{ display: \"none\" }} label /> */}\r\n        <Bar dataKey=\"Fa\" stackId=\"a\" fill=\"#6996b3\" />\r\n        <Bar dataKey=\"Fb\" stackId=\"a\" fill=\"#c1e7ff\" />\r\n        {/* <Bar dataKey=\"F\" stackId=\"a\" style={{ display: \"none\" }} label /> */}\r\n      </BarChart>\r\n    </ResponsiveContainer>\r\n  );\r\n}\r\n","import {\r\n  XAxis,\r\n  YAxis,\r\n  CartesianGrid,\r\n  Tooltip,\r\n  BarChart,\r\n  Legend,\r\n  Bar,\r\n} from \"recharts\";\r\nimport { DVRiskFile } from \"../../../types/dataverse/DVRiskFile\";\r\nimport {\r\n  SCENARIOS,\r\n  SCENARIO_PARAMS,\r\n  getCascadeParameter,\r\n  getScenarioParameter,\r\n} from \"../../../functions/scenarios\";\r\nimport { JSXElementConstructor, useMemo } from \"react\";\r\nimport round from \"../../../functions/roundNumberString\";\r\nimport { DVRiskCascade } from \"../../../types/dataverse/DVRiskCascade\";\r\nimport { SmallRisk } from \"../../../types/dataverse/DVSmallRisk\";\r\nimport { Cause as Cause2023 } from \"../../../functions/Probability\";\r\nimport { useTranslation } from \"react-i18next\";\r\n\r\ntype Cause2050 = Cause2023 & {\r\n  p_c: number;\r\n  p2050_c: number;\r\n  p_m: number;\r\n  p2050_m: number;\r\n  p_e: number;\r\n  p2050_e: number;\r\n};\r\n\r\nexport default function ClimateChangeChart({\r\n  riskFile,\r\n  causes,\r\n  scenario,\r\n  width = 750,\r\n  height = 450,\r\n  fontSize = \"12pt\",\r\n  xLabelDy = 25,\r\n  CustomTooltip,\r\n}: {\r\n  riskFile: DVRiskFile;\r\n  causes: DVRiskCascade<SmallRisk, unknown>[];\r\n  scenario: SCENARIOS;\r\n  width?: number;\r\n  height?: number;\r\n  fontSize?: string;\r\n  xLabelDy?: number;\r\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n  CustomTooltip?: JSXElementConstructor<any>;\r\n}) {\r\n  const { t } = useTranslation();\r\n\r\n  const data = useMemo(() => {\r\n    const dTPAvg =\r\n      (Math.abs(\r\n        (getScenarioParameter(riskFile, \"TP50\", SCENARIOS.CONSIDERABLE) ||\r\n          0.000001) -\r\n          (getScenarioParameter(riskFile, \"TP\", SCENARIOS.CONSIDERABLE) ||\r\n            0.000001)\r\n      ) +\r\n        Math.abs(\r\n          (getScenarioParameter(riskFile, \"TP50\", SCENARIOS.MAJOR) ||\r\n            0.000001) -\r\n            (getScenarioParameter(riskFile, \"TP\", SCENARIOS.MAJOR) || 0.000001)\r\n        ) +\r\n        Math.abs(\r\n          (getScenarioParameter(riskFile, \"TP50\", SCENARIOS.EXTREME) ||\r\n            0.000001) -\r\n            (getScenarioParameter(riskFile, \"TP\", SCENARIOS.EXTREME) ||\r\n              0.000001)\r\n        )) /\r\n      3;\r\n\r\n    const enhCauses = [\r\n      {\r\n        name: \"No underlying cause\",\r\n        p_c:\r\n          getScenarioParameter(riskFile, \"DP\", SCENARIOS.CONSIDERABLE) ||\r\n          0.000001,\r\n        p2050_c:\r\n          getScenarioParameter(riskFile, \"DP50\", SCENARIOS.CONSIDERABLE) ||\r\n          0.000001,\r\n        p_m: getScenarioParameter(riskFile, \"DP\", SCENARIOS.MAJOR) || 0.000001,\r\n        p2050_m:\r\n          getScenarioParameter(riskFile, \"DP50\", SCENARIOS.MAJOR) || 0.000001,\r\n        p_e:\r\n          getScenarioParameter(riskFile, \"DP\", SCENARIOS.EXTREME) || 0.000001,\r\n        p2050_e:\r\n          getScenarioParameter(riskFile, \"DP50\", SCENARIOS.EXTREME) || 0.000001,\r\n      },\r\n      ...(causes\r\n        .filter(\r\n          (c) => getCascadeParameter(c, SCENARIOS.CONSIDERABLE, \"IP50\") !== 0\r\n        )\r\n        .map((c) => {\r\n          return {\r\n            name: c.cr4de_cause_hazard.cr4de_title,\r\n            p_c:\r\n              getCascadeParameter(c, SCENARIOS.CONSIDERABLE, \"IP\") || 0.000001,\r\n            p2050_c:\r\n              getCascadeParameter(c, SCENARIOS.CONSIDERABLE, \"IP50\") ||\r\n              0.000001,\r\n            p_m: getCascadeParameter(c, SCENARIOS.MAJOR, \"IP\") || 0.000001,\r\n            p2050_m:\r\n              getCascadeParameter(c, SCENARIOS.MAJOR, \"IP50\") || 0.000001,\r\n            p_e: getCascadeParameter(c, SCENARIOS.EXTREME, \"IP\") || 0.000001,\r\n            p2050_e:\r\n              getCascadeParameter(c, SCENARIOS.EXTREME, \"IP50\") || 0.000001,\r\n          };\r\n        }) || []),\r\n    ]\r\n      .sort(\r\n        (a, b) =>\r\n          (Math.abs(b.p2050_c - b.p_c) +\r\n            Math.abs(b.p2050_m - b.p_m) +\r\n            Math.abs(b.p2050_e - b.p_e)) /\r\n            3 -\r\n          (Math.abs(a.p2050_c - a.p_c) +\r\n            Math.abs(a.p2050_m - a.p_m) +\r\n            Math.abs(a.p2050_e - a.p_e)) /\r\n            3\r\n      )\r\n      .reduce(\r\n        ([cumulCauses, pCumul], c, i) => {\r\n          if (pCumul / dTPAvg > 0.8 && i > 2)\r\n            return [cumulCauses, pCumul] as [Cause2050[], number];\r\n\r\n          return [\r\n            [...cumulCauses, c],\r\n            pCumul +\r\n              (Math.abs(c.p2050_c - c.p_c) +\r\n                Math.abs(c.p2050_m - c.p_m) +\r\n                Math.abs(c.p2050_e - c.p_e)) /\r\n                3,\r\n          ] as [Cause2050[], number];\r\n        },\r\n        [[], 0] as [Cause2050[], number]\r\n      )[0];\r\n\r\n    const tp50_c =\r\n      getScenarioParameter(riskFile, \"TP50\", SCENARIOS.CONSIDERABLE) ||\r\n      0.000001;\r\n    const tp50_m =\r\n      getScenarioParameter(riskFile, \"TP50\", SCENARIOS.MAJOR) || 0.000001;\r\n    const tp50_e =\r\n      getScenarioParameter(riskFile, \"TP50\", SCENARIOS.EXTREME) || 0.000001;\r\n\r\n    const tp_c =\r\n      getScenarioParameter(riskFile, \"TP\", SCENARIOS.CONSIDERABLE) || 0.000001;\r\n    const tp_m =\r\n      getScenarioParameter(riskFile, \"TP\", SCENARIOS.MAJOR) || 0.000001;\r\n    const tp_e =\r\n      getScenarioParameter(riskFile, \"TP\", SCENARIOS.EXTREME) || 0.000001;\r\n\r\n    return [\r\n      {\r\n        name: \"Total probability\",\r\n        P2023_c: tp50_c >= tp_c ? tp_c : tp50_c,\r\n        P2050_c_inc: tp50_c >= tp_c ? tp50_c - tp_c : 0,\r\n        P2050_c_dec: tp50_c >= tp_c ? 0 : tp_c - tp50_c,\r\n        P2023_m: tp50_m >= tp_m ? tp_m : tp50_m,\r\n        P2050_m_inc: tp50_m >= tp_m ? tp50_m - tp_m : 0,\r\n        P2050_m_dec: tp50_m >= tp_m ? 0 : tp_m - tp50_m,\r\n        P2023_e: tp50_e >= tp_e ? tp_e : tp50_e,\r\n        P2050_e_inc: tp50_e >= tp_e ? tp50_e - tp_e : 0,\r\n        P2050_e_dec: tp50_e >= tp_e ? 0 : tp_e - tp50_e,\r\n      },\r\n      ...enhCauses\r\n        // .reduce(\r\n        //   ([cumulCauses, pCumul], c, i) => {\r\n        //     if (pCumul / tp50 > 0.8 && i > 2) return [cumulCauses, pCumul] as [Cause2050[], number];\r\n\r\n        //     return [[...cumulCauses, c], pCumul + c.p2050] as [Cause2050[], number];\r\n        //   },\r\n        //   [[], 0] as [Cause2050[], number]\r\n        // )[0]\r\n        .map((cause) => ({\r\n          name: cause.name,\r\n          P2023_c: cause.p2050_c >= cause.p_c ? cause.p_c : cause.p2050_c,\r\n          P2050_c_inc:\r\n            cause.p2050_c >= cause.p_c ? cause.p2050_c - cause.p_c : 0,\r\n          P2050_c_dec:\r\n            cause.p2050_c >= cause.p_c ? 0 : cause.p_c - cause.p2050_c,\r\n          P2023_m: cause.p2050_m >= cause.p_m ? cause.p_m : cause.p2050_m,\r\n          P2050_m_inc:\r\n            cause.p2050_m >= cause.p_m ? cause.p2050_m - cause.p_m : 0,\r\n          P2050_m_dec:\r\n            cause.p2050_m >= cause.p_m ? 0 : cause.p_m - cause.p2050_m,\r\n          P2023_e: cause.p2050_e >= cause.p_e ? cause.p_e : cause.p2050_e,\r\n          P2050_e_inc:\r\n            cause.p2050_e >= cause.p_e ? cause.p2050_e - cause.p_e : 0,\r\n          P2050_e_dec:\r\n            cause.p2050_e >= cause.p_e ? 0 : cause.p_e - cause.p2050_e,\r\n        })),\r\n    ];\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [riskFile, causes, scenario]);\r\n\r\n  return (\r\n    <BarChart\r\n      width={width}\r\n      height={height}\r\n      data={data}\r\n      margin={{\r\n        top: 20,\r\n        right: 30,\r\n        left: 30,\r\n        bottom: 30,\r\n      }}\r\n      layout=\"vertical\"\r\n      barCategoryGap=\"15%\"\r\n    >\r\n      <CartesianGrid strokeDasharray=\"3 3\" />\r\n      <XAxis\r\n        domain={[0, 5.5]}\r\n        ticks={[1, 2, 3, 4, 5]}\r\n        type=\"number\"\r\n        // tickFormatter={(value) => getPercentageProbability(value)}\r\n        label={{\r\n          value: t(\"Probability\"),\r\n          dy: xLabelDy,\r\n          fontSize,\r\n        }}\r\n        style={{\r\n          fontSize,\r\n        }}\r\n      />\r\n      <YAxis\r\n        dataKey=\"name\"\r\n        type=\"category\"\r\n        width={150}\r\n        style={{\r\n          fontSize,\r\n        }}\r\n      />\r\n      {CustomTooltip && (\r\n        <Tooltip\r\n          content={<CustomTooltip />}\r\n          formatter={(value) => `${round(value as number)} / 5`}\r\n        />\r\n      )}\r\n      <Legend\r\n        align=\"center\"\r\n        verticalAlign=\"bottom\"\r\n        wrapperStyle={{ paddingTop: 30 }}\r\n      />\r\n      <Bar\r\n        name=\"Considerable scenario\"\r\n        dataKey=\"P2023_c\"\r\n        stackId=\"c\"\r\n        fill={SCENARIO_PARAMS.considerable.color}\r\n      />\r\n      <Bar\r\n        name=\"Major scenario\"\r\n        dataKey=\"P2023_m\"\r\n        stackId=\"m\"\r\n        fill={SCENARIO_PARAMS.major.color}\r\n      />\r\n      <Bar\r\n        name=\"Extreme scenario\"\r\n        dataKey=\"P2023_e\"\r\n        stackId=\"e\"\r\n        fill={SCENARIO_PARAMS.extreme.color}\r\n      />\r\n      <Bar\r\n        name=\"Increased probability in 2050\"\r\n        dataKey=\"P2050_c_inc\"\r\n        stackId=\"c\"\r\n        fill=\"red\"\r\n        barSize={1}\r\n      />\r\n      <Bar legendType=\"none\" dataKey=\"P2050_m_inc\" stackId=\"m\" fill=\"red\" />\r\n      <Bar legendType=\"none\" dataKey=\"P2050_e_inc\" stackId=\"e\" fill=\"red\" />\r\n      <Bar\r\n        name=\"Decreased probability in 2050\"\r\n        dataKey=\"P2050_c_dec\"\r\n        stackId=\"c\"\r\n        fill=\"green\"\r\n        barSize={1}\r\n        id=\"test\"\r\n      />\r\n      <Bar legendType=\"none\" dataKey=\"P2050_m_dec\" stackId=\"m\" fill=\"green\" />\r\n      <Bar legendType=\"none\" dataKey=\"P2050_e_dec\" stackId=\"e\" fill=\"green\" />\r\n    </BarChart>\r\n  );\r\n}\r\n","import { RiskCalculation } from \"../types/dataverse/DVAnalysisRun\";\r\nimport { DVRiskCascade } from \"../types/dataverse/DVRiskCascade\";\r\nimport {\r\n  DVRiskFile,\r\n  RISKFILE_RESULT_FIELD,\r\n} from \"../types/dataverse/DVRiskFile\";\r\nimport {\r\n  CASCADE_RESULT_FIELD,\r\n  getCascadeParameter,\r\n  getScenarioParameter,\r\n  getScenarioSuffix,\r\n  SCENARIO_SUFFIX,\r\n  SCENARIOS,\r\n} from \"./scenarios\";\r\nimport { SmallRisk } from \"../types/dataverse/DVSmallRisk\";\r\n\r\nexport type Effect = {\r\n  id: string | null;\r\n  name: string;\r\n\r\n  cp: number;\r\n\r\n  ha: number;\r\n  hb: number;\r\n  hc: number;\r\n  sa: number;\r\n  sb: number;\r\n  sc: number;\r\n  sd: number;\r\n  ea: number;\r\n  fa: number;\r\n  fb: number;\r\n  h: number;\r\n  s: number;\r\n  e: number;\r\n  f: number;\r\n  i: number;\r\n  quali?: string | null;\r\n  quali_cause?: string | null;\r\n\r\n  quali_h?: string | null;\r\n  quali_s?: string | null;\r\n  quali_e?: string | null;\r\n  quali_f?: string | null;\r\n};\r\n\r\nexport type IMPACT_CATEGORY = \"H\" | \"S\" | \"E\" | \"F\";\r\nexport type DAMAGE_INDICATOR =\r\n  | \"Ha\"\r\n  | \"Hb\"\r\n  | \"Hc\"\r\n  | \"Sa\"\r\n  | \"Sb\"\r\n  | \"Sc\"\r\n  | \"Sd\"\r\n  | \"Ea\"\r\n  | \"Fa\"\r\n  | \"Fb\";\r\n\r\n// in k =  1 000\r\nconst scales: { [key: string]: number } = {\r\n  \"0\": 0,\r\n  \"0.5\": 5000,\r\n  \"1\": 16000,\r\n  \"1.5\": 50000,\r\n  \"2\": 160000,\r\n  \"2.5\": 500000,\r\n  \"3\": 1600000,\r\n  \"3.5\": 5000000,\r\n  \"4\": 16000000,\r\n  \"4.5\": 50000000,\r\n  \"5\": 160000000,\r\n  \"5.5\": 500000000,\r\n};\r\n\r\nexport function getAbsoluteImpact(scaleString: string | null) {\r\n  if (scaleString === null) return 0;\r\n\r\n  return 1000 * scales[scaleString.slice(2)];\r\n}\r\n\r\nexport function getAbsoluteImpactFromFloat(scaleFloat: number) {\r\n  return 1600000 * Math.pow(10, scaleFloat);\r\n}\r\n\r\nexport function getImpactScaleNumber(absoluteImpact: number) {\r\n  if (absoluteImpact === 0) return \"0\";\r\n\r\n  const diffs: [string, number][] = Object.entries(scales)\r\n    .sort((a, b) => b[1] - a[1])\r\n    .map((v) => [\r\n      v[0],\r\n      Math.abs(Math.log(1000 * v[1]) - Math.log(absoluteImpact)),\r\n    ]);\r\n\r\n  const minDiff = diffs.reduce((min, cur) => (min[1] >= cur[1] ? cur : min));\r\n\r\n  return minDiff[0];\r\n}\r\n\r\nexport function getImpactScaleFloat(absoluteImpact: number) {\r\n  return Math.log10(absoluteImpact / 1600000);\r\n}\r\n\r\nexport function getImpactScale(absoluteImpact: number, scalePrefix: string) {\r\n  return `${scalePrefix}${getImpactScaleNumber(absoluteImpact)}`;\r\n}\r\n\r\nexport function getMoneyString(impactNumber: number) {\r\n  if (impactNumber < 1000000) {\r\n    return ` ${impactNumber.toLocaleString()}`;\r\n  }\r\n  if (impactNumber < 1000000000) {\r\n    return ` ${(Math.round(impactNumber / 10000) / 100).toLocaleString()}M`;\r\n  }\r\n  if (impactNumber < 1000000000000) {\r\n    return ` ${(Math.round(impactNumber / 10000000) / 100).toLocaleString()}B`;\r\n  }\r\n\r\n  return ` ${(\r\n    Math.round(impactNumber / 10000000000) / 100\r\n  ).toLocaleString()}T`;\r\n}\r\n\r\nconst gsp = (\r\n  rf: DVRiskFile,\r\n  parameter: RISKFILE_RESULT_FIELD,\r\n  scenario: SCENARIOS\r\n) => getScenarioParameter(rf, parameter, scenario) || 0.00000001;\r\n\r\nexport function getDirectImpact(rf: DVRiskFile, scenario: SCENARIOS): Effect {\r\n  const scenarioSuffix = getScenarioSuffix(scenario);\r\n\r\n  return {\r\n    id: null,\r\n    name: \"Direct Impact\",\r\n\r\n    cp: gsp(rf, \"DP\", scenario) / gsp(rf, \"TP\", scenario),\r\n\r\n    ha: gsp(rf, \"DI_Ha\", scenario) / gsp(rf, \"TI_Ha\", scenario),\r\n    hb: gsp(rf, \"DI_Hb\", scenario) / gsp(rf, \"TI_Hb\", scenario),\r\n    hc: gsp(rf, \"DI_Hc\", scenario) / gsp(rf, \"TI_Hc\", scenario),\r\n    sa: gsp(rf, \"DI_Sa\", scenario) / gsp(rf, \"TI_Sa\", scenario),\r\n    sb: gsp(rf, \"DI_Sb\", scenario) / gsp(rf, \"TI_Sb\", scenario),\r\n    sc: gsp(rf, \"DI_Sc\", scenario) / gsp(rf, \"TI_Sc\", scenario),\r\n    sd: gsp(rf, \"DI_Sd\", scenario) / gsp(rf, \"TI_Sd\", scenario),\r\n    ea: gsp(rf, \"DI_Ea\", scenario) / gsp(rf, \"TI_Ea\", scenario),\r\n    fa: gsp(rf, \"DI_Fa\", scenario) / gsp(rf, \"TI_Fa\", scenario),\r\n    fb: gsp(rf, \"DI_Fb\", scenario) / gsp(rf, \"TI_Fb\", scenario),\r\n\r\n    h: gsp(rf, \"DI_H\", scenario) / gsp(rf, \"TI_H\", scenario),\r\n    s: gsp(rf, \"DI_S\", scenario) / gsp(rf, \"TI_S\", scenario),\r\n    e: gsp(rf, \"DI_E\", scenario) / gsp(rf, \"TI_E\", scenario),\r\n    f: gsp(rf, \"DI_F\", scenario) / gsp(rf, \"TI_F\", scenario),\r\n\r\n    i: gsp(rf, \"DI\", scenario) / gsp(rf, \"TI\", scenario),\r\n\r\n    quali_h: rf[`cr4de_di_quali_h${scenarioSuffix}`],\r\n    quali_s: rf[`cr4de_di_quali_s${scenarioSuffix}`],\r\n    quali_e: rf[`cr4de_di_quali_e${scenarioSuffix}`],\r\n    quali_f: rf[`cr4de_di_quali_f${scenarioSuffix}`],\r\n  };\r\n}\r\n\r\nconst gcp = (\r\n  c: DVRiskCascade,\r\n  parameter: CASCADE_RESULT_FIELD,\r\n  scenario: SCENARIOS\r\n) => getCascadeParameter(c, scenario, parameter) || 0.00000001;\r\n\r\nexport function getIndirectImpact(\r\n  c: DVRiskCascade<SmallRisk, SmallRisk>,\r\n  rf: DVRiskFile,\r\n  scenario: SCENARIOS\r\n): Effect {\r\n  return {\r\n    id: c.cr4de_effect_hazard.cr4de_riskfilesid,\r\n    name: c.cr4de_effect_hazard.cr4de_title,\r\n\r\n    cp: gcp(c, \"CP_AVG\", scenario), //c[`${scenarioLetter}2c`] + c[`${scenarioLetter}2m`] + c[`${scenarioLetter}2e`],\r\n\r\n    ha: gcp(c, \"II_Ha\", scenario) / gsp(rf, \"TI_Ha\", scenario),\r\n    hb: gcp(c, \"II_Hb\", scenario) / gsp(rf, \"TI_Hb\", scenario),\r\n    hc: gcp(c, \"II_Hc\", scenario) / gsp(rf, \"TI_Hc\", scenario),\r\n    sa: gcp(c, \"II_Sa\", scenario) / gsp(rf, \"TI_Sa\", scenario),\r\n    sb: gcp(c, \"II_Sb\", scenario) / gsp(rf, \"TI_Sb\", scenario),\r\n    sc: gcp(c, \"II_Sc\", scenario) / gsp(rf, \"TI_Sc\", scenario),\r\n    sd: gcp(c, \"II_Sd\", scenario) / gsp(rf, \"TI_Sd\", scenario),\r\n    ea: gcp(c, \"II_Ea\", scenario) / gsp(rf, \"TI_Ea\", scenario),\r\n    fa: gcp(c, \"II_Fa\", scenario) / gsp(rf, \"TI_Fa\", scenario),\r\n    fb: gcp(c, \"II_Fb\", scenario) / gsp(rf, \"TI_Fb\", scenario),\r\n\r\n    h: gcp(c, \"II_H\", scenario) / gsp(rf, \"TI_H\", scenario),\r\n    s: gcp(c, \"II_S\", scenario) / gsp(rf, \"TI_S\", scenario),\r\n    e: gcp(c, \"II_E\", scenario) / gsp(rf, \"TI_E\", scenario),\r\n    f: gcp(c, \"II_F\", scenario) / gsp(rf, \"TI_F\", scenario),\r\n\r\n    i: gcp(c, \"II\", scenario) / gsp(rf, \"TI\", scenario),\r\n\r\n    quali: c.cr4de_quali || \"\",\r\n    quali_cause: c.cr4de_quali_cause,\r\n  };\r\n}\r\n\r\n// const unscaleImpact = (j: number) => {\r\n//   if (j < 0.5) {\r\n//     return (j * 1.5) / 0.5;\r\n//   }\r\n\r\n//   return ((j - 0.5) * 3.5) / 4.5 + 1.5;\r\n// };\r\n\r\nexport const getDamageIndicatorAbsoluteScale = (\r\n  calculation: RiskCalculation,\r\n  di: DAMAGE_INDICATOR,\r\n  scenarioSuffix: SCENARIO_SUFFIX\r\n) => {\r\n  const diImpact = calculation[`ti_${di}${scenarioSuffix}`] || 0;\r\n\r\n  if (diImpact <= 0) return 0;\r\n\r\n  if (diImpact < 1000 * scales[\"0.5\"])\r\n    return (\r\n      Math.round(\r\n        (10 * 0.5 * (1000 * scales[\"0.5\"] - diImpact)) / (1000 * scales[\"0.5\"])\r\n      ) / 10\r\n    );\r\n\r\n  return Math.round(10 * getImpactScaleFloat(diImpact)) / 10;\r\n};\r\n\r\n// export const getImpactCategoryRatio = (riskFile: DVRiskFile, category: IMPACT_CATEGORY, scenario: SCENARIOS) => {\r\n//   if (!riskFile.results || !riskFile.results[scenario]) return 0;\r\n\r\n//   const ti = getTotalImpactFromRelative(riskFile.results[scenario].TI);\r\n//   const tiCategory =\r\n//     getAbsoluteImpactFromFloat(riskFile.results[scenario][`TI_${category}a_abs`] || 0) +\r\n//     getAbsoluteImpactFromFloat(riskFile.results[scenario][`TI_${category}b_abs` as RISKFILE_RESULT_FIELD] || 0) +\r\n//     getAbsoluteImpactFromFloat(riskFile.results[scenario][`TI_${category}c_abs` as RISKFILE_RESULT_FIELD] || 0) +\r\n//     getAbsoluteImpactFromFloat(riskFile.results[scenario][`TI_${category}d_abs` as RISKFILE_RESULT_FIELD] || 0);\r\n\r\n//   return tiCategory / ti;\r\n// };\r\n","import { Layer, Rectangle, ResponsiveContainer, Sankey } from \"recharts\";\r\nimport getCategoryColor from \"../../../functions/getCategoryColor\";\r\nimport { DVRiskFile } from \"../../../types/dataverse/DVRiskFile\";\r\nimport { SCENARIOS, getScenarioSuffix } from \"../../../functions/scenarios\";\r\nimport round from \"../../../functions/roundNumberString\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { getIndirectImpact } from \"../../../functions/Impact\";\r\nimport { Cascades } from \"../../../functions/cascades\";\r\nimport { JSXElementConstructor } from \"react\";\r\n\r\nconst baseY = 50;\r\n\r\nconst PSankeyNode = ({\r\n  x,\r\n  y,\r\n  width,\r\n  height,\r\n  index,\r\n  payload,\r\n  totalProbability,\r\n  totalNodes,\r\n  fontSize,\r\n  CustomTooltip,\r\n  onClick,\r\n  onNavigate,\r\n}: // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\nany) => {\r\n  const { t } = useTranslation();\r\n\r\n  if (payload.depth > 0) {\r\n    return (\r\n      <Layer\r\n        className=\"total-probability\"\r\n        key={`CustomNode${index}`}\r\n        height=\"50px\"\r\n      >\r\n        <Rectangle\r\n          x={x}\r\n          y={baseY}\r\n          width={width}\r\n          height={totalNodes <= 2 ? 600 - 2 * baseY : height}\r\n          fill={getCategoryColor(payload.category)}\r\n          fillOpacity=\"1\"\r\n        />\r\n        <text\r\n          textAnchor=\"middle\"\r\n          x={-y - height / 2 - 18}\r\n          y={x - 15}\r\n          fontSize=\"16\"\r\n          stroke=\"#333\"\r\n          transform=\"rotate(270)\"\r\n        >\r\n          {`${t(\"Preferred Malicious Actions\")}:  ${round(\r\n            totalProbability,\r\n            2\r\n          )} / 5`}\r\n        </text>\r\n        {/* <text\r\n          textAnchor=\"middle\"\r\n          x={-y - height / 2 - 18}\r\n          y={x - 15}\r\n          fontSize=\"16\"\r\n          stroke=\"#333\"\r\n          transform=\"rotate(270)\"\r\n        >\r\n          Total Probability:{\" \"}\r\n          {`${round(100 * getYearlyProbability(totalProbability))}% / year (${round(\r\n            100 * totalProbability,\r\n            3\r\n          )}% / day)`}\r\n        </text> */}\r\n      </Layer>\r\n    );\r\n  } else {\r\n    return (\r\n      <Layer className=\"probability-cause\" key={`CustomNode${index}`}>\r\n        <Rectangle\r\n          x={x}\r\n          y={totalNodes <= 2 ? baseY : y}\r\n          width={width}\r\n          height={totalNodes <= 2 ? 600 - 2 * baseY : height}\r\n          fill={getCategoryColor(payload.category)}\r\n          fillOpacity=\"1\"\r\n          style={{ cursor: payload.id && \"pointer\" }}\r\n          onClick={() => {\r\n            if (!payload.id) return;\r\n\r\n            if (onClick) return onClick(payload.id);\r\n\r\n            if (onNavigate) onNavigate(payload.id);\r\n          }}\r\n        />\r\n\r\n        {CustomTooltip ? (\r\n          <CustomTooltip\r\n            x={x}\r\n            y={y}\r\n            height={height}\r\n            payload={payload}\r\n            totalProbability={totalProbability}\r\n            fontSize={fontSize}\r\n            onClick={onClick}\r\n          />\r\n        ) : (\r\n          <text\r\n            textAnchor=\"start\"\r\n            x={x + 15}\r\n            y={y + height / 2}\r\n            fontSize={fontSize - 2 || \"14\"}\r\n            stroke=\"#333\"\r\n            cursor=\"pointer\"\r\n          >\r\n            {payload.name}\r\n          </text>\r\n        )}\r\n      </Layer>\r\n    );\r\n  }\r\n};\r\n\r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\nconst PSankeyLink = (props: any) => {\r\n  const {\r\n    targetRelativeY,\r\n    sourceX,\r\n    sourceY,\r\n    sourceControlX,\r\n    targetX,\r\n    targetY,\r\n    targetControlX,\r\n    linkWidth,\r\n    totalNodes,\r\n  } = props;\r\n\r\n  const shiftedTargetY =\r\n    totalNodes <= 2\r\n      ? sourceY\r\n      : targetRelativeY + targetY + (baseY - (targetY - linkWidth / 2));\r\n\r\n  return (\r\n    <path\r\n      d={`\r\n        M${sourceX},${sourceY}\r\n        C${sourceControlX},${sourceY} ${targetControlX},${shiftedTargetY} ${targetX},${shiftedTargetY}\r\n      `}\r\n      stroke=\"rgb(102,200,194)\"\r\n      fill=\"none\"\r\n      strokeWidth={totalNodes <= 2 ? 600 - 2 * baseY : linkWidth}\r\n      strokeOpacity=\"0.2\"\r\n      // {...filterProps(others)}\r\n    />\r\n  );\r\n};\r\n\r\nexport default function ActionsSankeyChart({\r\n  riskFile = null,\r\n  cascades = null,\r\n  maxActions = null,\r\n  minActionPortion = null,\r\n  shownActionPortion = null,\r\n  scenario,\r\n  debug = false,\r\n  width = \"100%\",\r\n  height = \"100%\",\r\n  CustomTooltip,\r\n  onClick = null,\r\n  onNavigate,\r\n}: {\r\n  riskFile?: DVRiskFile | null;\r\n  cascades?: Cascades | null;\r\n  maxActions?: number | null;\r\n  minActionPortion?: number | null;\r\n  shownActionPortion?: number | null;\r\n  scenario: SCENARIOS;\r\n  debug?: boolean;\r\n  manmade?: boolean;\r\n  width?: number | string;\r\n  height?: number | string;\r\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n  CustomTooltip?: JSXElementConstructor<any>;\r\n  onClick?: ((id: string) => void) | null;\r\n  onNavigate?: (id: string) => void;\r\n}) {\r\n  const { t } = useTranslation();\r\n  if (!riskFile || !cascades) return null;\r\n\r\n  const scenarioSuffix: string = getScenarioSuffix(scenario);\r\n\r\n  const actions = cascades.effects\r\n    .map((e) => ({\r\n      id: e.cr4de_effect_hazard.cr4de_riskfilesid,\r\n      name: e.cr4de_effect_hazard.cr4de_title,\r\n      cascade: e,\r\n      cp: getIndirectImpact(e, riskFile, scenario).cp,\r\n    }))\r\n    .sort((a, b) => b.cp - a.cp);\r\n\r\n  let minP = 0;\r\n  const totP = actions.reduce((p, e) => p + e.cp, 0.00000001);\r\n\r\n  if (maxActions !== null) {\r\n    minP = actions[Math.min(maxActions - 1, actions.length - 1)].cp;\r\n  } else if (minActionPortion !== null) {\r\n    minP = minActionPortion * totP;\r\n  } else if (shownActionPortion !== null) {\r\n    let cumulP = 0;\r\n    for (const c of actions) {\r\n      cumulP += c.cp / totP;\r\n\r\n      if (cumulP >= shownActionPortion) {\r\n        minP = c.cp;\r\n        break;\r\n      }\r\n    }\r\n  }\r\n\r\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n  const nodes: any[] = [\r\n    { name: riskFile.cr4de_title },\r\n    ...actions.filter((c) => c.cp >= minP),\r\n  ];\r\n  const otherActions = actions.filter((e) => e.cp < minP);\r\n\r\n  if (minP >= 0 && otherActions.length > 0) {\r\n    nodes.push({\r\n      name: t(\"Other Actions\"),\r\n      hidden: otherActions,\r\n    });\r\n  }\r\n\r\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n  const links: any[] = actions\r\n    .filter((e) => e.cp >= minP)\r\n    .map((e, i: number) => ({\r\n      source: i + 1,\r\n      target: 0,\r\n      value: Math.max(0.000000001, e.cp),\r\n    }));\r\n  if (minP > 0 && otherActions.length > 0)\r\n    links.push({\r\n      source: nodes.length - 1,\r\n      target: 0,\r\n      value: actions\r\n        .filter((e) => e.cp < minP)\r\n        .reduce((tot, e) => tot + e.cp, 0.000000001),\r\n      hidden: actions.filter((e) => e.cp < minP),\r\n    });\r\n\r\n  const data = {\r\n    nodes,\r\n    links,\r\n  };\r\n\r\n  if (typeof width === \"string\" || typeof height === \"string\") {\r\n    return (\r\n      <ResponsiveContainer width=\"100%\" height=\"100%\">\r\n        <Sankey\r\n          data={data}\r\n          node={\r\n            <PSankeyNode\r\n              onClick={onClick}\r\n              totalProbability={totP}\r\n              totalNodes={data.nodes.length}\r\n              showComponents={debug}\r\n              scenarioSuffix={scenarioSuffix}\r\n            />\r\n          }\r\n          link={<PSankeyLink totalNodes={data.nodes.length} />}\r\n          nodePadding={\r\n            data.nodes.length > 2 ? 100 / (data.nodes.length - 2) : 0\r\n          }\r\n          iterations={0}\r\n        ></Sankey>\r\n      </ResponsiveContainer>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <Sankey\r\n      width={width as number}\r\n      height={height as number}\r\n      data={data}\r\n      node={\r\n        <PSankeyNode\r\n          onClick={onClick}\r\n          totalProbability={totP}\r\n          totalNodes={data.nodes.length}\r\n          showComponents={debug}\r\n          scenarioSuffix={scenarioSuffix}\r\n          fontSize={22}\r\n          CustomTooltip={CustomTooltip}\r\n          onNavigate={onNavigate}\r\n        />\r\n      }\r\n      link={<PSankeyLink totalNodes={data.nodes.length} />}\r\n      nodePadding={data.nodes.length > 2 ? 100 / (data.nodes.length - 2) : 0}\r\n      iterations={0}\r\n    ></Sankey>\r\n  );\r\n}\r\n","import { DVRiskFile, RISK_TYPE } from \"../../types/dataverse/DVRiskFile\";\r\nimport svg2PDF from \"../svg2PDF.worker\";\r\nimport { ProbabilityBarsChart } from \"../../components/charts/svg/ProbabilityBarsChart\";\r\nimport { getScenarioParameter, SCENARIOS } from \"../scenarios\";\r\nimport { getCategoryImpactRescaled } from \"../CategoryImpact\";\r\nimport SummaryImpactChart from \"../../components/charts/svg/SummaryImpactChart\";\r\nimport { ReactComponent as BNRALogo } from \"../../assets/icons/BNRA_Logo.svg\";\r\nimport { ReactComponent as NCCNLogo } from \"../../assets/icons/NCCN_Logo.svg\";\r\nimport { ReactComponent as NCCNDetail } from \"../../assets/icons/Triangles_detail.svg\";\r\nimport ScenarioMatrixChart from \"../../components/charts/svg/ScenarioMatrixChart\";\r\nimport { Cascades } from \"../cascades\";\r\nimport ProbabilitySankeyChart from \"../../components/charts/svg/ProbabilitySankeyChart\";\r\nimport ImpactSankeyChart from \"../../components/charts/svg/ImpactSankeyChart\";\r\nimport ImpactBarChart from \"../../components/charts/svg/ImpactBarChart\";\r\nimport ClimateChangeChart from \"../../components/charts/svg/ClimateChangeChart\";\r\nimport ActionsSankeyChart from \"../../components/charts/svg/ActionsSankeyChart\";\r\n\r\nexport type SummaryCharts = {\r\n  pBarChartURI: string;\r\n  hChartURI: string;\r\n  sChartURI: string;\r\n  eChartURI: string;\r\n  fChartURI: string;\r\n};\r\n\r\nexport type AnalysisCharts = {\r\n  probability: string;\r\n  impact: string;\r\n  impactBars: string;\r\n};\r\n\r\nexport type RiskFileCharts = {\r\n  summary: SummaryCharts;\r\n  scenarioChart: string;\r\n  sankey: AnalysisCharts;\r\n  climateChange: string;\r\n};\r\n\r\nexport type SVGImages = {\r\n  nccnLogo: string;\r\n  bnraLogo: string;\r\n  triangles: string;\r\n  riskFiles: (RiskFileCharts | null)[];\r\n};\r\n\r\nconst barWidth = 300;\r\nconst barHeight = 500;\r\n\r\nexport default async function renderSVG(\r\n  riskFiles: DVRiskFile[],\r\n  allCascades: { [key: string]: Cascades }\r\n) {\r\n  return {\r\n    nccnLogo: await svg2PDF(\r\n      <NCCNLogo style={{ position: \"absolute\", bottom: 0, left: 0 }} />,\r\n      100,\r\n      100,\r\n      \"image/png\"\r\n    ),\r\n    bnraLogo: await svg2PDF(\r\n      <BNRALogo style={{ position: \"absolute\", bottom: 0, left: 0 }} />,\r\n      100,\r\n      100,\r\n      \"image/png\"\r\n    ),\r\n    triangles: await svg2PDF(\r\n      <NCCNDetail style={{ position: \"absolute\", bottom: 0, left: 0 }} />,\r\n      100,\r\n      100,\r\n      \"image/png\"\r\n    ),\r\n    riskFiles: await Promise.all(\r\n      riskFiles.map((rf) =>\r\n        renderRFCharts(rf, allCascades[rf.cr4de_riskfilesid])\r\n      )\r\n    ),\r\n  };\r\n}\r\n\r\nexport async function renderRFCharts(riskFile: DVRiskFile, cascades: Cascades) {\r\n  if (riskFile.cr4de_risk_type === RISK_TYPE.EMERGING) {\r\n    return null;\r\n  }\r\n\r\n  const scenario = riskFile.cr4de_mrs || SCENARIOS.CONSIDERABLE;\r\n\r\n  const tp = getScenarioParameter(riskFile, \"TP\", scenario) || 0;\r\n\r\n  const H = getCategoryImpactRescaled(riskFile, \"H\", scenario);\r\n  const S = getCategoryImpactRescaled(riskFile, \"S\", scenario);\r\n  const E = getCategoryImpactRescaled(riskFile, \"E\", scenario);\r\n  const F = getCategoryImpactRescaled(riskFile, \"F\", scenario);\r\n\r\n  return {\r\n    summary: {\r\n      pBarChartURI: await svg2PDF(\r\n        <ProbabilityBarsChart chartWidth={200} height={100} tp={tp} />,\r\n        2000,\r\n        1000\r\n      ),\r\n      hChartURI: await svg2PDF(\r\n        <SummaryImpactChart\r\n          category=\"H\"\r\n          value={H}\r\n          width={500}\r\n          height={250}\r\n          needleWidth={7}\r\n        />,\r\n        5000,\r\n        2500\r\n      ),\r\n      sChartURI: await svg2PDF(\r\n        <SummaryImpactChart\r\n          category=\"S\"\r\n          value={S}\r\n          width={500}\r\n          height={250}\r\n          needleWidth={7}\r\n        />,\r\n        5000,\r\n        2500\r\n      ),\r\n      eChartURI: await svg2PDF(\r\n        <SummaryImpactChart\r\n          category=\"E\"\r\n          value={E}\r\n          width={500}\r\n          height={250}\r\n          needleWidth={7}\r\n        />,\r\n        5000,\r\n        2500\r\n      ),\r\n      fChartURI: await svg2PDF(\r\n        <SummaryImpactChart\r\n          category=\"F\"\r\n          value={F}\r\n          width={500}\r\n          height={250}\r\n          needleWidth={7}\r\n        />,\r\n        5000,\r\n        2500\r\n      ),\r\n    },\r\n    scenarioChart: await svg2PDF(\r\n      <ScenarioMatrixChart\r\n        riskFile={riskFile}\r\n        mrs={scenario}\r\n        fontSize={20}\r\n        width={600}\r\n        height={540}\r\n        radius={600}\r\n      />,\r\n      5000,\r\n      2500\r\n    ),\r\n    sankey: {\r\n      probability: await svg2PDF(\r\n        riskFile.cr4de_risk_type === RISK_TYPE.STANDARD ? (\r\n          <ProbabilitySankeyChart\r\n            riskFile={riskFile}\r\n            cascades={cascades}\r\n            maxCauses={null}\r\n            shownCausePortion={0.8}\r\n            minCausePortion={null}\r\n            scenario={scenario}\r\n            onClick={() => {}}\r\n            debug={false}\r\n            manmade={false}\r\n            width={400}\r\n            height={800}\r\n          />\r\n        ) : (\r\n          <ActionsSankeyChart\r\n            riskFile={riskFile}\r\n            cascades={cascades}\r\n            maxActions={null}\r\n            shownActionPortion={0.8}\r\n            minActionPortion={null}\r\n            scenario={scenario}\r\n            onClick={() => {}}\r\n            debug={false}\r\n            width={400}\r\n            height={800}\r\n          />\r\n        ),\r\n        5000,\r\n        2500\r\n      ),\r\n      impact: await svg2PDF(\r\n        <ImpactSankeyChart\r\n          riskFile={riskFile}\r\n          cascades={cascades}\r\n          maxEffects={null}\r\n          shownEffectPortion={0.8}\r\n          minEffectPortion={null}\r\n          scenario={scenario}\r\n          onClick={() => {}}\r\n          debug={false}\r\n          width={400}\r\n          height={800}\r\n        />,\r\n        5000,\r\n        2500\r\n      ),\r\n      impactBars: await svg2PDF(\r\n        <ImpactBarChart\r\n          riskFile={riskFile}\r\n          scenario={scenario}\r\n          width={barWidth}\r\n          height={barHeight}\r\n        />,\r\n        5000,\r\n        2500\r\n      ),\r\n    },\r\n    climateChange: await svg2PDF(\r\n      <ClimateChangeChart\r\n        riskFile={riskFile}\r\n        causes={cascades.causes}\r\n        scenario={scenario}\r\n        width={1000}\r\n        height={600}\r\n        fontSize=\"20pt\"\r\n        xLabelDy={50}\r\n      />,\r\n      5000,\r\n      2500\r\n    ),\r\n  };\r\n}\r\n","\r\nimport { Font } from \"@react-pdf/renderer\";\r\n\r\nimport Robo100 from \"../../assets/fonts/Roboto-Thin.ttf\";\r\nimport Robo100i from \"../../assets/fonts/Roboto-ThinItalic.ttf\";\r\nimport Robo200 from \"../../assets/fonts/Roboto-ExtraLight.ttf\";\r\nimport Robo200i from \"../../assets/fonts/Roboto-ExtraLightItalic.ttf\";\r\nimport Robo300 from \"../../assets/fonts/Roboto-Light.ttf\";\r\nimport Robo300i from \"../../assets/fonts/Roboto-LightItalic.ttf\";\r\nimport Robo400 from \"../../assets/fonts/Roboto-Regular.ttf\";\r\nimport Robo400i from \"../../assets/fonts/Roboto-Italic.ttf\";\r\nimport Robo500 from \"../../assets/fonts/Roboto-Medium.ttf\";\r\nimport Robo500i from \"../../assets/fonts/Roboto-MediumItalic.ttf\";\r\nimport Robo600 from \"../../assets/fonts/Roboto-SemiBold.ttf\";\r\nimport Robo600i from \"../../assets/fonts/Roboto-SemiBoldItalic.ttf\";\r\nimport Robo700 from \"../../assets/fonts/Roboto-Bold.ttf\";\r\nimport Robo700i from \"../../assets/fonts/Roboto-BoldItalic.ttf\";\r\nimport Robo800 from \"../../assets/fonts/Roboto-ExtraBold.ttf\";\r\nimport Robo800i from \"../../assets/fonts/Roboto-ExtraBoldItalic.ttf\";\r\nimport Robo900 from \"../../assets/fonts/Roboto-Black.ttf\";\r\nimport Robo900i from \"../../assets/fonts/Roboto-BlackItalic.ttf\";\r\n\r\nFont.register({\r\n  family: \"NH\",\r\n  fonts: [\r\n    {\r\n      src: Robo100,\r\n      fontWeight: 100,\r\n    },\r\n    {\r\n      src: Robo100i,\r\n      fontWeight: 100,\r\n      fontStyle: \"italic\",\r\n    },\r\n    {\r\n      src: Robo200,\r\n      fontWeight: 200,\r\n    },\r\n    {\r\n      src: Robo200i,\r\n      fontWeight: 200,\r\n      fontStyle: \"italic\",\r\n    },\r\n    {\r\n      src: Robo300,\r\n      fontWeight: 300,\r\n    },\r\n    {\r\n      src: Robo300i,\r\n      fontWeight: 300,\r\n      fontStyle: \"italic\",\r\n    },\r\n    {\r\n      src: Robo400,\r\n      fontWeight: 400,\r\n    },\r\n    {\r\n      src: Robo400i,\r\n      fontWeight: 400,\r\n      fontStyle: \"italic\",\r\n    },\r\n    {\r\n      src: Robo500,\r\n      fontWeight: 500,\r\n    },\r\n    {\r\n      src: Robo500i,\r\n      fontWeight: 500,\r\n      fontStyle: \"italic\",\r\n    },\r\n    {\r\n      src: Robo600,\r\n      fontWeight: 600,\r\n    },\r\n    {\r\n      src: Robo600i,\r\n      fontWeight: 600,\r\n      fontStyle: \"italic\",\r\n    },\r\n    {\r\n      src: Robo700,\r\n      fontWeight: 700,\r\n    },\r\n    {\r\n      src: Robo700i,\r\n      fontWeight: 700,\r\n      fontStyle: \"italic\",\r\n    },\r\n    {\r\n      src: Robo800,\r\n      fontWeight: 800,\r\n    },\r\n    {\r\n      src: Robo800i,\r\n      fontWeight: 800,\r\n      fontStyle: \"italic\",\r\n    },\r\n    {\r\n      src: Robo900,\r\n      fontWeight: 900,\r\n    },\r\n    {\r\n      src: Robo900i,\r\n      fontWeight: 9300,\r\n      fontStyle: \"italic\",\r\n    },\r\n  ],\r\n});\r\nFont.registerHyphenationCallback((word) => [word]);","import { BLACK, NCCN_GREEN } from \"../../functions/colors\";\r\n\r\nexport const DPI = 300;\r\nexport const SCALE = 300 / 72;\r\nexport const POINTS_PER_CM = 28.3465 * SCALE;\r\n\r\nexport const PAGE_SIZE = \"A4\";\r\nexport const PAGE_WIDTH = 21;\r\nexport const PAGE_HEIGHT = 29.7;\r\nexport const PAGE_DPI = DPI;\r\nexport const PAGE_STYLES = {\r\n  padding: 2.5 * POINTS_PER_CM,\r\n  paddingBottom: 3 * POINTS_PER_CM,\r\n};\r\n// export const PAGE_SIZE = \"B5\"\r\n// export const PAGE_STYLES = {\r\n//     padding: \"1.5cm\",\r\n//     paddingBottom: \"1.5cm\"\r\n// }\r\n\r\n// Global Title\r\nexport const h1Style = {};\r\n\r\n// Chapter Title\r\nexport const h2Style = {\r\n  fontFamily: \"NH\",\r\n  fontWeight: 700,\r\n  color: \"white\",\r\n  fontSize: 30 * SCALE,\r\n};\r\n\r\n// Risk File Title\r\nexport const h3Style = {\r\n  fontFamily: \"NH\",\r\n  fontWeight: 700,\r\n  fontSize: 20 * SCALE,\r\n  marginBottom: 0.5 * POINTS_PER_CM,\r\n};\r\n\r\n// Section Title (i.e. Summary, Risk Description)\r\nexport const h4Style = {\r\n  fontFamily: \"NH\",\r\n  fontWeight: 700,\r\n  color: NCCN_GREEN,\r\n  fontSize: 16 * SCALE,\r\n  marginBottom: 0.5 * POINTS_PER_CM,\r\n};\r\n\r\n// Subsection Title (i.e description, definition, probability analysis)\r\nexport const h5Style = {\r\n  fontFamily: \"NH\",\r\n  fontSize: 11 * SCALE,\r\n  fontWeight: 500,\r\n  // lineHeight: \"1.5pt\",\r\n  color: BLACK,\r\n  marginTop: 5 * SCALE,\r\n  marginBottom: 5 * SCALE,\r\n};\r\n\r\n// Subsubsection Title (i.e. Human impact)\r\nexport const h6Style = {\r\n  marginTop: 5 * SCALE,\r\n  fontFamily: \"NH\",\r\n  fontWeight: 300,\r\n  color: BLACK,\r\n  fontSize: 11 * SCALE,\r\n};\r\n\r\nexport const bodyStyle = {\r\n  fontFamily: \"NH\",\r\n  fontSize: 10 * SCALE,\r\n  fontWeight: 300,\r\n  lineHeight: 1.5,\r\n  color: BLACK,\r\n  marginBottom: 5 * SCALE,\r\n};\r\n\r\nexport const boldStyle = {\r\n  fontWeight: 500,\r\n};\r\n\r\nexport const smallStyle = {\r\n  fontSize: 8 * SCALE,\r\n};\r\n\r\nexport const italicStyle = {\r\n  fontStyle: \"italic\",\r\n};\r\n","import { Image, Page, Text, View } from \"@react-pdf/renderer\";\r\nimport { DPI, h2Style, PAGE_HEIGHT, PAGE_SIZE, POINTS_PER_CM } from \"./styles\";\r\nimport {\r\n  CATEGORY_NAMES,\r\n  RISK_CATEGORY,\r\n  RISK_TYPE,\r\n  RISK_TYPE_NAMES,\r\n} from \"../../types/dataverse/DVRiskFile\";\r\nimport { NCCN_GREEN } from \"../../functions/colors\";\r\n\r\nconst SPLASH: Partial<{ [key in RISK_TYPE.MANMADE | RISK_CATEGORY]: string }> =\r\n  {\r\n    \"Malicious Man-made Risk\": \"splash1.png\",\r\n    Cyber: \"splash1.png\",\r\n    \"Emerging Risk\": \"splash7.png\",\r\n    Health: \"splash5.png\",\r\n    \"Man-made\": \"splash2.png\",\r\n    Nature: \"splash6.png\",\r\n    Transversal: \"spalsh3.png\",\r\n    EcoTech: \"splash4.png\",\r\n  };\r\n\r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\nconst SPLASH_STYLE: { [key in RISK_TYPE.MANMADE | RISK_CATEGORY]: any } = {\r\n  \"Malicious Man-made Risk\": {\r\n    top: 0,\r\n    left: \"-100%\",\r\n    width: 1.78 * PAGE_HEIGHT * POINTS_PER_CM,\r\n    height: PAGE_HEIGHT * POINTS_PER_CM,\r\n  },\r\n  \"Man-made\": {\r\n    top: 0,\r\n    left: \"-100%\",\r\n    width: 1.78 * PAGE_HEIGHT * POINTS_PER_CM,\r\n    height: PAGE_HEIGHT * POINTS_PER_CM,\r\n  },\r\n  Cyber: {\r\n    top: 0,\r\n    left: \"-40%\",\r\n    width: 1.5 * PAGE_HEIGHT * POINTS_PER_CM,\r\n    height: PAGE_HEIGHT * POINTS_PER_CM,\r\n  },\r\n  EcoTech: {\r\n    top: 0,\r\n    left: \"0%\",\r\n    aspectRatio: 1,\r\n    width: 0.71 * PAGE_HEIGHT * POINTS_PER_CM,\r\n    height: PAGE_HEIGHT * POINTS_PER_CM,\r\n  },\r\n  Health: {\r\n    top: 3 * POINTS_PER_CM,\r\n    left: -10 * POINTS_PER_CM,\r\n    width: 1.5 * PAGE_HEIGHT * POINTS_PER_CM,\r\n    height: (1.5 * (PAGE_HEIGHT * POINTS_PER_CM)) / 1.78,\r\n    transform: \"rotate(90deg)\",\r\n  },\r\n  Nature: {\r\n    top: 0,\r\n    left: \"0%\",\r\n    width: (PAGE_HEIGHT * POINTS_PER_CM) / 1.25,\r\n    height: PAGE_HEIGHT * POINTS_PER_CM,\r\n  },\r\n  Transversal: {\r\n    top: 0,\r\n    left: \"0%\",\r\n    aspectRatio: 1,\r\n    width: (PAGE_HEIGHT * POINTS_PER_CM) / 1.25,\r\n    height: PAGE_HEIGHT * POINTS_PER_CM,\r\n  },\r\n  \"Emerging Risk\": {\r\n    top: 0,\r\n    left: \"-50%\",\r\n    width: PAGE_HEIGHT * POINTS_PER_CM * 1.5,\r\n    height: PAGE_HEIGHT * POINTS_PER_CM,\r\n  },\r\n  Test: {},\r\n};\r\n\r\nexport default function CategoryFrontPage({\r\n  category,\r\n}: {\r\n  category: RISK_TYPE.MANMADE | RISK_CATEGORY;\r\n}) {\r\n  return (\r\n    <Page\r\n      size={PAGE_SIZE}\r\n      style={{\r\n        backgroundColor: NCCN_GREEN,\r\n      }}\r\n      dpi={DPI}\r\n    >\r\n      <View\r\n        style={{\r\n          position: \"absolute\",\r\n          width: \"100%\",\r\n          height: \"100%\",\r\n          opacity: 0.2,\r\n          zIndex: 1,\r\n        }}\r\n      >\r\n        <Image\r\n          src={`https://bnra.powerappsportals.com/${SPLASH[category]}`}\r\n          style={{ position: \"absolute\", ...SPLASH_STYLE[category] }}\r\n        />\r\n      </View>\r\n      <View\r\n        style={{\r\n          position: \"absolute\",\r\n          width: \"100%\",\r\n          height: \"100%\",\r\n          flexDirection: \"column\",\r\n          justifyContent: \"center\",\r\n          alignItems: \"center\",\r\n        }}\r\n      >\r\n        <Text style={{ ...h2Style }}>\r\n          {category in CATEGORY_NAMES\r\n            ? CATEGORY_NAMES[category as RISK_CATEGORY]\r\n            : RISK_TYPE_NAMES[category as RISK_TYPE]}\r\n        </Text>\r\n      </View>\r\n    </Page>\r\n  );\r\n}\r\n","import { Text, View } from \"@react-pdf/renderer\";\r\nimport { PAGE_STYLES, smallStyle } from \"./styles\";\r\n\r\nexport default function Footer() {\r\n  return (\r\n    <View\r\n      fixed\r\n      style={{\r\n        position: \"absolute\",\r\n        bottom: PAGE_STYLES.paddingBottom / 2,\r\n        left: PAGE_STYLES.padding,\r\n        right: PAGE_STYLES.padding,\r\n        display: \"flex\",\r\n        flexDirection: \"row\",\r\n        justifyContent: \"space-between\",\r\n      }}\r\n    >\r\n      <Text style={smallStyle}>NCCN - CIPRA</Text>\r\n      <Text style={smallStyle} render={({ pageNumber }) => `${pageNumber}`} />\r\n    </View>\r\n  );\r\n}\r\n","import { Page, Text, View } from \"@react-pdf/renderer\";\r\nimport Footer from \"./Footer\";\r\nimport { bodyStyle, h4Style, PAGE_DPI, PAGE_SIZE, PAGE_STYLES } from \"./styles\";\r\nimport { Trans } from \"react-i18next\";\r\nimport { DVRiskFile } from \"../../types/dataverse/DVRiskFile\";\r\nimport { useMemo } from \"react\";\r\nimport { DVAttachment } from \"../../types/dataverse/DVAttachment\";\r\nimport { BLACK } from \"../../functions/colors\";\r\n\r\nexport type SpecificAttachment = { cr4de_reference: string } & Omit<\r\n  DVAttachment,\r\n  \"cr4de_reference\"\r\n>;\r\n\r\nexport function getSpecificAttachments(\r\n  attachments: DVAttachment<unknown, unknown, DVRiskFile>[]\r\n): SpecificAttachment[] {\r\n  return attachments\r\n    .filter((a) => a.cr4de_reference && a.cr4de_risk_file)\r\n    .sort((a, b) =>\r\n      a.cr4de_risk_file!.cr4de_hazard_id.localeCompare(\r\n        b.cr4de_risk_file!.cr4de_hazard_id\r\n      )\r\n    )\r\n    .map((a) => ({\r\n      ...a,\r\n      cr4de_reference: `${a.cr4de_risk_file!.cr4de_hazard_id}-${\r\n        a.cr4de_reference\r\n      }`,\r\n    }));\r\n}\r\n\r\nexport default function BibliographySection({\r\n  allAttachments,\r\n}: {\r\n  riskFile: DVRiskFile | null;\r\n  allAttachments: SpecificAttachment[] | null;\r\n}) {\r\n  const attachments = useMemo(() => {\r\n    if (!allAttachments) return [];\r\n\r\n    return allAttachments.filter((a) => {\r\n      // If the viewer is external, only show CIPRA sources\r\n      if (a.cr4de_reference !== null) return true;\r\n\r\n      return false;\r\n    });\r\n  }, [allAttachments]);\r\n\r\n  return (\r\n    <Page\r\n      size={PAGE_SIZE}\r\n      dpi={PAGE_DPI}\r\n      style={{\r\n        ...PAGE_STYLES,\r\n        backgroundColor: \"white\",\r\n        color: BLACK,\r\n      }}\r\n    >\r\n      <Footer />\r\n      <View\r\n        style={\r\n          {\r\n            // backgroundColor: \"green\"\r\n          }\r\n        }\r\n      >\r\n        <Text style={h4Style}>\r\n          <Trans i18nKey=\"Bibliography\">Bibliography</Trans>\r\n        </Text>\r\n      </View>\r\n\r\n      <View\r\n        style={{\r\n          display: \"flex\",\r\n          flexDirection: \"row\",\r\n          marginTop: \"0pt\",\r\n          paddingBottom: \"0.5cm\",\r\n        }}\r\n        // debug={true}\r\n      >\r\n        {/* <View\r\n          style={{\r\n            width: \"5pt\",\r\n            marginRight: \"5pt\",\r\n            height: \"100%\",\r\n            backgroundColor: \"#eee\",\r\n          }}\r\n        /> */}\r\n        <View\r\n          style={{\r\n            display: \"flex\",\r\n            flex: 1,\r\n            flexDirection: \"column\",\r\n            marginTop: \"5pt\",\r\n            marginBottom: \"0cm\",\r\n          }}\r\n        >\r\n          {attachments && attachments.length > 0 ? (\r\n            attachments\r\n              .sort((a, b) => {\r\n                return a.cr4de_reference.localeCompare(b.cr4de_reference);\r\n              })\r\n              .map((a, i) => (\r\n                <View key={i} wrap={false}>\r\n                  <View\r\n                    key={a.cr4de_bnraattachmentid}\r\n                    style={{\r\n                      width: \"100%\",\r\n                      textAlign: \"left\",\r\n                      flexDirection: \"row\",\r\n                    }}\r\n                  >\r\n                    <Text\r\n                      style={{\r\n                        ...bodyStyle,\r\n                        position: \"relative\",\r\n                        width: \"1.5cm\",\r\n                      }}\r\n                    >\r\n                      {a.cr4de_reference}.\r\n                    </Text>\r\n                    <Text\r\n                      style={{\r\n                        ...bodyStyle,\r\n                        flex: 1,\r\n                      }}\r\n                    >\r\n                      {a.cr4de_name}\r\n                    </Text>\r\n                  </View>\r\n                  {a.cr4de_url && (\r\n                    <Text\r\n                      style={{\r\n                        ...bodyStyle,\r\n                        width: \"100%\",\r\n                        textDecoration: \"underline\",\r\n                        marginTop: \"-10pt\",\r\n                        marginBottom: \"5pt\",\r\n                        paddingLeft: \"0.5cm\",\r\n                      }}\r\n                      hyphenationCallback={(url) => [...url.split(\"\")]}\r\n                    >\r\n                      {a.cr4de_url}\r\n                    </Text>\r\n                  )}\r\n                </View>\r\n              ))\r\n          ) : (\r\n            <View style={{ flex: 1, textAlign: \"left\" }}>\r\n              <Text style={bodyStyle}>\r\n                <Trans i18nKey=\"source.list.noSources\">\r\n                  No sources attached\r\n                </Trans>\r\n              </Text>\r\n            </View>\r\n          )}\r\n        </View>\r\n      </View>\r\n    </Page>\r\n  );\r\n}\r\n","// import { Cascades } from \"../../pages/BaseRisksPage\";\r\n// import { DVAttachment } from \"../../types/dataverse/DVAttachment\";\r\n// import BibliographySection from \"./BibliographySection\";\r\nimport { Image, Page, Text, View } from \"@react-pdf/renderer\";\r\n\r\nimport \"./fonts\";\r\nimport { DPI, PAGE_SIZE, PAGE_STYLES, POINTS_PER_CM, SCALE } from \"./styles\";\r\nimport { NCCN_GREEN } from \"../../functions/colors\";\r\n\r\nexport default function FrontPage({\r\n  nccnLogo,\r\n  bnraLogo,\r\n  triangles,\r\n}: {\r\n  nccnLogo: string;\r\n  bnraLogo: string;\r\n  triangles: string;\r\n}) {\r\n  return (\r\n    <>\r\n      <Page\r\n        size={PAGE_SIZE}\r\n        style={{\r\n          backgroundColor: NCCN_GREEN,\r\n        }}\r\n        dpi={DPI}\r\n      >\r\n        <View\r\n          style={{\r\n            width: \"70%\",\r\n            margin: \"auto\",\r\n            textAlign: \"center\",\r\n            marginTop: PAGE_STYLES.padding,\r\n            marginBottom: 0,\r\n          }}\r\n        >\r\n          <Text\r\n            style={{\r\n              fontFamily: \"NH\",\r\n              fontSize: 30 * SCALE,\r\n              color: \"white\",\r\n              fontWeight: \"bold\",\r\n            }}\r\n          >\r\n            Belgian National Risk Assessment\r\n          </Text>\r\n        </View>\r\n        <View\r\n          style={{\r\n            width: \"80%\",\r\n            margin: \"auto\",\r\n            textAlign: \"center\",\r\n            marginTop: 10 * SCALE,\r\n            marginBottom: 30 * SCALE,\r\n          }}\r\n        >\r\n          <Text\r\n            style={{\r\n              fontFamily: \"NH\",\r\n              fontSize: 20 * SCALE,\r\n              color: \"white\",\r\n              fontWeight: \"normal\",\r\n            }}\r\n          >\r\n            Full Report\r\n          </Text>\r\n          <Text\r\n            style={{\r\n              fontFamily: \"NH\",\r\n              fontSize: 20 * SCALE,\r\n              color: \"white\",\r\n              fontWeight: \"normal\",\r\n            }}\r\n          >\r\n            2023 - 2026\r\n          </Text>\r\n        </View>\r\n        <Image src=\"https://bnra.powerappsportals.com/report-front.png\" />\r\n        <View\r\n          style={{\r\n            position: \"absolute\",\r\n            width: \"100%\",\r\n            bottom: 0,\r\n            display: \"flex\",\r\n            flexDirection: \"row\",\r\n            justifyContent: \"space-between\",\r\n            alignItems: \"center\",\r\n            paddingLeft: PAGE_STYLES.padding,\r\n            paddingRight: PAGE_STYLES.padding,\r\n            paddingBottom: PAGE_STYLES.padding - 1.5 * POINTS_PER_CM,\r\n          }}\r\n          // debug={true}\r\n        >\r\n          <Image src={nccnLogo} style={{ height: 3 * POINTS_PER_CM }} />\r\n          <Image src={bnraLogo} style={{ height: 2 * POINTS_PER_CM }} />\r\n        </View>\r\n      </Page>\r\n      <Page\r\n        size={PAGE_SIZE}\r\n        style={{\r\n          backgroundColor: NCCN_GREEN,\r\n        }}\r\n        dpi={DPI}\r\n      >\r\n        <View\r\n          style={{\r\n            width: \"100%\",\r\n            height: \"100%\",\r\n            margin: \"auto\",\r\n            textAlign: \"center\",\r\n            display: \"flex\",\r\n            flexDirection: \"column\",\r\n            justifyContent: \"center\",\r\n            marginBottom: 10 * SCALE,\r\n          }}\r\n          // debug={true}\r\n        >\r\n          <Text\r\n            style={{\r\n              fontFamily: \"NH\",\r\n              fontSize: 16 * SCALE,\r\n              color: \"white\",\r\n              fontWeight: \"semibold\",\r\n            }}\r\n          >\r\n            Better prepared. Better response.\r\n          </Text>\r\n          <View\r\n            style={{\r\n              position: \"absolute\",\r\n              width: \"100%\",\r\n              bottom: -1 * POINTS_PER_CM,\r\n              left: \"0\",\r\n            }}\r\n          >\r\n            <Image src={triangles} />\r\n          </View>\r\n        </View>\r\n      </Page>\r\n    </>\r\n  );\r\n}\r\n","import { BLACK, NCCN_GREEN } from \"../../functions/colors\";\r\n\r\nexport const DPI = 300\r\nexport const SCALE = 300 / 72\r\nexport const POINTS_PER_CM = 28.3465 * SCALE;\r\n\r\n\r\nexport const PAGE_SIZE = \"A4\"\r\nexport const PAGE_DPI = DPI;\r\nexport const PAGE_STYLES = {\r\n    padding: 2.5 *  POINTS_PER_CM,\r\n    paddingBottom: 3 *  POINTS_PER_CM\r\n}\r\n// export const PAGE_SIZE = \"B5\"\r\n// export const PAGE_STYLES = {\r\n//     padding: \"1.5cm\",\r\n//     paddingBottom: \"1.5cm\"\r\n// }\r\n\r\n// Global Title\r\nexport const h1Style = {};\r\n\r\n// Chapter Title\r\nexport const h2Style = {};\r\n\r\n// Risk File Title\r\nexport const h3Style = {\r\n  fontFamily: \"NH\",\r\n  fontWeight: 700,\r\n  fontSize: 20 * SCALE,\r\n  marginBottom: 0.5 * POINTS_PER_CM,\r\n};\r\n\r\n// Section Title (i.e. Summary, Risk Description)\r\nexport const h4Style = {\r\n  fontFamily: \"NH\",\r\n  fontWeight: 700,\r\n  color: NCCN_GREEN,\r\n  fontSize: 16 * SCALE,\r\n  marginBottom: 0.5 * POINTS_PER_CM,\r\n};\r\n\r\n// Subsection Title (i.e description, definition, probability analysis)\r\nexport const h5Style = {\r\n  fontFamily: \"NH\",\r\n  fontSize: 11 * SCALE,\r\n  fontWeight: 500,\r\n  // lineHeight: \"1.5pt\",\r\n  color: BLACK,\r\n  marginTop: 5 * SCALE,\r\n  marginBottom: 5 * SCALE,\r\n};\r\n\r\n// Subsubsection Title (i.e. Human impact)\r\nexport const h6Style = {\r\n  marginTop: 5 * SCALE,\r\n  fontFamily: \"NH\",\r\n  fontWeight: 300,\r\n  color: BLACK,\r\n  fontSize: 11 * SCALE,\r\n};\r\n\r\nexport const bodyStyle = {\r\n  fontFamily: \"NH\",\r\n  fontSize: 10 * SCALE,\r\n  fontWeight: 300,\r\n  lineHeight: 1.5,\r\n  color: BLACK,\r\n  marginBottom: 5 * SCALE,\r\n};\r\n\r\nexport const boldStyle = {\r\n  fontWeight: 500,\r\n};\r\n\r\nexport const smallStyle = {\r\n    fontSize: 8 * SCALE,\r\n};\r\n\r\n\r\n","import { Text, View } from \"@react-pdf/renderer\";\r\nimport { ReactElement } from \"react\";\r\nimport {\r\n  bodyStyle,\r\n  boldStyle,\r\n  h5Style,\r\n  POINTS_PER_CM,\r\n  SCALE,\r\n  smallStyle,\r\n} from \"../pages/ExportRiskFilePage/styles\";\r\nimport { BLACK } from \"./colors\";\r\nimport { Style } from \"@react-pdf/types\";\r\nimport { DVRiskFile } from \"../types/dataverse/DVRiskFile\";\r\nimport { italicStyle } from \"../components/export/styles\";\r\n\r\ntype HTMLTag = {\r\n  tagName: string;\r\n  tagOptions: string | null;\r\n  content: string | HTMLTag[];\r\n  size: number;\r\n};\r\n\r\nexport type Section =\r\n  | \"summary\"\r\n  | \"description\"\r\n  | \"analysis\"\r\n  | \"evolution\"\r\n  | \"bibliography\";\r\n\r\nconst fixText = (txt: string) => {\r\n  return txt\r\n    .replaceAll(\"&#39;\", \"'\")\r\n    .replaceAll(\"&quot;\", '\"')\r\n    .replaceAll(\"&amp;\", \"&\");\r\n};\r\n\r\n// html string should start with opening tag <...>\r\nconst parseTag = (html: string): HTMLTag => {\r\n  let currentHtml = html.replace(/<br>/g, \"\").replace(/<br\\/>/g, \"\");\r\n  const currentTagEnd = currentHtml.slice(1).indexOf(\">\") + 1;\r\n  let nextTagStart = currentHtml.slice(1).indexOf(\"<\") + 1;\r\n\r\n  if (nextTagStart < 0) throw new Error(\"No closing tag found\");\r\n\r\n  const nestedTags = [];\r\n\r\n  while (currentHtml[nextTagStart + 1] !== \"/\") {\r\n    // Check if there is plain text before next nested tag\r\n    if (currentTagEnd + 1 !== nextTagStart) {\r\n      nestedTags.push({\r\n        tagName: \"span\",\r\n        tagOptions: null,\r\n        content: currentHtml.slice(currentTagEnd + 1, nextTagStart),\r\n        size: nextTagStart - currentTagEnd - 1,\r\n      });\r\n\r\n      currentHtml =\r\n        currentHtml.slice(0, currentTagEnd + 1) +\r\n        currentHtml.slice(nextTagStart);\r\n      nextTagStart = currentTagEnd + 1;\r\n    }\r\n\r\n    // This tag contains nested tags, process these first\r\n    const nestedTag = parseTag(currentHtml.slice(nextTagStart));\r\n    nestedTags.push(nestedTag);\r\n\r\n    currentHtml =\r\n      currentHtml.slice(0, nextTagStart) +\r\n      currentHtml.slice(nextTagStart + nestedTag.size);\r\n    nextTagStart = currentHtml.slice(1).indexOf(\"<\") + 1;\r\n\r\n    if (nextTagStart < 0) throw new Error(\"No closing tag found\");\r\n  }\r\n\r\n  let closingTagIndex = currentHtml.indexOf(\"</\");\r\n\r\n  const tagNameEnd = Math.min(\r\n    currentHtml.indexOf(\" \") < 0 ? 1000000000 : currentHtml.indexOf(\" \"),\r\n    currentHtml.indexOf(\">\") < 0 ? 1000000000 : currentHtml.indexOf(\">\")\r\n  );\r\n  const tagName = currentHtml.slice(1, tagNameEnd);\r\n\r\n  const contentIndex = currentHtml.indexOf(\">\") + 1;\r\n  const content = currentHtml.slice(contentIndex, closingTagIndex);\r\n\r\n  if (nestedTags.length > 0) {\r\n    if (content.trim() !== \"\") {\r\n      nestedTags.push({\r\n        tagName: \"span\",\r\n        tagOptions: null,\r\n        content: content,\r\n        size: content.length,\r\n      });\r\n\r\n      currentHtml =\r\n        currentHtml.slice(0, currentTagEnd + 1) +\r\n        currentHtml.slice(currentTagEnd + 1 + content.length);\r\n      closingTagIndex = currentHtml.indexOf(\"</\");\r\n    }\r\n  }\r\n\r\n  const tagOptions =\r\n    currentHtml[tagNameEnd] === \">\"\r\n      ? null\r\n      : currentHtml.slice(tagNameEnd + 1, contentIndex - 1);\r\n\r\n  const size =\r\n    nestedTags.reduce((t, i) => t + i.size, 0) +\r\n    closingTagIndex +\r\n    currentHtml.slice(closingTagIndex).indexOf(\">\") +\r\n    1;\r\n\r\n  //   console.log(\"Parsed tag:\", tagName, \" with size\", size);\r\n\r\n  return {\r\n    tagName,\r\n    tagOptions,\r\n    content: nestedTags.length > 0 ? nestedTags : content,\r\n    size,\r\n  };\r\n};\r\n\r\nconst tag2PDF = (\r\n  tag: HTMLTag,\r\n  parent: HTMLTag | null,\r\n  section: Section\r\n): ReactElement | null => {\r\n  if (tag.content === \"\") return null;\r\n\r\n  let styles = {} as Style | Style[];\r\n\r\n  if (parent === null) {\r\n    styles = { ...styles, ...bodyStyle };\r\n  }\r\n\r\n  if (typeof tag.content === \"string\") {\r\n    if (tag.tagName === \"strong\") {\r\n      if (tag.content.indexOf(\"margin of error\") < 0) {\r\n        styles = { ...styles, ...boldStyle };\r\n      }\r\n    } else if (tag.tagName === \"span\") {\r\n      // styles = bodyStyle;\r\n    } else if (tag.tagName === \"a\") {\r\n      // styles = bodyStyle;\r\n    } else if (tag.tagName === \"ref\") {\r\n      return (\r\n        <Text style={{ ...bodyStyle, ...italicStyle }}> ({tag.content})</Text>\r\n      );\r\n    }\r\n\r\n    return (\r\n      <Text style={styles} debug={false}>\r\n        {fixText(tag.content as string)}\r\n      </Text>\r\n    );\r\n  }\r\n\r\n  if (tag.tagName === \"p\") {\r\n    let styles = { ...bodyStyle } as Style | Style[];\r\n\r\n    if (\r\n      tag.content.length <= 1 &&\r\n      tag.content[0].tagName === \"strong\" &&\r\n      section === \"summary\"\r\n    ) {\r\n      styles = { ...h5Style };\r\n    }\r\n\r\n    if (section === \"analysis\") {\r\n      // Empty line (for spacing?)\r\n      if (\r\n        tag.content.some(\r\n          (s) =>\r\n            typeof s.content === \"string\" &&\r\n            (s.content.indexOf(\"of total impact\") >= 0 ||\r\n              s.content.indexOf(\"of total probability\") >= 0)\r\n        ) ||\r\n        (tag.content.length === 1 && tag.content[0].content === \" \")\r\n      ) {\r\n        styles = { ...styles, marginTop: -8 * SCALE, ...smallStyle };\r\n      }\r\n\r\n      // Empty line (for spacing?)\r\n      if (\r\n        tag.content.some(\r\n          (s) =>\r\n            typeof s.content === \"string\" &&\r\n            s.content.indexOf(\"fall within the margin of error\") >= 0\r\n        ) ||\r\n        (tag.content.length === 1 && tag.content[0].content === \" \")\r\n      ) {\r\n        styles = {\r\n          ...styles,\r\n          ...h5Style,\r\n          fontSize: 8 * SCALE,\r\n          marginBottom: \"0pt\",\r\n        };\r\n      }\r\n\r\n      // Risk file title\r\n      if (\r\n        (tag.content.length === 1 &&\r\n          tag.content[0].tagName === \"strong\" &&\r\n          tag.content[0].content.length === 2 &&\r\n          typeof tag.content[0].content[1] !== \"string\" &&\r\n          tag.content[0].content[1].tagName === \"a\") ||\r\n        (tag.content.length === 2 &&\r\n          tag.content[0].tagName === \"strong\" &&\r\n          tag.content[1].tagName === \"strong\" &&\r\n          tag.content[1].content.length === 1 &&\r\n          typeof tag.content[1].content[0] !== \"string\" &&\r\n          tag.content[1].content[0].tagName === \"a\")\r\n      ) {\r\n        tag.content[0].tagName = \"span\";\r\n        styles = { ...styles, textDecoration: \"underline\" };\r\n      }\r\n    }\r\n\r\n    if (\r\n      tag.content.length <= 0 ||\r\n      (tag.content.length === 1 &&\r\n        typeof tag.content[0].content === \"string\" &&\r\n        tag.content[0].content.trim() === \"\")\r\n    ) {\r\n      return null;\r\n    }\r\n\r\n    // Risk file titles in probability section\r\n    if (\r\n      tag.content[0].tagName === \"strong\" &&\r\n      typeof tag.content[0].content !== \"string\" &&\r\n      tag.content[0].content.some(\r\n        (s) =>\r\n          typeof s.content === \"string\" &&\r\n          s.content.indexOf(\"of total probability)\") >= 0\r\n      )\r\n    ) {\r\n      if (typeof tag.content[0].content[2].content !== \"string\")\r\n        return <Text>Error</Text>;\r\n\r\n      const percIndex = tag.content[0].content[2].content.indexOf(\"%\");\r\n      const percPart = tag.content[0].content[2].content.slice(\r\n        0,\r\n        percIndex + 1\r\n      );\r\n      const otherPart = tag.content[0].content[2].content.slice(percIndex + 1);\r\n\r\n      return (\r\n        <>\r\n          {tag2PDF(\r\n            {\r\n              ...tag,\r\n              content: [\r\n                {\r\n                  ...tag.content[0],\r\n                  content: tag.content[0].content.slice(0, 2),\r\n                },\r\n              ],\r\n            },\r\n            parent,\r\n            section\r\n          )}\r\n          {tag2PDF(\r\n            {\r\n              tagName: \"p\",\r\n              size: 1,\r\n              tagOptions: \"\",\r\n              content: [\r\n                {\r\n                  ...tag.content[0].content[2],\r\n                  tagName: \"strong\",\r\n                  content: percPart\r\n                    .replaceAll(\"(\", \"\")\r\n                    .replaceAll(\")\", \"\")\r\n                    .trim(),\r\n                },\r\n                {\r\n                  ...tag.content[0].content[2],\r\n                  content:\r\n                    \" \" +\r\n                    otherPart.replaceAll(\"(\", \"\").replaceAll(\")\", \"\").trim(),\r\n                },\r\n              ],\r\n            },\r\n            parent,\r\n            section\r\n          )}\r\n        </>\r\n      );\r\n    }\r\n\r\n    return (\r\n      <Text style={styles} debug={false}>\r\n        {tag.content.map((e) => tag2PDF(e, tag, section))}\r\n      </Text>\r\n    );\r\n  }\r\n\r\n  if (tag.tagName === \"ol\") {\r\n    return (\r\n      <View style={{ marginLeft: 10 * SCALE }}>\r\n        {tag.content.map((li, i) => (\r\n          <View key={i} style={{ flexDirection: \"row\" }} wrap={false}>\r\n            <Text style={{ ...bodyStyle, width: 0.5 * POINTS_PER_CM }}>\r\n              {i + 1}.\r\n            </Text>\r\n            {typeof li.content === \"string\" ? (\r\n              <Text style={{ ...bodyStyle, flex: 1 }} debug={false}>\r\n                {li.content}\r\n              </Text>\r\n            ) : (\r\n              <Text style={{ ...bodyStyle, flex: 1 }} debug={false}>\r\n                {(li.content as HTMLTag[]).map((e) => tag2PDF(e, tag, section))}\r\n              </Text>\r\n            )}\r\n          </View>\r\n        ))}\r\n      </View>\r\n    );\r\n  }\r\n\r\n  if (tag.tagName === \"ul\") {\r\n    return (\r\n      <View style={{ marginLeft: 10 * SCALE }}>\r\n        {tag.content.map((li, i) => (\r\n          <View key={i} style={{ flexDirection: \"row\" }} wrap={false}>\r\n            <View\r\n              style={{\r\n                backgroundColor: BLACK,\r\n                borderRadius: \"100%\",\r\n                marginTop: 3 * SCALE,\r\n                marginRight: 6 * SCALE,\r\n                width: 3 * SCALE,\r\n                height: 3 * SCALE,\r\n              }}\r\n            />\r\n            {typeof li.content === \"string\" ? (\r\n              <Text style={{ ...bodyStyle, flex: 1 }} debug={false}>\r\n                {li.content}\r\n              </Text>\r\n            ) : (\r\n              <Text style={{ ...bodyStyle, flex: 1 }} debug={false}>\r\n                {(li.content as HTMLTag[]).map((e) => tag2PDF(e, tag, section))}\r\n              </Text>\r\n            )}\r\n          </View>\r\n        ))}\r\n      </View>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <Text style={{}}>{tag.content.map((e) => tag2PDF(e, tag, section))}</Text>\r\n  );\r\n};\r\n\r\nexport default function html2PDF(\r\n  html: string | null,\r\n  section: Section,\r\n  riskFile: DVRiskFile\r\n): (ReactElement | null)[] {\r\n  if (html === null) return [null];\r\n\r\n  const parsed = parseTag(\r\n    `<div>${html.replace(\r\n      / ?<a href=\"#ref-\\d+\" .*?>\\((\\d+)\\)<\\/a>/g,\r\n      `<ref>${riskFile.cr4de_hazard_id}-$1</ref>`\r\n    )}</div>`\r\n  );\r\n  // console.log(html, parsed);\r\n  // console.log(parsed, (parsed.content as HTMLTag[]).map(e => tag2PDF(e)).filter(e=>e!==null))\r\n\r\n  return (parsed.content as HTMLTag[])\r\n    .map((e) => tag2PDF(e, null, section))\r\n    .filter((e) => e !== null);\r\n}\r\n","export default function getScaleString(value: number) {\r\n  if (value < 1) return \"Very Low\";\r\n  if (value < 2) return \"Low\";\r\n  if (value < 3) return \"Medium\";\r\n  if (value < 4) return \"High\";\r\n  return \"Very High\";\r\n}\r\n","import { DVRiskFile } from \"../types/dataverse/DVRiskFile\";\r\n\r\nexport type Language = \"nl\" | \"fr\" | \"de\" | \"en\";\r\n\r\nexport const getLanguage = (rawLanguage: string): Language => {\r\n    if (rawLanguage === \"nl\" || (rawLanguage.toLowerCase().indexOf(\"nl\") >= 0)) return \"nl\";\r\n    if (rawLanguage === \"fr\" || rawLanguage.toLowerCase().indexOf(\"fr\") >= 0) return \"fr\";\r\n    if (rawLanguage === \"de\" || rawLanguage.toLowerCase().indexOf(\"de\") >= 0) return \"de\";\r\n    return \"en\";\r\n}\r\n\r\nexport const getSummary = (rf: DVRiskFile, rawLanguage: string) => {\r\n    const lan = getLanguage(rawLanguage);\r\n\r\n    if (lan === \"nl\" || lan.toLowerCase().indexOf(\"nl\") >= 0) return rf.cr4de_mrs_summary_nl;\r\n    if (lan === \"fr\" || lan.toLowerCase().indexOf(\"fr\") >= 0) return rf.cr4de_mrs_summary_fr;\r\n    if (lan === \"de\" || lan.toLowerCase().indexOf(\"de\") >= 0) return rf.cr4de_mrs_summary_de;\r\n    \r\n    return rf.cr4de_mrs_summary;\r\n  };","import { Text, View } from \"@react-pdf/renderer\";\r\nimport { bodyStyle, PAGE_STYLES, SCALE } from \"./styles\";\r\nimport { LoggedInUser } from \"../../hooks/useLoggedInUser\";\r\n\r\nexport default function Watermark({\r\n  user,\r\n}: {\r\n  user: LoggedInUser | null | undefined;\r\n}) {\r\n  return (\r\n    <View\r\n      fixed\r\n      style={{\r\n        position: \"absolute\",\r\n        top: PAGE_STYLES.padding,\r\n        left: PAGE_STYLES.padding,\r\n        right: PAGE_STYLES.padding,\r\n        bottom: PAGE_STYLES.padding,\r\n        display: \"flex\",\r\n        flexDirection: \"row\",\r\n        justifyContent: \"center\",\r\n        alignItems: \"center\",\r\n      }}\r\n    >\r\n      <Text\r\n        style={{\r\n          ...bodyStyle,\r\n          fontWeight: 700,\r\n          fontSize: 100 * SCALE,\r\n          color: \"rgba(0, 0, 0, 0.05)\",\r\n          transform: \"rotate(45deg)\",\r\n          width: `200%`,\r\n        }}\r\n        hyphenationCallback={(w) => w.split(\"\")}\r\n      >\r\n        {user?.emailaddress1}\r\n      </Text>\r\n    </View>\r\n  );\r\n}\r\n","import { Image, Page, Text, View } from \"@react-pdf/renderer\";\r\nimport Footer from \"./Footer\";\r\nimport {\r\n  bodyStyle,\r\n  boldStyle,\r\n  h3Style,\r\n  h4Style,\r\n  PAGE_DPI,\r\n  PAGE_SIZE,\r\n  PAGE_STYLES,\r\n  POINTS_PER_CM,\r\n  SCALE,\r\n  smallStyle,\r\n} from \"./styles\";\r\nimport html2PDF from \"../../functions/html2pdf\";\r\nimport { Trans, useTranslation } from \"react-i18next\";\r\nimport { DVRiskFile, RISK_TYPE } from \"../../types/dataverse/DVRiskFile\";\r\nimport getScaleString from \"../../functions/getScaleString\";\r\nimport { getSummary } from \"../../functions/translations\";\r\nimport i18next from \"i18next\";\r\nimport { BLACK } from \"../../functions/colors\";\r\nimport Watermark from \"./Watermark\";\r\nimport { LoggedInUser } from \"../../hooks/useLoggedInUser\";\r\nimport { SummaryCharts } from \"../../functions/export/renderSVG\";\r\n\r\nexport default function SummarySection({\r\n  riskFile,\r\n  tp,\r\n  H,\r\n  S,\r\n  E,\r\n  F,\r\n  user,\r\n  charts,\r\n}: {\r\n  riskFile: DVRiskFile;\r\n  tp: number;\r\n  H: number;\r\n  S: number;\r\n  E: number;\r\n  F: number;\r\n  user: LoggedInUser | null | undefined;\r\n  charts: SummaryCharts;\r\n}) {\r\n  const { t } = useTranslation();\r\n\r\n  const wrapperStyle = {\r\n    width: 3 * POINTS_PER_CM,\r\n    // height: 4.5 * POINTS_PER_CM,\r\n    textAlign: \"center\" as const,\r\n  };\r\n  const titleStyle = { ...bodyStyle, ...smallStyle, ...boldStyle };\r\n  const imageStyle = {\r\n    marginTop: 0.25 * POINTS_PER_CM,\r\n    marginLeft: 0.25 * POINTS_PER_CM,\r\n    width: 2.5 * POINTS_PER_CM,\r\n    height: 1.3 * POINTS_PER_CM,\r\n  };\r\n  const scaleStyle = {\r\n    ...bodyStyle,\r\n    marginTop: 0.25 * POINTS_PER_CM,\r\n    marginBottom: 0,\r\n  };\r\n\r\n  return (\r\n    <Page\r\n      size={PAGE_SIZE}\r\n      dpi={PAGE_DPI}\r\n      style={{\r\n        ...PAGE_STYLES,\r\n        backgroundColor: \"white\",\r\n        color: BLACK,\r\n      }}\r\n      // wrap={false}\r\n    >\r\n      <Footer />\r\n      <View>\r\n        <Text style={h3Style}>\r\n          {t(`risk.${riskFile.cr4de_hazard_id}.name`, riskFile.cr4de_title)}\r\n        </Text>\r\n        <Text style={h4Style}>\r\n          <Trans i18nKey=\"risk.bottombar.summary\">Summary</Trans>\r\n        </Text>\r\n      </View>\r\n\r\n      <View\r\n        style={{\r\n          // position: \"absolute\",\r\n          // top: \"1.5cm\",\r\n          // left: \"1.5cm\",\r\n          // right: \"1.5cm\",\r\n          // backgroundColor: \"rgba(0,0,0,0.1)\",\r\n          border: \"1pt solid black\",\r\n          borderWidth: SCALE,\r\n          borderColor: \"rgb(232, 232, 232)\",\r\n          paddingTop: 0.25 * POINTS_PER_CM,\r\n          paddingBottom: 0.25 * POINTS_PER_CM,\r\n          // height: 3 * POINTS_PER_CM,\r\n          // width: \"3.8cm\",\r\n          display: \"flex\",\r\n          flexDirection: \"row\",\r\n          marginBottom: 0.5 * POINTS_PER_CM,\r\n          justifyContent: \"space-between\",\r\n        }}\r\n      >\r\n        <View\r\n          style={wrapperStyle}\r\n          // debug={true}\r\n        >\r\n          <Text style={titleStyle} debug={false}>\r\n            {riskFile.cr4de_risk_type === RISK_TYPE.MANMADE\r\n              ? t(\"learning.motivation.text.title\", \"Motivation\")\r\n              : t(\"learning.probability.2.text.title\", \"Probability\")}\r\n          </Text>\r\n          <Image src={charts.pBarChartURI} style={imageStyle} />\r\n          <Text style={scaleStyle}>{t(getScaleString(tp))}</Text>\r\n        </View>\r\n        <View style={wrapperStyle}>\r\n          <Text style={titleStyle} debug={false}>\r\n            <Trans i18nKey=\"Human\">Human</Trans>\r\n          </Text>\r\n          <Image src={charts.hChartURI} style={imageStyle} />\r\n          <Text style={scaleStyle}>{t(getScaleString(H))}</Text>\r\n        </View>\r\n        <View style={wrapperStyle}>\r\n          <Text style={titleStyle} debug={false}>\r\n            <Trans i18nKey=\"Societal\">Societal</Trans>\r\n          </Text>\r\n          <Image src={charts.sChartURI} style={imageStyle} />\r\n          <Text style={scaleStyle}>{t(getScaleString(S))}</Text>\r\n        </View>\r\n        <View style={wrapperStyle}>\r\n          <Text style={titleStyle} debug={false}>\r\n            <Trans i18nKey=\"Environmental\">Environmental</Trans>\r\n          </Text>\r\n          <Image src={charts.eChartURI} style={imageStyle} />\r\n          <Text style={scaleStyle}>{t(getScaleString(E))}</Text>\r\n        </View>\r\n        <View style={wrapperStyle}>\r\n          <Text style={titleStyle} debug={false}>\r\n            <Trans i18nKey=\"Financial\">Financial</Trans>\r\n          </Text>\r\n          <Image src={charts.fChartURI} style={imageStyle} />\r\n          <Text style={scaleStyle}>{t(getScaleString(F))}</Text>\r\n        </View>\r\n      </View>\r\n\r\n      <View\r\n        style={\r\n          {\r\n            // backgroundColor: \"green\"\r\n          }\r\n        }\r\n        // debug={true}\r\n      >\r\n        {html2PDF(getSummary(riskFile, i18next.language), \"summary\", riskFile)}\r\n      </View>\r\n      {!user?.roles.analist && <Watermark user={user} />}\r\n    </Page>\r\n  );\r\n}\r\n","import { useTranslation } from \"react-i18next\";\r\nimport { DVRiskFile } from \"../../types/dataverse/DVRiskFile\";\r\nimport { Text, View } from \"@react-pdf/renderer\";\r\nimport { bodyStyle, PAGE_STYLES, smallStyle } from \"./styles\";\r\n\r\nexport default function Header({ riskFile }: { riskFile: DVRiskFile }) {\r\n  const { t } = useTranslation();\r\n\r\n  return (\r\n    <View\r\n      fixed\r\n      style={{\r\n        position: \"absolute\",\r\n        top: PAGE_STYLES.padding / 2,\r\n        left: PAGE_STYLES.padding,\r\n        right: PAGE_STYLES.padding,\r\n        display: \"flex\",\r\n        flexDirection: \"row\",\r\n        justifyContent: \"flex-start\",\r\n      }}\r\n    >\r\n      <Text\r\n        style={{\r\n          ...bodyStyle,\r\n          ...smallStyle,\r\n        }}\r\n        render={() => {\r\n          return t(\r\n            `risk.${riskFile.cr4de_hazard_id}.name`,\r\n            riskFile.cr4de_title\r\n          );\r\n        }}\r\n      />\r\n    </View>\r\n  );\r\n}\r\n","import { View } from \"@react-pdf/renderer\";\r\nimport { ReactNode } from \"react\";\r\nimport { SCALE } from \"./styles\";\r\nimport { Style } from \"@react-pdf/types\";\r\n\r\nexport default function LeftBorderSection({\r\n  children,\r\n  debug = false,\r\n  color,\r\n  style = {},\r\n  wrap,\r\n}: {\r\n  children: ReactNode;\r\n  debug?: boolean;\r\n  color?: string;\r\n  style?: Style | Style[];\r\n  wrap?: boolean;\r\n}) {\r\n  return (\r\n    <View\r\n      style={{\r\n        flexDirection: \"row\",\r\n        marginTop: 10 * SCALE,\r\n        position: \"relative\",\r\n        ...style,\r\n      }}\r\n      debug={debug}\r\n      wrap={wrap}\r\n    >\r\n      <View\r\n        style={{\r\n          backgroundColor: color,\r\n          position: \"absolute\",\r\n          left: 0,\r\n          width: 5 * SCALE,\r\n          top: 0,\r\n          bottom: 0,\r\n        }}\r\n        debug={debug}\r\n      />\r\n      <View\r\n        style={{\r\n          flex: 1,\r\n          flexDirection: \"column\",\r\n          marginBottom: \"0pt\",\r\n          marginLeft: 10 * SCALE,\r\n        }}\r\n      >\r\n        {children}\r\n      </View>\r\n    </View>\r\n  );\r\n}\r\n","import { Image, Page, Text, View } from \"@react-pdf/renderer\";\r\nimport Footer from \"./Footer\";\r\nimport {\r\n  bodyStyle,\r\n  boldStyle,\r\n  h4Style,\r\n  h5Style,\r\n  PAGE_DPI,\r\n  PAGE_SIZE,\r\n  PAGE_STYLES,\r\n  POINTS_PER_CM,\r\n  SCALE,\r\n  smallStyle,\r\n} from \"./styles\";\r\nimport html2PDF from \"../../functions/html2pdf\";\r\nimport { Trans } from \"react-i18next\";\r\nimport { DVRiskFile, RISK_TYPE } from \"../../types/dataverse/DVRiskFile\";\r\nimport Header from \"./Header\";\r\nimport { unwrap as unwrapHE } from \"../../functions/historicalEvents\";\r\nimport { colors } from \"../../functions/getCategoryColor\";\r\nimport { SCENARIO_PARAMS, SCENARIOS } from \"../../functions/scenarios\";\r\nimport LeftBorderSection from \"./LeftBorderSection\";\r\nimport { BLACK } from \"../../functions/colors\";\r\n// import { LoggedInUser } from \"../../hooks/useLoggedInUser\";\r\n\r\nexport default function DescriptionSection({\r\n  riskFile,\r\n  scenarioChart,\r\n}: {\r\n  riskFile: DVRiskFile;\r\n  // user: LoggedInUser | null | undefined;\r\n  scenarioChart: string;\r\n}) {\r\n  const events = unwrapHE(riskFile.cr4de_historical_events);\r\n\r\n  const colorList = Object.values(colors);\r\n\r\n  const scenario = riskFile.cr4de_mrs || SCENARIOS.CONSIDERABLE;\r\n\r\n  const mrs_description = html2PDF(\r\n    riskFile.cr4de_mrs_scenario,\r\n    \"description\",\r\n    riskFile\r\n  );\r\n\r\n  return (\r\n    <Page\r\n      size={PAGE_SIZE}\r\n      dpi={PAGE_DPI}\r\n      style={{\r\n        ...PAGE_STYLES,\r\n        backgroundColor: \"white\",\r\n        color: BLACK,\r\n      }}\r\n    >\r\n      <Header riskFile={riskFile} />\r\n      <Footer />\r\n      <View\r\n        style={\r\n          {\r\n            // backgroundColor: \"green\"\r\n          }\r\n        }\r\n      >\r\n        <Text style={h4Style}>\r\n          <Trans i18nKey=\"risk.bottombar.riskIdentification\">\r\n            Risk Description\r\n          </Trans>\r\n        </Text>\r\n      </View>\r\n\r\n      <View\r\n        style={\r\n          {\r\n            // backgroundColor: \"green\"\r\n          }\r\n        }\r\n      >\r\n        <Text style={h5Style}>\r\n          <Trans i18nKey=\"riskFile.definition.title\">Definition</Trans>\r\n        </Text>\r\n        <LeftBorderSection\r\n          color=\"#eee\"\r\n          style={{ paddingTop: 5 * SCALE, marginBottom: 10 * SCALE }}\r\n        >\r\n          {html2PDF(riskFile.cr4de_definition, \"description\", riskFile)}\r\n          <View\r\n            style={{ marginTop: -5 * SCALE, width: \"100%\", height: \"1pt\" }}\r\n          />\r\n        </LeftBorderSection>\r\n      </View>\r\n\r\n      {riskFile.cr4de_risk_type === RISK_TYPE.STANDARD && (\r\n        <View\r\n          style={\r\n            {\r\n              // backgroundColor: \"green\"\r\n            }\r\n          }\r\n        >\r\n          {events.map((e, i) => {\r\n            return (\r\n              <View key={i} wrap={false}>\r\n                {i === 0 && (\r\n                  <Text style={h5Style}>\r\n                    <Trans i18nKey=\"riskFile.historicalEvents.title\">\r\n                      Historical Events\r\n                    </Trans>\r\n                  </Text>\r\n                )}\r\n                <LeftBorderSection key={e.id} color={colorList[i]} wrap={false}>\r\n                  <View style={{ flexDirection: \"row\" }}>\r\n                    <View\r\n                      style={{\r\n                        flexDirection: \"column\",\r\n                        marginTop: 10 * SCALE,\r\n                        marginBottom: \"0pt\",\r\n                        width: 3 * POINTS_PER_CM,\r\n                        flexShrink: 0,\r\n                        borderRadius: 2,\r\n                        rowGap: 1,\r\n                      }}\r\n                    >\r\n                      <Text\r\n                        style={{ ...bodyStyle, ...boldStyle, ...smallStyle }}\r\n                      >\r\n                        {e.time}\r\n                      </Text>\r\n                      <Text\r\n                        style={{ ...bodyStyle, ...boldStyle, ...smallStyle }}\r\n                      >\r\n                        {e.location}\r\n                      </Text>\r\n                    </View>\r\n\r\n                    <View\r\n                      style={{\r\n                        flex: 1,\r\n                        flexDirection: \"column\",\r\n                        marginTop: 5 * SCALE,\r\n                        marginLeft: 5 * SCALE,\r\n                        ...bodyStyle,\r\n                        marginBottom: \"0pt\",\r\n                      }}\r\n                    >\r\n                      {html2PDF(e.description, \"description\", riskFile)}\r\n                    </View>\r\n                  </View>\r\n                </LeftBorderSection>\r\n              </View>\r\n            );\r\n          })}\r\n        </View>\r\n      )}\r\n\r\n      {riskFile.cr4de_risk_type === RISK_TYPE.STANDARD && (\r\n        <View\r\n          style={{\r\n            marginTop: 10 * SCALE,\r\n          }}\r\n        >\r\n          <Text style={h5Style} wrap={false}>\r\n            <Trans i18nKey=\"hazardCatalogue.mrs\">Most Relevant Scenario</Trans>\r\n          </Text>\r\n\r\n          <LeftBorderSection color={SCENARIO_PARAMS[scenario].color}>\r\n            <View\r\n              style={{\r\n                flexDirection: \"row\",\r\n                marginTop: 5 * SCALE,\r\n                marginBottom: 0.5 * POINTS_PER_CM,\r\n              }}\r\n              wrap={false}\r\n            >\r\n              <View style={{ flex: 1 }}>{mrs_description[0]}</View>\r\n              <View\r\n                style={{\r\n                  width: 6 * POINTS_PER_CM,\r\n                  height: 5.4 * POINTS_PER_CM,\r\n                  marginLeft: 0.5 * POINTS_PER_CM,\r\n                }}\r\n              >\r\n                <Image\r\n                  src={scenarioChart}\r\n                  style={{\r\n                    marginTop: 0,\r\n                    // marginLeft: \"0.25cm\",\r\n                    width: 6 * POINTS_PER_CM,\r\n                    height: 5.4 * POINTS_PER_CM,\r\n                  }}\r\n                  // debug={true}\r\n                />\r\n              </View>\r\n            </View>\r\n            {mrs_description.slice(1)}\r\n          </LeftBorderSection>\r\n        </View>\r\n      )}\r\n\r\n      {riskFile.cr4de_risk_type === RISK_TYPE.MANMADE && (\r\n        <View\r\n          style={{\r\n            marginTop: 10 * SCALE,\r\n          }}\r\n        >\r\n          <Text style={h5Style} wrap={false}>\r\n            <Trans i18nKey=\"Most Relevant Actor Group\">\r\n              Most Relevant Actor Group\r\n            </Trans>\r\n          </Text>\r\n\r\n          <LeftBorderSection color={SCENARIO_PARAMS[scenario].color}>\r\n            <View\r\n              style={{\r\n                flexDirection: \"row\",\r\n                marginTop: 5 * SCALE,\r\n                marginBottom: 0.5 * POINTS_PER_CM,\r\n              }}\r\n              wrap={false}\r\n            >\r\n              <View style={{ flex: 1 }}>\r\n                <Text style={bodyStyle}>\r\n                  Actors of this type with{\" \"}\r\n                  <Text style={boldStyle}>{riskFile.cr4de_mrs}</Text>{\" \"}\r\n                  capabilities were identified as the{\" \"}\r\n                  <Text style={boldStyle}>most relevant actor group</Text>. This\r\n                  means that they represent the highest amount of risk\r\n                  (motivation x impact). They can be described as follows:\r\n                </Text>\r\n              </View>\r\n              <View\r\n                style={{\r\n                  width: 6 * POINTS_PER_CM,\r\n                  height: 5.4 * POINTS_PER_CM,\r\n                  marginLeft: 0.5 * POINTS_PER_CM,\r\n                }}\r\n              >\r\n                <Image\r\n                  src={scenarioChart}\r\n                  style={{\r\n                    marginTop: 0,\r\n                    // marginLeft: \"0.25cm\",\r\n                    width: 6 * POINTS_PER_CM,\r\n                    height: 5.4 * POINTS_PER_CM,\r\n                  }}\r\n                  // debug={true}\r\n                />\r\n              </View>\r\n            </View>\r\n\r\n            {mrs_description}\r\n          </LeftBorderSection>\r\n        </View>\r\n      )}\r\n    </Page>\r\n  );\r\n}\r\n","import tableToJson from \"./tableToJson\";\r\nimport { v4 as uuidv4 } from \"uuid\";\r\n\r\nexport interface HistoricalEvent {\r\n  id: string;\r\n  time: string;\r\n  location: string;\r\n  description: string;\r\n}\r\n\r\nexport function unwrap(historicalEvents: string | null): HistoricalEvent[] {\r\n  if (!historicalEvents) return [];\r\n\r\n  try {\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    return JSON.parse(historicalEvents).map((e: any) => {\r\n      if (!e.id) {\r\n        return {\r\n          ...e,\r\n          id: uuidv4(),\r\n        };\r\n      }\r\n      return e;\r\n    });\r\n  } catch {\r\n    // Old HTML format\r\n    const json = tableToJson(historicalEvents);\r\n\r\n    if (!json) return [];\r\n\r\n    return json?.map((event) => ({\r\n      id: uuidv4(),\r\n      location: event[0],\r\n      time: event[1],\r\n      description: event[2],\r\n    }));\r\n  }\r\n}\r\n\r\nexport function wrap(historicalEvents: HistoricalEvent[]): string {\r\n  return JSON.stringify(historicalEvents);\r\n}\r\n\r\n// export function equals(a?: HistoricalEvent[], b?: HistoricalEvent[]) {\r\n//   // TODO\r\n//   return false;\r\n// }\r\n","export default function tableToJson(tableString?: string) {\r\n  if (!tableString) return null;\r\n\r\n  const rows = tableString\r\n    .replace(/<table>/g, \"\")\r\n    .replace(/<\\/table>/g, \"\")\r\n    .replace(/<\\/tr>/g, \"\")\r\n    .replace(\"<tr>\", \"\")\r\n    .split(\"<tr>\");\r\n\r\n  const table = rows.map((r) =>\r\n    r\r\n      .replace(/<\\/td>/g, \"\")\r\n      .replace(\"<td>\", \"\")\r\n      .split(\"<td>\")\r\n  );\r\n\r\n  return table;\r\n}\r\n","import { Image, Page, Text, View } from \"@react-pdf/renderer\";\r\nimport Footer from \"./Footer\";\r\nimport {\r\n  h4Style,\r\n  h5Style,\r\n  PAGE_DPI,\r\n  PAGE_SIZE,\r\n  PAGE_STYLES,\r\n  POINTS_PER_CM,\r\n  SCALE,\r\n} from \"./styles\";\r\nimport html2PDF from \"../../functions/html2pdf\";\r\nimport { Trans, useTranslation } from \"react-i18next\";\r\nimport { DVRiskFile } from \"../../types/dataverse/DVRiskFile\";\r\nimport getImpactColor from \"../../functions/getImpactColor\";\r\nimport Header from \"./Header\";\r\nimport LeftBorderSection from \"./LeftBorderSection\";\r\nimport { getScenarioSuffix, SCENARIOS } from \"../../functions/scenarios\";\r\nimport { BLACK } from \"../../functions/colors\";\r\nimport { RiskFileCharts } from \"../../functions/export/renderSVG\";\r\n// import { LoggedInUser } from \"../../hooks/useLoggedInUser\";\r\n\r\nexport default function AnalysisSection({\r\n  riskFile,\r\n  charts,\r\n}: {\r\n  riskFile: DVRiskFile;\r\n  charts: RiskFileCharts;\r\n  // user: LoggedInUser | null | undefined;\r\n}) {\r\n  const { t } = useTranslation();\r\n\r\n  return (\r\n    <Page\r\n      size={PAGE_SIZE}\r\n      dpi={PAGE_DPI}\r\n      style={{\r\n        ...PAGE_STYLES,\r\n        backgroundColor: \"white\",\r\n        color: BLACK,\r\n        position: \"relative\",\r\n        minHeight: 10 * POINTS_PER_CM,\r\n      }}\r\n    >\r\n      <Header riskFile={riskFile} />\r\n      <Footer />\r\n\r\n      <View\r\n        style={\r\n          {\r\n            // backgroundColor: \"green\"\r\n          }\r\n        }\r\n      >\r\n        <Text style={h4Style}>\r\n          <Trans i18nKey=\"risk.bottombar.riskAnalysis\">Risk Analysis</Trans>\r\n        </Text>\r\n      </View>\r\n\r\n      <View\r\n        style={{\r\n          // backgroundColor: \"green\"\r\n          marginLeft: -0.25 * POINTS_PER_CM,\r\n          marginRight: -0.25 * POINTS_PER_CM,\r\n          height: 12.5 * POINTS_PER_CM,\r\n        }}\r\n      >\r\n        <View\r\n          style={{\r\n            display: \"flex\",\r\n            width: \"100%\",\r\n            height: 12.5 * POINTS_PER_CM,\r\n            flexDirection: \"row\",\r\n          }}\r\n        >\r\n          <Image\r\n            src={charts.sankey.probability}\r\n            style={{\r\n              display: \"flex\",\r\n              marginTop: 0.25 * POINTS_PER_CM,\r\n              marginLeft: 0.25 * POINTS_PER_CM,\r\n              width: 6 * POINTS_PER_CM,\r\n              height: 12 * POINTS_PER_CM,\r\n            }}\r\n          />\r\n          <View\r\n            style={{\r\n              flex: 1,\r\n              flexDirection: \"column\",\r\n              marginLeft: 4 * SCALE,\r\n              justifyContent: \"center\",\r\n            }}\r\n            debug={false}\r\n          >\r\n            <Image\r\n              src={charts.sankey.impactBars}\r\n              style={{\r\n                // position: \"absolute\",\r\n                // display: \"flex\",\r\n                // width: \"4cm\",\r\n                // height: \"4cm\",\r\n                width: \"100%\",\r\n              }}\r\n              debug={false}\r\n            />\r\n          </View>\r\n          <Image\r\n            src={charts.sankey.impact}\r\n            style={{\r\n              display: \"flex\",\r\n              marginTop: 0.25 * POINTS_PER_CM,\r\n              marginLeft: 0.25 * POINTS_PER_CM,\r\n              width: 6 * POINTS_PER_CM,\r\n              height: 12 * POINTS_PER_CM,\r\n            }}\r\n          />\r\n        </View>\r\n      </View>\r\n\r\n      <View\r\n        style={{\r\n          // backgroundColor: \"green\"\r\n          marginTop: POINTS_PER_CM,\r\n          marginBottom: POINTS_PER_CM,\r\n        }}\r\n      >\r\n        <Text style={h5Style}>{t(\"Probability Assessment\")}</Text>\r\n        <LeftBorderSection\r\n          color=\"#eee\"\r\n          style={{ paddingTop: 5 * SCALE, marginBottom: 10 * SCALE }}\r\n        >\r\n          {html2PDF(riskFile.cr4de_mrs_probability, \"analysis\", riskFile)}\r\n        </LeftBorderSection>\r\n      </View>\r\n\r\n      <View\r\n        style={\r\n          {\r\n            // backgroundColor: \"green\"\r\n          }\r\n        }\r\n      >\r\n        <Text style={h5Style}>{t(\"Impact Assessment\")}</Text>\r\n        <LeftBorderSection color={getImpactColor(\"H\")}>\r\n          <Text\r\n            style={{\r\n              ...h5Style,\r\n              color: getImpactColor(\"H\"),\r\n              marginTop: \"0pt\",\r\n              marginBottom: 5 * SCALE,\r\n            }}\r\n          >\r\n            {t(\"learning.impact.h.title\")}\r\n          </Text>\r\n          {html2PDF(riskFile.cr4de_mrs_impact_h, \"analysis\", riskFile)}\r\n        </LeftBorderSection>\r\n\r\n        <LeftBorderSection color={getImpactColor(\"S\")}>\r\n          <Text\r\n            style={{\r\n              ...h5Style,\r\n              color: getImpactColor(\"S\"),\r\n              marginTop: \"0pt\",\r\n              marginBottom: 5 * SCALE,\r\n            }}\r\n          >\r\n            {t(\"learning.impact.s.title\")}\r\n          </Text>\r\n          {html2PDF(riskFile.cr4de_mrs_impact_s, \"analysis\", riskFile)}\r\n        </LeftBorderSection>\r\n\r\n        <LeftBorderSection color={getImpactColor(\"E\")}>\r\n          <Text\r\n            style={{\r\n              ...h5Style,\r\n              color: getImpactColor(\"E\"),\r\n              marginTop: \"0pt\",\r\n              marginBottom: 5 * SCALE,\r\n            }}\r\n          >\r\n            {t(\"learning.impact.e.title\")}\r\n          </Text>\r\n          {html2PDF(riskFile.cr4de_mrs_impact_e, \"analysis\", riskFile)}\r\n        </LeftBorderSection>\r\n\r\n        <LeftBorderSection color={getImpactColor(\"F\")}>\r\n          <Text\r\n            style={{\r\n              ...h5Style,\r\n              color: getImpactColor(\"F\"),\r\n              marginTop: \"0pt\",\r\n              marginBottom: 5 * SCALE,\r\n            }}\r\n          >\r\n            {t(\"learning.impact.f.title\")}\r\n          </Text>\r\n          {html2PDF(riskFile.cr4de_mrs_impact_f, \"analysis\", riskFile)}\r\n        </LeftBorderSection>\r\n\r\n        <LeftBorderSection color=\"#eee\" style={{ marginBottom: -5 * SCALE }}>\r\n          <Text\r\n            style={{\r\n              ...h5Style,\r\n              color: BLACK,\r\n              marginTop: \"0pt\",\r\n              marginBottom: 5 * SCALE,\r\n            }}\r\n          >\r\n            {t(\"Cross-border Impact\")}\r\n          </Text>\r\n          {html2PDF(\r\n            riskFile[\r\n              `cr4de_cross_border_impact_quali${getScenarioSuffix(\r\n                riskFile.cr4de_mrs || SCENARIOS.CONSIDERABLE\r\n              )}`\r\n            ],\r\n            \"analysis\",\r\n            riskFile\r\n          )}\r\n          <View\r\n            style={{ marginTop: -5 * SCALE, width: \"100%\", height: \"1pt\" }}\r\n          />\r\n        </LeftBorderSection>\r\n      </View>\r\n    </Page>\r\n  );\r\n}\r\n","import { Image, Page, Text, View } from \"@react-pdf/renderer\";\r\nimport Footer from \"./Footer\";\r\nimport {\r\n  bodyStyle,\r\n  h4Style,\r\n  h5Style,\r\n  PAGE_DPI,\r\n  PAGE_SIZE,\r\n  PAGE_STYLES,\r\n  POINTS_PER_CM,\r\n  SCALE,\r\n} from \"./styles\";\r\nimport html2PDF from \"../../functions/html2pdf\";\r\nimport { Trans, useTranslation } from \"react-i18next\";\r\nimport { DVRiskFile } from \"../../types/dataverse/DVRiskFile\";\r\nimport { BLACK } from \"../../functions/colors\";\r\nimport Header from \"./Header\";\r\nimport { Cascades } from \"../../functions/cascades\";\r\n\r\nexport default function EvolutionSection({\r\n  riskFile,\r\n  cascades,\r\n  climateChangeChart,\r\n}: {\r\n  riskFile: DVRiskFile;\r\n  cascades: Cascades;\r\n  climateChangeChart: string;\r\n}) {\r\n  const { t } = useTranslation();\r\n\r\n  return (\r\n    <Page\r\n      size={PAGE_SIZE}\r\n      dpi={PAGE_DPI}\r\n      style={{\r\n        ...PAGE_STYLES,\r\n        backgroundColor: \"white\",\r\n        color: BLACK,\r\n      }}\r\n    >\r\n      <Header riskFile={riskFile} />\r\n      <Footer />\r\n\r\n      <View\r\n        style={\r\n          {\r\n            // backgroundColor: \"green\"\r\n          }\r\n        }\r\n      >\r\n        <Text style={h4Style}>\r\n          <Trans i18nKey=\"risk.bottombar.riskEvolution\">Risk Evolution</Trans>\r\n        </Text>\r\n      </View>\r\n\r\n      <View\r\n        style={\r\n          {\r\n            // backgroundColor: \"green\"\r\n          }\r\n        }\r\n      >\r\n        <Text style={h5Style}>{t(\"Climate Change\", \"Climate Change\")}</Text>\r\n        <Image\r\n          src={climateChangeChart}\r\n          style={{\r\n            marginTop: 0.25 * POINTS_PER_CM,\r\n            marginLeft: \"auto\",\r\n            marginRight: \"auto\",\r\n            width: \"80%\",\r\n          }}\r\n          // debug={true}\r\n        />\r\n        {html2PDF(riskFile.cr4de_mrs_cc, \"evolution\", riskFile)}\r\n      </View>\r\n\r\n      <View\r\n        style={\r\n          {\r\n            // backgroundColor: \"green\"\r\n          }\r\n        }\r\n      >\r\n        <Text style={h5Style}>\r\n          {t(\"Other Catalysing Effects\", \"Other Catalysing Effects\")}\r\n        </Text>\r\n        {cascades.catalyzingEffects.map((c) => (\r\n          <View\r\n            key={c.cr4de_bnrariskcascadeid}\r\n            style={{ marginBottom: 10 * SCALE }}\r\n          >\r\n            <Text\r\n              style={{\r\n                ...bodyStyle,\r\n                textDecoration: \"underline\",\r\n                marginBottom: 2 * SCALE,\r\n              }}\r\n            >\r\n              {c.cr4de_cause_hazard.cr4de_title}\r\n            </Text>\r\n            {html2PDF(c.cr4de_description, \"evolution\", riskFile)}\r\n          </View>\r\n        ))}\r\n      </View>\r\n    </Page>\r\n  );\r\n}\r\n","import { Image, Page, Text, View } from \"@react-pdf/renderer\";\r\nimport Footer from \"./Footer\";\r\nimport {\r\n  h4Style,\r\n  h5Style,\r\n  PAGE_DPI,\r\n  PAGE_SIZE,\r\n  PAGE_STYLES,\r\n  POINTS_PER_CM,\r\n  SCALE,\r\n} from \"./styles\";\r\nimport html2PDF from \"../../functions/html2pdf\";\r\nimport { Trans, useTranslation } from \"react-i18next\";\r\nimport { DVRiskFile } from \"../../types/dataverse/DVRiskFile\";\r\nimport getImpactColor from \"../../functions/getImpactColor\";\r\nimport Header from \"./Header\";\r\nimport LeftBorderSection from \"./LeftBorderSection\";\r\nimport { BLACK } from \"../../functions/colors\";\r\nimport { RiskFileCharts } from \"../../functions/export/renderSVG\";\r\n// import { LoggedInUser } from \"../../hooks/useLoggedInUser\";\r\n\r\nexport default function MMAnalysisSection({\r\n  riskFile,\r\n  charts,\r\n}: {\r\n  riskFile: DVRiskFile;\r\n  charts: RiskFileCharts;\r\n  // user: LoggedInUser | null | undefined;\r\n}) {\r\n  const { t } = useTranslation();\r\n\r\n  return (\r\n    <Page\r\n      size={PAGE_SIZE}\r\n      dpi={PAGE_DPI}\r\n      style={{\r\n        ...PAGE_STYLES,\r\n        backgroundColor: \"white\",\r\n        color: BLACK,\r\n        position: \"relative\",\r\n        minHeight: 10 * POINTS_PER_CM,\r\n      }}\r\n    >\r\n      <Header riskFile={riskFile} />\r\n      <Footer />\r\n\r\n      <View\r\n        style={\r\n          {\r\n            // backgroundColor: \"green\"\r\n          }\r\n        }\r\n      >\r\n        <Text style={h4Style}>\r\n          <Trans i18nKey=\"risk.bottombar.riskAnalysis\">Risk Analysis</Trans>\r\n        </Text>\r\n      </View>\r\n\r\n      <View\r\n        style={{\r\n          // backgroundColor: \"green\"\r\n          marginLeft: -0.25 * POINTS_PER_CM,\r\n          marginRight: -0.25 * POINTS_PER_CM,\r\n          height: 12.5 * POINTS_PER_CM,\r\n        }}\r\n      >\r\n        <View\r\n          style={{\r\n            display: \"flex\",\r\n            width: \"100%\",\r\n            height: 12.5 * POINTS_PER_CM,\r\n            flexDirection: \"row\",\r\n          }}\r\n        >\r\n          <Image\r\n            src={charts.sankey.probability}\r\n            style={{\r\n              display: \"flex\",\r\n              marginTop: 0.25 * POINTS_PER_CM,\r\n              marginLeft: 0.25 * POINTS_PER_CM,\r\n              width: 6 * POINTS_PER_CM,\r\n              height: 12 * POINTS_PER_CM,\r\n            }}\r\n          />\r\n          <View\r\n            style={{\r\n              flex: 1,\r\n              flexDirection: \"column\",\r\n              marginLeft: 4 * SCALE,\r\n              justifyContent: \"center\",\r\n            }}\r\n            debug={false}\r\n          >\r\n            <Image\r\n              src={charts.sankey.impactBars}\r\n              style={{\r\n                // position: \"absolute\",\r\n                // display: \"flex\",\r\n                // width: \"4cm\",\r\n                // height: \"4cm\",\r\n                width: \"100%\",\r\n              }}\r\n              debug={false}\r\n            />\r\n          </View>\r\n          <Image\r\n            src={charts.sankey.impact}\r\n            style={{\r\n              display: \"flex\",\r\n              marginTop: 0.25 * POINTS_PER_CM,\r\n              marginLeft: 0.25 * POINTS_PER_CM,\r\n              width: 6 * POINTS_PER_CM,\r\n              height: 12 * POINTS_PER_CM,\r\n            }}\r\n          />\r\n        </View>\r\n      </View>\r\n\r\n      <View\r\n        style={{\r\n          // backgroundColor: \"green\"\r\n          marginTop: POINTS_PER_CM,\r\n          marginBottom: POINTS_PER_CM,\r\n        }}\r\n      >\r\n        <Text style={h5Style}>{t(\"Probability Assessment\")}</Text>\r\n        <LeftBorderSection\r\n          color=\"#eee\"\r\n          style={{ paddingTop: 5 * SCALE, marginBottom: 10 * SCALE }}\r\n        >\r\n          {html2PDF(riskFile.cr4de_mrs_probability, \"analysis\", riskFile)}\r\n        </LeftBorderSection>\r\n      </View>\r\n\r\n      <View\r\n        style={{\r\n          // backgroundColor: \"green\"\r\n          marginTop: POINTS_PER_CM,\r\n          marginBottom: POINTS_PER_CM,\r\n        }}\r\n      >\r\n        <Text style={h5Style}>{t(\"Preferred Malicious Actions\")}</Text>\r\n        <LeftBorderSection color={getImpactColor(\"H\")}>\r\n          {/* <Text\r\n            style={{\r\n              ...h5Style,\r\n              color: getImpactColor(\"H\"),\r\n              marginTop: \"0pt\",\r\n              marginBottom: 5 * SCALE,\r\n            }}\r\n          >\r\n            {t(\"learning.impact.h.title\")}\r\n          </Text> */}\r\n          {html2PDF(riskFile.cr4de_mrs_actions, \"analysis\", riskFile)}\r\n        </LeftBorderSection>\r\n      </View>\r\n\r\n      <View\r\n        style={{\r\n          // backgroundColor: \"green\"\r\n          marginTop: POINTS_PER_CM,\r\n          marginBottom: POINTS_PER_CM,\r\n        }}\r\n      >\r\n        <Text style={h5Style}>{t(\"Other Impactful Actions\")}</Text>\r\n        <LeftBorderSection color={getImpactColor(\"S\")}>\r\n          {html2PDF(riskFile.cr4de_mrs_mm_impact, \"analysis\", riskFile)}\r\n        </LeftBorderSection>\r\n      </View>\r\n    </Page>\r\n  );\r\n}\r\n","import { Page, Text, View } from \"@react-pdf/renderer\";\r\nimport Footer from \"./Footer\";\r\nimport {\r\n  h3Style,\r\n  h4Style,\r\n  h5Style,\r\n  PAGE_DPI,\r\n  PAGE_SIZE,\r\n  PAGE_STYLES,\r\n  SCALE,\r\n} from \"./styles\";\r\nimport html2PDF from \"../../functions/html2pdf\";\r\nimport { Trans, useTranslation } from \"react-i18next\";\r\nimport { DVRiskFile } from \"../../types/dataverse/DVRiskFile\";\r\nimport LeftBorderSection from \"./LeftBorderSection\";\r\nimport { BLACK } from \"../../functions/colors\";\r\n// import { LoggedInUser } from \"../../hooks/useLoggedInUser\";\r\n\r\nexport default function EmergingDescriptionSection({\r\n  riskFile,\r\n}: {\r\n  riskFile: DVRiskFile;\r\n}) {\r\n  const { t } = useTranslation();\r\n\r\n  return (\r\n    <Page\r\n      size={PAGE_SIZE}\r\n      dpi={PAGE_DPI}\r\n      style={{\r\n        ...PAGE_STYLES,\r\n        backgroundColor: \"white\",\r\n        color: BLACK,\r\n      }}\r\n    >\r\n      <Footer />\r\n      <View>\r\n        <Text style={h3Style}>\r\n          {t(`risk.${riskFile.cr4de_hazard_id}.name`, riskFile.cr4de_title)}\r\n        </Text>\r\n        <Text style={h4Style}>\r\n          <Trans i18nKey=\"risk.bottombar.riskIdentification\">\r\n            Risk Description\r\n          </Trans>\r\n        </Text>\r\n      </View>\r\n\r\n      <View\r\n        style={\r\n          {\r\n            // backgroundColor: \"green\"\r\n          }\r\n        }\r\n      >\r\n        <Text style={h5Style}>\r\n          <Trans i18nKey=\"riskFile.definition.title\">Definition</Trans>\r\n        </Text>\r\n        <LeftBorderSection\r\n          color=\"#eee\"\r\n          style={{ paddingTop: 5 * SCALE, marginBottom: 10 * SCALE }}\r\n        >\r\n          {html2PDF(riskFile.cr4de_definition, \"description\", riskFile)}\r\n          <View\r\n            style={{ marginTop: -5 * SCALE, width: \"100%\", height: \"1pt\" }}\r\n          />\r\n        </LeftBorderSection>\r\n      </View>\r\n\r\n      <View\r\n        style={\r\n          {\r\n            // backgroundColor: \"green\"\r\n          }\r\n        }\r\n      >\r\n        <Text style={h5Style}>\r\n          <Trans i18nKey=\"Horizon Analysis\">Horizon Analysis</Trans>\r\n        </Text>\r\n        <LeftBorderSection\r\n          color=\"#eee\"\r\n          style={{ paddingTop: 5 * SCALE, marginBottom: 10 * SCALE }}\r\n        >\r\n          {html2PDF(riskFile.cr4de_horizon_analysis, \"description\", riskFile)}\r\n          <View\r\n            style={{ marginTop: -5 * SCALE, width: \"100%\", height: \"1pt\" }}\r\n          />\r\n        </LeftBorderSection>\r\n      </View>\r\n    </Page>\r\n  );\r\n}\r\n","import { Document } from \"@react-pdf/renderer\";\r\nimport FrontPage from \"./FrontPage\";\r\nimport { DVRiskFile, RISK_TYPE } from \"../../types/dataverse/DVRiskFile\";\r\nimport { Cascades } from \"../../functions/cascades\";\r\nimport { DVAttachment } from \"../../types/dataverse/DVAttachment\";\r\nimport { RiskFileCharts, SVGImages } from \"../../functions/export/renderSVG\";\r\n\r\nimport \"./fonts\";\r\nimport { getScenarioParameter, SCENARIOS } from \"../../functions/scenarios\";\r\nimport { getCategoryImpactRescaled } from \"../../functions/CategoryImpact\";\r\nimport SummarySection from \"./SummarySection\";\r\nimport DescriptionSection from \"./DescriptionSection\";\r\nimport AnalysisSection from \"./AnalysisSection\";\r\nimport EvolutionSection from \"./EvolutionSection\";\r\nimport BibliographySection, {\r\n  getSpecificAttachments,\r\n} from \"./BibliographySection\";\r\nimport { LoggedInUser } from \"../../hooks/useLoggedInUser\";\r\nimport MMAnalysisSection from \"./MMAnalysisSection\";\r\nimport EmergingDescriptionSection from \"./EmergingDescriptionSection\";\r\n\r\nexport type RiskFilePDFProps = {\r\n  riskFile: DVRiskFile;\r\n  cascades: Cascades;\r\n  attachments: DVAttachment<unknown, unknown, DVRiskFile>[] | null;\r\n  user?: LoggedInUser | null | undefined;\r\n  charts: RiskFileCharts | null;\r\n  // hazardCatalogue: SmallRisk[] | null;\r\n  // cascades: Cascades;\r\n};\r\n\r\nexport default function RiskFileExport({\r\n  toExport,\r\n  allCascades,\r\n  allAttachments,\r\n  svgImages,\r\n}: {\r\n  toExport: DVRiskFile[];\r\n  allCascades: { [key: string]: Cascades };\r\n  allAttachments: DVAttachment<unknown, unknown, DVRiskFile>[];\r\n  svgImages: SVGImages;\r\n}) {\r\n  const svgRisks = toExport.map((rf, i) => ({\r\n    ...rf,\r\n    charts: svgImages.riskFiles[i],\r\n  }));\r\n\r\n  return (\r\n    <Document>\r\n      <FrontPage\r\n        nccnLogo={svgImages.nccnLogo}\r\n        bnraLogo={svgImages.bnraLogo}\r\n        triangles={svgImages.triangles}\r\n      />\r\n      {svgRisks.map((rf) => (\r\n        <RiskFilePDF\r\n          key={rf.cr4de_riskfilesid}\r\n          riskFile={rf}\r\n          cascades={allCascades[rf.cr4de_riskfilesid]}\r\n          attachments={allAttachments.filter(\r\n            (a) => a.cr4de_risk_file?.cr4de_riskfilesid === rf.cr4de_riskfilesid\r\n          )}\r\n          // user={user}\r\n          charts={rf.charts}\r\n        />\r\n      ))}\r\n    </Document>\r\n  );\r\n}\r\n\r\nexport function RiskFilePDF({\r\n  riskFile,\r\n  cascades,\r\n  user = null,\r\n  charts,\r\n  attachments,\r\n}: RiskFilePDFProps) {\r\n  if (riskFile.cr4de_risk_type === RISK_TYPE.STANDARD && charts) {\r\n    const scenario = riskFile.cr4de_mrs || SCENARIOS.CONSIDERABLE;\r\n\r\n    const tp = getScenarioParameter(riskFile, \"TP\", scenario) || 0;\r\n\r\n    const H = getCategoryImpactRescaled(riskFile, \"H\", scenario);\r\n    const S = getCategoryImpactRescaled(riskFile, \"S\", scenario);\r\n    const E = getCategoryImpactRescaled(riskFile, \"E\", scenario);\r\n    const F = getCategoryImpactRescaled(riskFile, \"F\", scenario);\r\n\r\n    return (\r\n      <>\r\n        <SummarySection\r\n          riskFile={riskFile}\r\n          tp={tp}\r\n          H={H}\r\n          S={S}\r\n          E={E}\r\n          F={F}\r\n          user={user}\r\n          charts={charts.summary}\r\n        />\r\n        <DescriptionSection\r\n          riskFile={riskFile}\r\n          // user={user}\r\n          scenarioChart={charts.scenarioChart}\r\n        />\r\n        <AnalysisSection riskFile={riskFile} charts={charts} />\r\n        <EvolutionSection\r\n          riskFile={riskFile}\r\n          cascades={cascades}\r\n          climateChangeChart={charts.climateChange}\r\n        />\r\n        {attachments !== null && (\r\n          <BibliographySection\r\n            riskFile={riskFile}\r\n            allAttachments={getSpecificAttachments(attachments)}\r\n            // user={user}\r\n          />\r\n        )}\r\n      </>\r\n    );\r\n  }\r\n\r\n  if (riskFile.cr4de_risk_type === RISK_TYPE.MANMADE && charts) {\r\n    const scenario = riskFile.cr4de_mrs || SCENARIOS.CONSIDERABLE;\r\n\r\n    const tp = getScenarioParameter(riskFile, \"TP\", scenario) || 0;\r\n\r\n    const H = getCategoryImpactRescaled(riskFile, \"H\", scenario);\r\n    const S = getCategoryImpactRescaled(riskFile, \"S\", scenario);\r\n    const E = getCategoryImpactRescaled(riskFile, \"E\", scenario);\r\n    const F = getCategoryImpactRescaled(riskFile, \"F\", scenario);\r\n\r\n    return (\r\n      <>\r\n        <SummarySection\r\n          riskFile={riskFile}\r\n          tp={tp}\r\n          H={H}\r\n          S={S}\r\n          E={E}\r\n          F={F}\r\n          user={user}\r\n          charts={charts.summary}\r\n        />\r\n        <DescriptionSection\r\n          riskFile={riskFile}\r\n          // user={user}\r\n          scenarioChart={charts.scenarioChart}\r\n        />\r\n        <MMAnalysisSection riskFile={riskFile} charts={charts} />\r\n      </>\r\n    );\r\n  }\r\n\r\n  if (riskFile.cr4de_risk_type === RISK_TYPE.EMERGING) {\r\n    return (\r\n      <>\r\n        <EmergingDescriptionSection\r\n          riskFile={riskFile}\r\n          // user={user}\r\n        />\r\n        {/* <AnalysisSection riskFile={riskFile} charts={charts} /> */}\r\n      </>\r\n    );\r\n  }\r\n  return null;\r\n}\r\n","// import { Cascades } from \"../../pages/BaseRisksPage\";\r\n// import { DVAttachment } from \"../../types/dataverse/DVAttachment\";\r\nimport { DVAttachment } from \"../../types/dataverse/DVAttachment\";\r\nimport {\r\n  DVRiskFile,\r\n  RISK_CATEGORY,\r\n  RISK_TYPE,\r\n} from \"../../types/dataverse/DVRiskFile\";\r\n// import BibliographySection from \"./BibliographySection\";\r\nimport { Document, Page } from \"@react-pdf/renderer\";\r\n\r\nimport \"./fonts\";\r\nimport { DPI, PAGE_SIZE } from \"./styles\";\r\nimport { NCCN_GREEN } from \"../../functions/colors\";\r\nimport { SVGImages } from \"../../functions/export/renderSVG\";\r\nimport CategoryFrontPage from \"./CategoryFrontPage\";\r\nimport { Cascades } from \"../../functions/cascades\";\r\nimport BibliographySection, {\r\n  getSpecificAttachments,\r\n} from \"./BibliographySection\";\r\nimport { RiskFilePDF } from \"./RiskFilePDF\";\r\nimport FrontPage from \"./FrontPage\";\r\n\r\nconst categories: (RISK_TYPE.MANMADE | RISK_CATEGORY)[] = [\r\n  RISK_TYPE.MANMADE,\r\n  RISK_CATEGORY.MANMADE,\r\n  RISK_CATEGORY.CYBER,\r\n  RISK_CATEGORY.TRANSVERSAL,\r\n  RISK_CATEGORY.ECOTECH,\r\n  RISK_CATEGORY.HEALTH,\r\n  RISK_CATEGORY.NATURE,\r\n  RISK_CATEGORY.EMERGING,\r\n];\r\n\r\nexport function BNRAExport({\r\n  riskFiles,\r\n  allCascades,\r\n  allAttachments,\r\n  svgImages,\r\n}: {\r\n  riskFiles: DVRiskFile[];\r\n  allCascades: { [key: string]: Cascades };\r\n  allAttachments: DVAttachment<unknown, unknown, DVRiskFile>[];\r\n  svgImages: SVGImages;\r\n}) {\r\n  const svgRisks = riskFiles.map((rf, i) => ({\r\n    ...rf,\r\n    charts: svgImages.riskFiles[i],\r\n  }));\r\n\r\n  return (\r\n    <Document>\r\n      <FrontPage\r\n        nccnLogo={svgImages.nccnLogo}\r\n        bnraLogo={svgImages.bnraLogo}\r\n        triangles={svgImages.triangles}\r\n      />\r\n      {categories.map((c) => (\r\n        <>\r\n          <CategoryFrontPage category={c} />\r\n          {svgRisks\r\n            .filter(\r\n              (rf) =>\r\n                rf.cr4de_risk_type === c ||\r\n                (rf.cr4de_risk_type !== RISK_TYPE.MANMADE &&\r\n                  rf.cr4de_risk_category === c)\r\n            )\r\n            .sort((a, b) => a.cr4de_hazard_id.localeCompare(b.cr4de_hazard_id))\r\n            .map((riskFile) => {\r\n              return (\r\n                <RiskFilePDF\r\n                  key={riskFile.cr4de_riskfilesid}\r\n                  riskFile={riskFile}\r\n                  cascades={allCascades[riskFile.cr4de_riskfilesid]}\r\n                  attachments={null}\r\n                  // user={user}\r\n                  charts={riskFile.charts}\r\n                />\r\n              );\r\n            })}\r\n        </>\r\n      ))}\r\n      <BibliographySection\r\n        riskFile={null}\r\n        allAttachments={getSpecificAttachments(allAttachments)}\r\n      />\r\n      <Page\r\n        size={PAGE_SIZE}\r\n        style={{\r\n          backgroundColor: NCCN_GREEN,\r\n        }}\r\n        dpi={DPI}\r\n      ></Page>\r\n    </Document>\r\n  );\r\n}\r\n","import { createElement } from \"react\";\r\nimport { DVRiskFile } from \"../../types/dataverse/DVRiskFile\";\r\nimport i18n from \"i18next\";\r\nimport { initReactI18next } from \"react-i18next\";\r\nimport DataverseBackend from \"../i18Backend\";\r\nimport renderSVG from \"./renderSVG\";\r\nimport { DVRiskCascade } from \"../../types/dataverse/DVRiskCascade\";\r\nimport { SmallRisk } from \"../../types/dataverse/DVSmallRisk\";\r\nimport { Cascades, getCascades } from \"../cascades\";\r\nimport { DVAttachment } from \"../../types/dataverse/DVAttachment\";\r\nimport { BNRAExport } from \"../../components/export/BNRAExport\";\r\nimport RiskFileExport from \"../../components/export/RiskFilePDF\";\r\n\r\nexport enum EXPORT_TYPE {\r\n  ALL = \"ALL\",\r\n  SINGLE = \"SINGLE\",\r\n  DATA = \"DATA\",\r\n}\r\n\r\ni18n\r\n  // pass the i18n instance to react-i18next.\r\n  .use(initReactI18next)\r\n  // init i18next\r\n  // for all options read: https://www.i18next.com/overview/configuration-options\r\n  .use(new DataverseBackend())\r\n  .init({\r\n    lng: \"en\",\r\n    debug: false,\r\n    fallbackLng: \"en\",\r\n    saveMissing: true,\r\n    load: \"languageOnly\",\r\n    interpolation: {\r\n      escapeValue: false, // not needed for react as it escapes by default\r\n    },\r\n    react: {\r\n      useSuspense: false,\r\n    },\r\n  });\r\n\r\nexport const renderPDF = async ({\r\n  exportType,\r\n  exportedRiskFiles,\r\n  riskFiles,\r\n  allCascades,\r\n  allAttachments,\r\n  onProgress,\r\n}: {\r\n  exportType: EXPORT_TYPE;\r\n  exportedRiskFiles: DVRiskFile[];\r\n  riskFiles: DVRiskFile[];\r\n  allCascades: DVRiskCascade[];\r\n  allAttachments: DVAttachment[];\r\n  onProgress: (message: string) => void;\r\n}) => {\r\n  onProgress(\"Start PDF rendering process...\");\r\n  const { pdf } = await import(\"@react-pdf/renderer\");\r\n\r\n  try {\r\n    const hc: { [key: string]: DVRiskFile } = riskFiles.reduce(\r\n      (acc, sr) => ({ ...acc, [sr.cr4de_riskfilesid]: sr }),\r\n      {}\r\n    );\r\n    const riskCascades: DVRiskCascade<SmallRisk, SmallRisk>[] = allCascades.map(\r\n      (c) => ({\r\n        ...c,\r\n        cr4de_cause_hazard: hc[c._cr4de_cause_hazard_value],\r\n        cr4de_effect_hazard: hc[c._cr4de_effect_hazard_value],\r\n      })\r\n    );\r\n\r\n    const cascades: { [key: string]: Cascades } = riskFiles.reduce(\r\n      (acc, rf) => getCascades(rf, acc, hc)(riskCascades),\r\n      {}\r\n    );\r\n\r\n    const svgImages = await renderSVG(\r\n      exportType === EXPORT_TYPE.ALL ? riskFiles : exportedRiskFiles,\r\n      cascades\r\n    );\r\n\r\n    onProgress(\"Rendering charts complete.\");\r\n\r\n    let doc: Promise<Blob>;\r\n\r\n    if (exportType === EXPORT_TYPE.ALL) {\r\n      doc = pdf(\r\n        createElement(BNRAExport, {\r\n          riskFiles,\r\n          allCascades: cascades,\r\n          allAttachments: allAttachments.map((a) => ({\r\n            ...a,\r\n            cr4de_risk_file: a._cr4de_risk_file_value\r\n              ? hc[a._cr4de_risk_file_value]\r\n              : null,\r\n          })),\r\n          svgImages,\r\n          // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        }) as any\r\n      ).toBlob();\r\n    } else if (exportType === EXPORT_TYPE.SINGLE) {\r\n      doc = pdf(\r\n        createElement(RiskFileExport, {\r\n          toExport: exportedRiskFiles,\r\n          allCascades: cascades,\r\n          svgImages,\r\n          allAttachments: allAttachments.map((a) => ({\r\n            ...a,\r\n            cr4de_risk_file: a._cr4de_risk_file_value\r\n              ? hc[a._cr4de_risk_file_value]\r\n              : null,\r\n          })),\r\n          // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        }) as any\r\n      ).toBlob();\r\n    } else {\r\n      doc = new Promise<Blob>((resolve) => resolve(new Blob()));\r\n    }\r\n\r\n    onProgress(\"Rendering complete\");\r\n    onProgress(\"Opening preview...\");\r\n\r\n    return doc;\r\n  } catch (e) {\r\n    console.log(\"Rendering error\", e);\r\n\r\n    return null;\r\n  }\r\n};\r\n","/* eslint-disable no-restricted-globals */\r\nimport exportExcel from \"./exportExcel\";\r\nimport { EXPORT_TYPE, renderPDF } from \"./renderPDF\";\r\n\r\n/* @ts-expect-error any */\r\nif (import.meta.webpackHot) {\r\n  /* @ts-expect-error any */\r\n  import.meta.webpackHot.accept();\r\n}\r\n\r\nself.onmessage = async (event: MessageEvent) => {\r\n  console.log(event.data);\r\n\r\n  if (event.data.exportType === EXPORT_TYPE.ALL) {\r\n    self.postMessage({ type: \"progress\", message: \"Exporting all risk files\" });\r\n  } else {\r\n    self.postMessage({\r\n      type: \"progress\",\r\n      message: `Exporting ${event.data.exportedRiskFiles.length} risk file${\r\n        event.data.exportedRiskFiles.length > 1 ? \"s\" : \"\"\r\n      }`,\r\n    });\r\n  }\r\n\r\n  const onProgress = (message: string) => {\r\n    self.postMessage({\r\n      type: \"progress\",\r\n      message,\r\n    });\r\n  };\r\n\r\n  let blob;\r\n\r\n  if (event.data.exportType === EXPORT_TYPE.DATA) {\r\n    blob = await exportExcel({\r\n      exportedRiskFiles: event.data.exportedRiskFiles,\r\n      riskFiles: event.data.riskFiles,\r\n      allCascades: event.data.cascades,\r\n      onProgress,\r\n    });\r\n  } else {\r\n    blob = await renderPDF({\r\n      exportType: event.data.exportType,\r\n      exportedRiskFiles: event.data.exportedRiskFiles,\r\n      riskFiles: event.data.riskFiles,\r\n      allCascades: event.data.cascades,\r\n      allAttachments: event.data.attachments,\r\n      onProgress,\r\n    });\r\n  }\r\n\r\n  self.postMessage({\r\n    type: \"result\",\r\n    fileType: event.data.exportType === EXPORT_TYPE.DATA ? \"excel\" : \"pdf\",\r\n    value: blob,\r\n  });\r\n};\r\n\r\nexport {};\r\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\tloaded: false,\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Flag the module as loaded\n\tmodule.loaded = true;\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n// the startup function\n__webpack_require__.x = function() {\n\t// Load entry module and return exports\n\t// This entry module depends on other loaded chunks and execution need to be delayed\n\tvar __webpack_exports__ = __webpack_require__.O(undefined, [437], function() { return __webpack_require__(30693); })\n\t__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n\treturn __webpack_exports__;\n};\n\n","var deferred = [];\n__webpack_require__.O = function(result, chunkIds, fn, priority) {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar chunkIds = deferred[i][0];\n\t\tvar fn = deferred[i][1];\n\t\tvar priority = deferred[i][2];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every(function(key) { return __webpack_require__.O[key](chunkIds[j]); })) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.f = {};\n// This file contains only the entry chunk.\n// The chunk loading function for additional chunks\n__webpack_require__.e = function(chunkId) {\n\treturn Promise.all(Object.keys(__webpack_require__.f).reduce(function(promises, key) {\n\t\t__webpack_require__.f[key](chunkId, promises);\n\t\treturn promises;\n\t}, []));\n};","// This function allow to reference async chunks and sibling chunks for the entrypoint\n__webpack_require__.u = function(chunkId) {\n\t// return url for filenames based on template\n\treturn \"static/js/\" + chunkId + \".\" + \"c6ee0e54\" + \".chunk.js\";\n};","// This function allow to reference async chunks and sibling chunks for the entrypoint\n__webpack_require__.miniCssF = function(chunkId) {\n\t// return url for filenames based on template\n\treturn undefined;\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// define __esModule on exports\n__webpack_require__.r = function(exports) {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.nmd = function(module) {\n\tmodule.paths = [];\n\tif (!module.children) module.children = [];\n\treturn module;\n};","__webpack_require__.p = \"https://raw.githack.com/NCCN-CIPRA/cipra-bnra/main/build/\";","// no baseURI\n\n// object to store loaded chunks\n// \"1\" means \"already loaded\"\nvar installedChunks = {\n\t531: 1\n};\n\n// importScripts chunk loading\nvar installChunk = function(data) {\n\tvar chunkIds = data[0];\n\tvar moreModules = data[1];\n\tvar runtime = data[2];\n\tfor(var moduleId in moreModules) {\n\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t}\n\t}\n\tif(runtime) runtime(__webpack_require__);\n\twhile(chunkIds.length)\n\t\tinstalledChunks[chunkIds.pop()] = 1;\n\tparentChunkLoadingFunction(data);\n};\n__webpack_require__.f.i = function(chunkId, promises) {\n\t// \"1\" is the signal for \"already loaded\"\n\tif(!installedChunks[chunkId]) {\n\t\tif(true) { // all chunks have JS\n\t\t\timportScripts(__webpack_require__.p + __webpack_require__.u(chunkId));\n\t\t}\n\t}\n};\n\nvar chunkLoadingGlobal = self[\"webpackChunkcipra_bnra\"] = self[\"webpackChunkcipra_bnra\"] || [];\nvar parentChunkLoadingFunction = chunkLoadingGlobal.push.bind(chunkLoadingGlobal);\nchunkLoadingGlobal.push = installChunk;\n\n// no HMR\n\n// no HMR manifest","var next = __webpack_require__.x;\n__webpack_require__.x = function() {\n\treturn __webpack_require__.e(437).then(next);\n};","// run startup\nvar __webpack_exports__ = __webpack_require__.x();\n"],"names":["SCENARIOS","SCENARIO_PARAMS","CONSIDERABLE","titleI18N","titleDefault","color","prefix","MAJOR","EXTREME","RISK_TYPE","getScenarioSuffix","scenario","getScenarioParameter","rf","parameter","results","cascadeScenarios","considerable","major","extreme","getCascadeParameter","cascade","mainScenario","indexOf","slice","RISK_CATEGORY","RISK_TYPE_NAMES","STANDARD","MANMADE","EMERGING","CONSENSUS_TYPE","CATEGORY_NAMES","Cyber","EcoTech","Health","Nature","Transversal","getCausesWithDP","riskFile","cascades","name","p","causes","map","c","id","cr4de_cause_hazard","cr4de_riskfilesid","cr4de_hazard_id","getEffectsWithDI","i","iH","iS","iE","iF","effects","e","cr4de_effect_hazard","Pareto","getCascades","cs","hc","rcResult","hazardCatalogue","filter","_cr4de_effect_hazard_value","_cr4de_cause_hazard_value","cr4de_risk_type","getCauses","getEffects","catalyzingEffects","includeClimateChange","cr4de_title","getCatalyzingEffects","climateChange","find","getClimateChange","all","exportExcel","exportedRiskFiles","riskFiles","allCascades","onProgress","reduce","acc","sr","riskCascades","workbook","xlsx","addRiskFile","excelBuffer","bookType","type","Blob","Error","s","sort","a","b","pCumul","prevC","causeId","causeTitle","t","pareto","SIGNIFICANT","OTHER","pRank","pAbs","Math","round","pPerc","iTotCumul","iCumul","iHCumul","iSCumul","iECumul","iFCumul","iTot","effectId","effectTitle","iTotPareto","iTotRank","iTotAbs","iTotPerc","iHPareto","iHRank","iHAbs","iHPerc","iSPareto","iSRank","iSAbs","iSPerc","iEPareto","iERank","iEAbs","iEPerc","iFPareto","iFRank","iFAbs","iFPerc","PSheet","ISheet","DataverseBackend","translations","this","Promise","resolve","fetch","response","json","allTranslations","value","loadedTranslations","en","nl","fr","de","forEach","cr4de_en","cr4de_name","cr4de_nl","cr4de_fr","cr4de_de","language","namespace","callback","languages","key","fallbackValue","method","headers","__RequestVerificationToken","localStorage","getItem","body","JSON","stringify","preset","presets","DOMParser","svg2PDF","jsxChart","width","height","svgString","renderToString","canvas","OffscreenCanvas","context","getContext","v","Canvg","trim","render","globalCompositeOperation","fillStyle","fillRect","convertToBlob","quality","blob","dataUri","URL","createObjectURL","console","error","arrow","cy","arrowWidth","graphWidth","x0","y0","xa","ya","xb","yb","xc","yc","d","stroke","fill","ProbabilityBarsChart","tp","chartWidth","BarChart","data","uv","pv","style","YAxis","domain","hide","Bar","dataKey","stackId","BASE_TOTAL_IMPACT","BASE_CATEGORY_IMPACT","getCategoryImpactAbsolute","category","relativeImpact","totalImpactRelative","totalImpactAbsolute","pow","rescaleImpact","getCategoryImpactRescaled","totalImpact","log10","getDamageIndicatorToCategoryImpactRatio","di","diImpact","categoryImpact","getImpactColor","impactPrefix","DAMAGE_INDICATOR_COLORS","Ha","Hb","Hc","H","Sa","Sb","Sc","Sd","S","Ea","E","Fa","Fb","F","_defs","IMPACT_COLOR_SCALES","RADIAN","PI","getBars","impact","needle","cx","iR","oR","padding","needleWidth","total","ang","length","sin","cos","r","xp","yp","strokeWidth","SummaryImpactChart","piePadding","min","PieChart","Pie","startAngle","endAngle","innerRadius","outerRadius","paddingAngle","entry","index","Cell","_excluded","_extends","Object","assign","bind","target","arguments","source","prototype","hasOwnProperty","call","apply","_objectWithoutProperties","excluded","sourceKeys","keys","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","SvgBnraLogo","_ref","svgRef","title","titleId","props","viewBox","ref","clipPathUnits","transform","clipPath","fillOpacity","fillRule","_style","_g","_polygon","_polygon2","_polygon3","_polygon4","_polygon5","ForwardRef","SvgNccnLogo","xmlns","xmlnsXlink","x","y","enableBackground","xmlSpace","className","points","SvgTrianglesDetail","backgroundColor","NCCN_GREEN","BLACK","ScenarioMatrixChart","mrs","fontSize","radius","CustomTooltip","useTranslation","z","ScatterChart","margin","top","right","bottom","left","float","overflow","x1","y1","x2","y2","offset","stopColor","stopOpacity","CartesianGrid","ticks","unit","label","angle","position","XAxis","scale","ZAxis","range","Tooltip","cursor","strokeDasharray","content","Scatter","hex","alpha","parseInt","colors","getCategoryColor","n","digits","m","replace","baseY","PSankeyNode","payload","totalProbability","totalNodes","onClick","onNavigate","depth","Layer","Rectangle","textAnchor","PSankeyLink","targetRelativeY","sourceX","sourceY","sourceControlX","targetX","targetY","targetControlX","linkWidth","shiftedTargetY","strokeOpacity","ProbabilitySankyChart","maxCauses","minCausePortion","shownCausePortion","debug","minP","Ptot","tot","cumulP","nodes","otherCauses","push","hidden","links","max","ResponsiveContainer","Sankey","node","showComponents","scenarioSuffix","link","nodePadding","iterations","ISankeyNode","ISankeyLink","sourceRelativeY","shiftedSourceY","ImpactSankeyChart","maxEffects","minEffectPortion","shownEffectPortion","minI","Itot","cumulI","ImpactBarChart","Ha_abs","Hb_abs","Hc_abs","Sa_abs","Sb_abs","Sc_abs","Sd_abs","Ea_abs","Fa_abs","Fb_abs","dx","dy","interval","ClimateChangeChart","xLabelDy","useMemo","dTPAvg","abs","enhCauses","p_c","p2050_c","p_m","p2050_m","p_e","p2050_e","cumulCauses","tp50_c","tp50_m","tp50_e","tp_c","tp_m","tp_e","P2023_c","P2050_c_inc","P2050_c_dec","P2023_m","P2050_m_inc","P2050_m_dec","P2023_e","P2050_e_inc","P2050_e_dec","cause","layout","barCategoryGap","formatter","Legend","align","verticalAlign","wrapperStyle","paddingTop","barSize","legendType","gsp","gcp","getIndirectImpact","cp","ha","hb","sa","sb","sc","sd","ea","fa","fb","h","f","quali","cr4de_quali","quali_cause","cr4de_quali_cause","ActionsSankeyChart","maxActions","minActionPortion","shownActionPortion","actions","totP","otherActions","renderSVG","renderRFCharts","nccnLogo","bnraLogo","triangles","cr4de_mrs","pBarChartURI","hChartURI","sChartURI","eChartURI","fChartURI","manmade","probability","impactBars","summary","scenarioChart","sankey","Font","family","fonts","src","Robo100","fontWeight","Robo100i","fontStyle","Robo200","Robo200i","Robo300","Robo300i","Robo400","Robo400i","Robo500","Robo500i","Robo600","Robo600i","Robo700","Robo700i","Robo800","Robo800i","Robo900","Robo900i","word","DPI","SCALE","POINTS_PER_CM","PAGE_SIZE","PAGE_DPI","PAGE_STYLES","paddingBottom","h2Style","fontFamily","h3Style","marginBottom","h4Style","h5Style","marginTop","bodyStyle","lineHeight","boldStyle","smallStyle","italicStyle","SPLASH","SPLASH_STYLE","PAGE_HEIGHT","aspectRatio","Test","CategoryFrontPage","Page","size","dpi","View","opacity","zIndex","Image","flexDirection","justifyContent","alignItems","Text","Footer","fixed","display","pageNumber","getSpecificAttachments","attachments","cr4de_reference","cr4de_risk_file","localeCompare","BibliographySection","allAttachments","Trans","i18nKey","flex","wrap","textAlign","cr4de_bnraattachmentid","cr4de_url","textDecoration","paddingLeft","hyphenationCallback","url","split","FrontPage","paddingRight","parseTag","html","currentHtml","currentTagEnd","nextTagStart","nestedTags","tagName","tagOptions","nestedTag","closingTagIndex","tagNameEnd","contentIndex","tag2PDF","tag","parent","section","txt","styles","replaceAll","some","percIndex","percPart","otherPart","marginLeft","li","borderRadius","marginRight","html2PDF","getScaleString","getSummary","rawLanguage","lan","toLowerCase","getLanguage","cr4de_mrs_summary_nl","cr4de_mrs_summary_fr","cr4de_mrs_summary_de","cr4de_mrs_summary","Watermark","user","w","emailaddress1","SummarySection","charts","titleStyle","imageStyle","scaleStyle","border","borderWidth","borderColor","i18next","roles","analist","Header","LeftBorderSection","children","DescriptionSection","events","historicalEvents","parse","uuidv4","tableString","event","location","time","description","unwrapHE","cr4de_historical_events","colorList","values","mrs_description","cr4de_mrs_scenario","cr4de_definition","flexShrink","rowGap","AnalysisSection","minHeight","cr4de_mrs_probability","cr4de_mrs_impact_h","cr4de_mrs_impact_s","cr4de_mrs_impact_e","cr4de_mrs_impact_f","EvolutionSection","climateChangeChart","cr4de_mrs_cc","cr4de_description","cr4de_bnrariskcascadeid","MMAnalysisSection","cr4de_mrs_actions","cr4de_mrs_mm_impact","EmergingDescriptionSection","cr4de_horizon_analysis","RiskFileExport","toExport","svgImages","svgRisks","Document","RiskFilePDF","EXPORT_TYPE","categories","CYBER","TRANSVERSAL","ECOTECH","HEALTH","NATURE","BNRAExport","cr4de_risk_category","i18n","initReactI18next","use","init","lng","fallbackLng","saveMissing","load","interpolation","escapeValue","react","useSuspense","renderPDF","exportType","pdf","ALL","doc","createElement","_cr4de_risk_file_value","toBlob","SINGLE","log","self","onmessage","postMessage","message","DATA","fileType","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","exports","module","loaded","__webpack_modules__","__webpack_exports__","O","deferred","result","chunkIds","fn","priority","notFulfilled","Infinity","fulfilled","j","every","splice","getter","__esModule","definition","o","defineProperty","enumerable","get","chunkId","promises","u","miniCssF","g","globalThis","Function","window","obj","prop","Symbol","toStringTag","nmd","paths","installedChunks","importScripts","chunkLoadingGlobal","parentChunkLoadingFunction","moreModules","runtime","pop","next","then"],"sourceRoot":""}