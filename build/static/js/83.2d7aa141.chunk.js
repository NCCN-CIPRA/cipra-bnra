!function(){"use strict";function _(i){return _="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(_){return typeof _}:function(_){return _&&"function"==typeof Symbol&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _},_(i)}function i(i){var e=function(i,e){if("object"!==_(i)||null===i)return i;var c=i[Symbol.toPrimitive];if(void 0!==c){var t=c.call(i,e||"default");if("object"!==_(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(i)}(i,"string");return"symbol"===_(e)?e:String(e)}function e(_,e,c){return(e=i(e))in _?Object.defineProperty(_,e,{value:c,enumerable:!0,configurable:!0,writable:!0}):_[e]=c,_}function c(_,i){var e=Object.keys(_);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(_);i&&(c=c.filter((function(i){return Object.getOwnPropertyDescriptor(_,i).enumerable}))),e.push.apply(e,c)}return e}function t(_){for(var i=1;i<arguments.length;i++){var t=null!=arguments[i]?arguments[i]:{};i%2?c(Object(t),!0).forEach((function(i){e(_,i,t[i])})):Object.getOwnPropertyDescriptors?Object.defineProperties(_,Object.getOwnPropertyDescriptors(t)):c(Object(t)).forEach((function(i){Object.defineProperty(_,i,Object.getOwnPropertyDescriptor(t,i))}))}return _}function r(_,i){(null==i||i>_.length)&&(i=_.length);for(var e=0,c=new Array(i);e<i;e++)c[e]=_[e];return c}function a(_){return function(_){if(Array.isArray(_))return r(_)}(_)||function(_){if("undefined"!==typeof Symbol&&null!=_[Symbol.iterator]||null!=_["@@iterator"])return Array.from(_)}(_)||function(_,i){if(_){if("string"===typeof _)return r(_,i);var e=Object.prototype.toString.call(_).slice(8,-1);return"Object"===e&&_.constructor&&(e=_.constructor.name),"Map"===e||"Set"===e?Array.from(_):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?r(_,i):void 0}}(_)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var n,d;!function(_){_.CONSIDERABLE="considerable",_.MAJOR="major",_.EXTREME="extreme"}(d||(d={}));e(n={},d.CONSIDERABLE,{titleI18N:"2A.progress.considerable.title",titleDefault:"Considerable",color:"#9DC3E6",prefix:"c"}),e(n,d.MAJOR,{titleI18N:"2A.progress.major.title",titleDefault:"Major",color:"#FFE699",prefix:"m"}),e(n,d.EXTREME,{titleI18N:"2A.progress.extreme.title",titleDefault:"Extreme",color:"#F47C7C",prefix:"e"});var u=["Ha","Hb","Hc","Sa","Sb","Sc","Sd","Ea","Fa","Fb"],o=function(_){return _===d.CONSIDERABLE?"_c":_===d.MAJOR?"_m":"_e"},f=function(_,i,e){return i===d.CONSIDERABLE&&e===d.CONSIDERABLE?_.c2c:i===d.CONSIDERABLE&&e===d.MAJOR?_.c2m:i===d.CONSIDERABLE&&e===d.EXTREME?_.c2e:i===d.MAJOR&&e===d.CONSIDERABLE?_.m2c:i===d.MAJOR&&e===d.MAJOR?_.m2m:i===d.MAJOR&&e===d.EXTREME?_.m2e:i===d.EXTREME&&e===d.CONSIDERABLE?_.e2c:i===d.EXTREME&&e===d.MAJOR?_.e2m:_.e2e},m=function _(i){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(i.length<=0)return[];var c=[],r=[].concat(a(e),a(i.map((function(_){return _.effect.riskId}))));i.forEach((function(_){_.effect.effects.forEach((function(_){r.indexOf(_.effect.riskId)<0&&c.push(_)}))}));var n=_(c,r);return i.map((function(_){return t(t({},_),{},{effect:t(t({},_.effect),{},{effects:_.effect.effects.reduce((function(_,i){var e=n.find((function(_){return i.effect.riskId===_.effect.riskId}));return e?[].concat(a(_),[t(t({},i),{},{effect:e.effect})]):_}),[])})})}))};function s(_){l(_,d.CONSIDERABLE),l(_,d.MAJOR),l(_,d.EXTREME)}function l(_,i){var e=o(i);_["ti".concat(e)]=function(_,i){return i===d.CONSIDERABLE?_.di_c:i===d.MAJOR?_.di_m:_.di_e}(_,i)+_.effects.reduce((function(_,e){e.effect.ti<=0&&s(e.effect);var c=(1-f(e,i,d.CONSIDERABLE))*(1-f(e,i,d.MAJOR))*(1-f(e,i,d.EXTREME)),t=f(e,i,d.CONSIDERABLE)+f(e,i,d.MAJOR)+f(e,i,d.EXTREME)||1e-7,r=(1-c)*(f(e,i,d.CONSIDERABLE)/t),a=(1-c)*(f(e,i,d.MAJOR)/t),n=(1-c)*(f(e,i,d.EXTREME)/t);return function(_,i,e,c,t){var r=o(i),a="Information operations"===_.effect.riskTitle||"Information operations"===_.cause.riskTitle?10:1;u.forEach((function(i){_["ii_".concat(i).concat(r)]=(e*_.effect["ti_".concat(i,"_c")]+c*_.effect["ti_".concat(i,"_m")]+t*_.effect["ti_".concat(i,"_e")])/a})),_["ii".concat(r)]=(e*_.effect.ti_c+c*_.effect.ti_m+t*_.effect.ti_e)/a}(e,i,r,a,n),_+function(_,i){return i===d.CONSIDERABLE?_.ii_c:i===d.MAJOR?_.ii_m:_.ii_e}(e,i)}),0),u.forEach((function(i){_["ti_".concat(i).concat(e)]=_["di_".concat(i).concat(e)]+_.effects.reduce((function(_,c){return _+c["ii_".concat(i).concat(e)]}),0)})),_.ti=-1}var p=function(_,i,e){return i===d.CONSIDERABLE&&e===d.CONSIDERABLE?_.c2c:i===d.CONSIDERABLE&&e===d.MAJOR?_.c2m:i===d.CONSIDERABLE&&e===d.EXTREME?_.c2e:i===d.MAJOR&&e===d.CONSIDERABLE?_.m2c:i===d.MAJOR&&e===d.MAJOR?_.m2m:i===d.MAJOR&&e===d.EXTREME?_.m2e:i===d.EXTREME&&e===d.CONSIDERABLE?_.e2c:i===d.EXTREME&&e===d.MAJOR?_.e2m:_.e2e},E=function _(i){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(i.length<=0)return[];var c=[],r=[].concat(a(e),a(i.map((function(_){return _.cause.riskId}))));i.forEach((function(_){_.cause.causes.forEach((function(_){r.indexOf(_.cause.riskId)<0&&c.push(_)}))}));var n=_(c,r);return i.map((function(_){return t(t({},_),{},{cause:t(t({},_.cause),{},{causes:_.cause.causes.reduce((function(_,i){var e=n.find((function(_){return i.cause.riskId===_.cause.riskId}));return e?[].concat(a(_),[t(t({},i),{},{cause:e.cause})]):_}),[])})})}))};function S(_){_.tp_c=b(_,d.CONSIDERABLE),_.tp_m=b(_,d.MAJOR),_.tp_e=b(_,d.EXTREME),_.tp=-1}function b(_,i){return function(_,i){return i===d.CONSIDERABLE?_.dp_c:i===d.MAJOR?_.dp_m:_.dp_e}(_,i)+_.causes.reduce((function(_,e){return e.cause.tp<=0&&S(e.cause),function(_,i,e){var c="Information operations"===_.cause.riskTitle?10:1;i===d.CONSIDERABLE&&(_.ip_c=e/c),i===d.MAJOR&&(_.ip_m=e/c),i===d.EXTREME&&(_.ip_e=e/c)}(e,i,e.cause.tp_c*p(e,d.CONSIDERABLE,i)+e.cause.tp_m*p(e,d.MAJOR,i)+e.cause.tp_e*p(e,d.EXTREME,i)),e.ip=-1,_+function(_,i){return i===d.CONSIDERABLE?_.ip_c:i===d.MAJOR?_.ip_m:_.ip_e}(e,i)}),0)}var q,h,H,v=["Ha","Hb","Hc","Sa","Sb","Sc","Sd","Ea","Fa","Fb"];!function(_){_.CONSENSUS="consensus",_.AVERAGE="average",_.MISSING="no input"}(q||(q={})),function(_){_.STANDARD="Standard Risk",_.MANMADE="Malicious Man-made Risk",_.EMERGING="Emerging Risk"}(h||(h={})),function(_){_[_.MEETING=0]="MEETING",_[_.SILENCE=1]="SILENCE",_[_.NONE=2]="NONE"}(H||(H={}));var O={0:0,.5:5e3,1:16e3,1.5:5e4,2:16e4,2.5:5e5,3:16e5,3.5:5e6,4:16e6,4.5:5e7,5:16e7};function y(_){return null===_?0:1e3*O[_.slice(2)]}var R={0:3e4,1:3e3,2:300,3:30,4:3,5:.3},A={0:.01,1:.5,2:0,3:1},M={0:0,.5:.001,1:.004,1.5:.01,2:.04,2.5:.1,3:.3,3.5:.5,4:.7,4.5:.9,5:.95},I=function(_,i){return(i-_)/(Math.log10(i)-Math.log10(_))},F=function(_,i){return(_+i)/2};function D(_){return null===_?0:1-Math.exp(-1/(365*function(_){if("DP0"===_)return I(R[0],10*R[0]);if(_.indexOf(".")>=0){var i=Math.floor(parseFloat(_.replace("DP","")));return R[i]}var e=parseInt(_.replace("DP",""),10);return I(R[e],R[e-1])}(_)))}function N(_){return null===_?0:-1*Math.log(1-function(_){if("M0"===_)return F(0,A[0]);if(_.indexOf(".")>=0){var i=Math.floor(parseFloat(_.replace("M","")));return A[i]}var e=parseInt(_.replace("M",""),10);return F(A[e-1],A[e])}(_))/1095}function g(_){return null===_?0:_.startsWith("DP")?D(_):_.startsWith("CP")?M[_.replace("CP","")]:_.startsWith("M")?N(_):-1}var k,C;["cr4de_dp_quali_c","cr4de_dp_quanti_c","cr4de_dp_quali_m","cr4de_dp_quanti_m","cr4de_dp_quali_e","cr4de_dp_quanti_e","cr4de_di_quali_h_c","cr4de_di_quanti_ha_c","cr4de_di_quanti_hb_c","cr4de_di_quanti_hc_c","cr4de_di_quali_s_c","cr4de_di_quanti_sa_c","cr4de_di_quanti_sb_c","cr4de_di_quanti_sc_c","cr4de_di_quanti_sd_c","cr4de_di_quali_e_c","cr4de_di_quanti_ea_c","cr4de_di_quali_f_c","cr4de_di_quanti_fa_c","cr4de_di_quanti_fb_c","cr4de_di_quali_h_m","cr4de_di_quanti_ha_m","cr4de_di_quanti_hb_m","cr4de_di_quanti_hc_m","cr4de_di_quali_s_m","cr4de_di_quanti_sa_m","cr4de_di_quanti_sb_m","cr4de_di_quanti_sc_m","cr4de_di_quanti_sd_m","cr4de_di_quali_e_m","cr4de_di_quanti_ea_m","cr4de_di_quali_f_m","cr4de_di_quanti_fa_m","cr4de_di_quanti_fb_m","cr4de_di_quali_h_e","cr4de_di_quanti_ha_e","cr4de_di_quanti_hb_e","cr4de_di_quanti_hc_e","cr4de_di_quali_s_e","cr4de_di_quanti_sa_e","cr4de_di_quanti_sb_e","cr4de_di_quanti_sc_e","cr4de_di_quanti_sd_e","cr4de_di_quali_e_e","cr4de_di_quanti_ea_e","cr4de_di_quali_f_e","cr4de_di_quanti_fa_e","cr4de_di_quanti_fb_e","cr4de_cross_border_impact_quali_c","cr4de_cross_border_impact_quali_m","cr4de_cross_border_impact_quali_e","cr4de_dp50_quanti_c","cr4de_dp50_quanti_m","cr4de_dp50_quanti_e"].filter((function(_){return _.indexOf("quanti")>0}));!function(_){_[_.DP=0]="DP",_[_.DP2050=1]="DP2050",_[_.H=2]="H",_[_.S=3]="S",_[_.E=4]="E",_[_.F=5]="F",_[_.CB=6]="CB"}(C||(C={}));e(k={},C.DP,{name:"dp",label:"Direct Probability"}),e(k,C.DP2050,{name:"dp50",label:"Direct Probability 2050"}),e(k,C.H,{name:"h",label:"Direct Human Impact"}),e(k,C.S,{name:"s",label:"Direct Societal Impact"}),e(k,C.E,{name:"e",label:"Direct Environmental Impact"}),e(k,C.F,{name:"f",label:"Direct Financial Impact"}),e(k,C.CB,{name:"cb",label:"Cross-border Effects"}),e({},C.DP,{name:"dp",label:"Motivation"});function B(_){var i=_.filter((function(_){return null!==_}));if(i.length<=0)return null;var e=i[0].slice(0,i[0].search(/\d/));return{prefix:e,numbers:i.map((function(_){return parseInt(_.replace(e,""),10)}))}}function T(_,i){var e=i?i.reduce((function(_,i){return _+i})):_.length;return Math.round(2*_.reduce((function(_,c,t){return i?_+c*i[t]/e:_+c/e}),0))/2}function L(_,i){var e=B(_);return e?"".concat(e.prefix).concat(T(e.numbers,i)):null}var J=function(_,i,c,t,r){var a,n=c.indexOf("climate_change")>=0?"cr4de_dp50_quanti":c;return e(a={},"".concat(_,"_c"),r(L(t.map((function(_){return _["".concat(n,"_c")]})),t.map((function(_){return _.cr4de_quality&&_.cr4de_quality["".concat(i,"_c")]||2.5}))))/1),e(a,"".concat(_,"_m"),r(L(t.map((function(_){return _["".concat(n,"_m")]})),t.map((function(_){return _.cr4de_quality&&_.cr4de_quality["".concat(i,"_m")]||2.5}))))/1),e(a,"".concat(_,"_e"),r(L(t.map((function(_){return _["".concat(n,"_e")]})),t.map((function(_){return _.cr4de_quality&&_.cr4de_quality["".concat(i,"_e")]||2.5}))))/1),a};function P(_,i,c,r,n,d){var u=n.reduce((function(_,i){return _[i._cr4de_risk_file_value]?t(t({},_),{},e({},i._cr4de_risk_file_value,[].concat(a(_[i._cr4de_risk_file_value]),[i]))):t(t({},_),{},e({},i._cr4de_risk_file_value,[i]))}),{}),o=d.reduce((function(_,i){return _[i._cr4de_cascade_value]?t(t({},_),{},e({},i._cr4de_cascade_value,[].concat(a(_[i._cr4de_cascade_value]),[i]))):t(t({},_),{},e({},i._cr4de_cascade_value,[i]))}),{}),f=_.filter((function(_){return _.cr4de_risk_type!==h.EMERGING})).map((function(_){var i=function(_,i,e){var c=e?e.filter((function(_){return i.some((function(i){return i._cr4de_contact_value===_.cr4de_expert.contactid&&"expert"===i.cr4de_role&&i.cr4de_direct_analysis_finished}))})):[];return _.cr4de_consensus_date&&new Date(_.cr4de_consensus_date)<=new Date||_.cr4de_risk_type===h.EMERGING?{quality:q.CONSENSUS,reliability:c.length,dp_c:g(_.cr4de_dp_quanti_c),dp_m:g(_.cr4de_dp_quanti_m),dp_e:g(_.cr4de_dp_quanti_e),di_Ha_c:y(_.cr4de_di_quanti_ha_c),di_Hb_c:y(_.cr4de_di_quanti_hb_c),di_Hc_c:y(_.cr4de_di_quanti_hc_c),di_Sa_c:y(_.cr4de_di_quanti_sa_c),di_Sb_c:y(_.cr4de_di_quanti_sb_c),di_Sc_c:y(_.cr4de_di_quanti_sc_c)/1,di_Sd_c:y(_.cr4de_di_quanti_sd_c),di_Ea_c:y(_.cr4de_di_quanti_ea_c),di_Fa_c:y(_.cr4de_di_quanti_fa_c),di_Fb_c:y(_.cr4de_di_quanti_fb_c),di_Ha_m:y(_.cr4de_di_quanti_ha_m),di_Hb_m:y(_.cr4de_di_quanti_hb_m),di_Hc_m:y(_.cr4de_di_quanti_hc_m),di_Sa_m:y(_.cr4de_di_quanti_sa_m),di_Sb_m:y(_.cr4de_di_quanti_sb_m),di_Sc_m:y(_.cr4de_di_quanti_sc_m)/1,di_Sd_m:y(_.cr4de_di_quanti_sd_m),di_Ea_m:y(_.cr4de_di_quanti_ea_m),di_Fa_m:y(_.cr4de_di_quanti_fa_m),di_Fb_m:y(_.cr4de_di_quanti_fb_m),di_Ha_e:y(_.cr4de_di_quanti_ha_e),di_Hb_e:y(_.cr4de_di_quanti_hb_e),di_Hc_e:y(_.cr4de_di_quanti_hc_e),di_Sa_e:y(_.cr4de_di_quanti_sa_e),di_Sb_e:y(_.cr4de_di_quanti_sb_e),di_Sc_e:y(_.cr4de_di_quanti_sc_e)/1,di_Sd_e:y(_.cr4de_di_quanti_sd_e),di_Ea_e:y(_.cr4de_di_quanti_ea_e),di_Fa_e:y(_.cr4de_di_quanti_fa_e),di_Fb_e:y(_.cr4de_di_quanti_fb_e),dp50_c:g(_.cr4de_climate_change_quanti_c),dp50_m:g(_.cr4de_climate_change_quanti_m),dp50_e:g(_.cr4de_climate_change_quanti_e)}:c.length>0?t(t(t(t(t(t(t(t(t(t(t(t({quality:q.AVERAGE,reliability:c.length},J("dp","dp","cr4de_dp_quanti",c,g)),J("di_Ha","h","cr4de_di_quanti_ha",c,y)),J("di_Hb","h","cr4de_di_quanti_hb",c,y)),J("di_Hc","h","cr4de_di_quanti_hc",c,y)),J("di_Sa","s","cr4de_di_quanti_sa",c,y)),J("di_Sb","s","cr4de_di_quanti_sb",c,y)),J("di_Sc","s","cr4de_di_quanti_sc",c,y)),J("di_Sd","s","cr4de_di_quanti_sd",c,y)),J("di_Ea","e","cr4de_di_quanti_ea",c,y)),J("di_Fa","f","cr4de_di_quanti_fa",c,y)),J("di_Fb","f","cr4de_di_quanti_fb",c,y)),J("dp50","cc","cr4de_climate_change_quanti",c,g)):{quality:q.MISSING,reliability:0,dp_c:0,dp_m:0,dp_e:0,di_Ha_c:0,di_Hb_c:0,di_Hc_c:0,di_Sa_c:0,di_Sb_c:0,di_Sc_c:0,di_Sd_c:0,di_Ea_c:0,di_Fa_c:0,di_Fb_c:0,di_Ha_m:0,di_Hb_m:0,di_Hc_m:0,di_Sa_m:0,di_Sb_m:0,di_Sc_m:0,di_Sd_m:0,di_Ea_m:0,di_Fa_m:0,di_Fb_m:0,di_Ha_e:0,di_Hb_e:0,di_Hc_e:0,di_Sa_e:0,di_Sb_e:0,di_Sc_e:0,di_Sd_e:0,di_Ea_e:0,di_Fa_e:0,di_Fb_e:0,dp50_c:0,dp50_m:0,dp50_e:0}}(_,r.filter((function(i){return i._cr4de_risk_file_value===_.cr4de_riskfilesid})),u[_.cr4de_riskfilesid]),e=t(t({riskId:_.cr4de_riskfilesid,riskTitle:_.cr4de_title,timestamp:Date.now()},i),{},{dp:0,ip_c:0,ip_m:0,ip_e:0,ip:0,tp_c:0,tp_m:0,tp_e:0,tp:0,rp_c:0,rp_m:0,rp_e:0,di_Ha:i.di_Ha_c+i.di_Ha_m+i.di_Ha_e,di_Hb:i.di_Hb_c+i.di_Hb_m+i.di_Hb_e,di_Hc:i.di_Hc_c+i.di_Hc_m+i.di_Hc_e,di_Sa:i.di_Sa_c+i.di_Sa_m+i.di_Sa_e,di_Sb:i.di_Sb_c+i.di_Sb_m+i.di_Sb_e,di_Sc:i.di_Sc_c+i.di_Sc_m+i.di_Sc_e,di_Sd:i.di_Sd_c+i.di_Sd_m+i.di_Sd_e,di_Ea:i.di_Ea_c+i.di_Ea_m+i.di_Ea_e,di_Fa:i.di_Fa_c+i.di_Fa_m+i.di_Fa_e,di_Fb:i.di_Fb_c+i.di_Fb_m+i.di_Fb_e,di_c:i.di_Ha_c+i.di_Hb_c+i.di_Hc_c+i.di_Sa_c+i.di_Sb_c+i.di_Sc_c+i.di_Sd_c+i.di_Ea_c+i.di_Fa_c+i.di_Fb_c,di_m:i.di_Ha_m+i.di_Hb_m+i.di_Hc_m+i.di_Sa_m+i.di_Sb_m+i.di_Sc_m+i.di_Sd_m+i.di_Ea_m+i.di_Fa_m+i.di_Fb_m,di_e:i.di_Ha_e+i.di_Hb_e+i.di_Hc_e+i.di_Sa_e+i.di_Sb_e+i.di_Sc_e+i.di_Sd_e+i.di_Ea_e+i.di_Fa_e+i.di_Fb_e,di:0,ii_Ha_c:0,ii_Hb_c:0,ii_Hc_c:0,ii_Sa_c:0,ii_Sb_c:0,ii_Sc_c:0,ii_Sd_c:0,ii_Ea_c:0,ii_Fa_c:0,ii_Fb_c:0,ii_Ha_m:0,ii_Hb_m:0,ii_Hc_m:0,ii_Sa_m:0,ii_Sb_m:0,ii_Sc_m:0,ii_Sd_m:0,ii_Ea_m:0,ii_Fa_m:0,ii_Fb_m:0,ii_Ha_e:0,ii_Hb_e:0,ii_Hc_e:0,ii_Sa_e:0,ii_Sb_e:0,ii_Sc_e:0,ii_Sd_e:0,ii_Ea_e:0,ii_Fa_e:0,ii_Fb_e:0,ii_Ha:0,ii_Hb:0,ii_Hc:0,ii_Sa:0,ii_Sb:0,ii_Sc:0,ii_Sd:0,ii_Ea:0,ii_Fa:0,ii_Fb:0,ii_c:0,ii_m:0,ii_e:0,ii:0,ti_Ha_c:0,ti_Hb_c:0,ti_Hc_c:0,ti_Sa_c:0,ti_Sb_c:0,ti_Sc_c:0,ti_Sd_c:0,ti_Ea_c:0,ti_Fa_c:0,ti_Fb_c:0,ti_Ha_m:0,ti_Hb_m:0,ti_Hc_m:0,ti_Sa_m:0,ti_Sb_m:0,ti_Sc_m:0,ti_Sd_m:0,ti_Ea_m:0,ti_Fa_m:0,ti_Fb_m:0,ti_Ha_e:0,ti_Hb_e:0,ti_Hc_e:0,ti_Sa_e:0,ti_Sb_e:0,ti_Sc_e:0,ti_Sd_e:0,ti_Ea_e:0,ti_Fa_e:0,ti_Fb_e:0,ti_Ha:0,ti_Hb:0,ti_Hc:0,ti_Sa:0,ti_Sb:0,ti_Sc:0,ti_Sd:0,ti_Ea:0,ti_Fa:0,ti_Fb:0,ti_c:0,ti_m:0,ti_e:0,ti:0,tr_c:0,tr_m:0,tr_e:0,tr:0,causes:[],effects:[]});return e.di=e.di_c+e.di_m+e.di_e,e})),m=f.reduce((function(_,i){return t(t({},_),{},e({},i.riskId,i))}),{});return c.forEach((function(_){if(_.cr4de_cause_hazard.cr4de_risk_type!==h.EMERGING){var e=m[_._cr4de_cause_hazard_value],c=m[_._cr4de_effect_hazard_value];if(e&&c){var a=t(t({cause:e,effect:c,cascadeId:_.cr4de_bnrariskcascadeid,cascadeTitle:"".concat(e.riskTitle," causes ").concat(c.riskTitle),damp:_.cr4de_damp||!0},function(_,i,e,c,t){var r=t?t.filter((function(_){return c.some((function(i){return i._cr4de_contact_value===_.cr4de_expert.contactid&&"expert"===i.cr4de_role&&i.cr4de_direct_analysis_finished}))})):[];return i.cr4de_consensus_date&&new Date(i.cr4de_consensus_date)<=new Date||i.cr4de_risk_type===h.EMERGING?{quality:q.CONSENSUS,reliabilty:r.length,c2c:g(e.cr4de_c2c),c2m:g(e.cr4de_c2m),c2e:g(e.cr4de_c2e),m2c:g(e.cr4de_m2c),m2m:g(e.cr4de_m2m),m2e:g(e.cr4de_m2e),e2c:g(e.cr4de_e2c),e2m:g(e.cr4de_e2m),e2e:g(e.cr4de_e2e)}:r.length>0?{quality:q.AVERAGE,reliabilty:r.length,c2c:g(L(r.map((function(_){return _.cr4de_c2c})),r.map((function(_){return _.cr4de_quality||2.5})))),c2m:g(L(r.map((function(_){return _.cr4de_c2m})),r.map((function(_){return _.cr4de_quality||2.5})))),c2e:g(L(r.map((function(_){return _.cr4de_c2e})),r.map((function(_){return _.cr4de_quality||2.5})))),m2c:g(L(r.map((function(_){return _.cr4de_m2c})),r.map((function(_){return _.cr4de_quality||2.5})))),m2m:g(L(r.map((function(_){return _.cr4de_m2m})),r.map((function(_){return _.cr4de_quality||2.5})))),m2e:g(L(r.map((function(_){return _.cr4de_m2e})),r.map((function(_){return _.cr4de_quality||2.5})))),e2c:g(L(r.map((function(_){return _.cr4de_e2c})),r.map((function(_){return _.cr4de_quality||2.5})))),e2m:g(L(r.map((function(_){return _.cr4de_e2m})),r.map((function(_){return _.cr4de_quality||2.5})))),e2e:g(L(r.map((function(_){return _.cr4de_e2e})),r.map((function(_){return _.cr4de_quality||2.5}))))}:{quality:q.MISSING,reliabilty:0,c2c:0,c2m:0,c2e:0,m2c:0,m2m:0,m2e:0,e2c:0,e2m:0,e2e:0}}(i[_._cr4de_cause_hazard_value],i[_._cr4de_effect_hazard_value],_,r.filter((function(i){return i._cr4de_risk_file_value===_._cr4de_cause_hazard_value||i._cr4de_risk_file_value===_._cr4de_effect_hazard_value})),o[_.cr4de_bnrariskcascadeid])),{},{ip_c:0,ip_m:0,ip_e:0,ip:0,ii_Ha_c:0,ii_Hb_c:0,ii_Hc_c:0,ii_Sa_c:0,ii_Sb_c:0,ii_Sc_c:0,ii_Sd_c:0,ii_Ea_c:0,ii_Fa_c:0,ii_Fb_c:0,ii_Ha_m:0,ii_Hb_m:0,ii_Hc_m:0,ii_Sa_m:0,ii_Sb_m:0,ii_Sc_m:0,ii_Sd_m:0,ii_Ea_m:0,ii_Fa_m:0,ii_Fb_m:0,ii_Ha_e:0,ii_Hb_e:0,ii_Hc_e:0,ii_Sa_e:0,ii_Sb_e:0,ii_Sc_e:0,ii_Sd_e:0,ii_Ea_e:0,ii_Fa_e:0,ii_Fb_e:0,ii_Ha:0,ii_Hb:0,ii_Hc:0,ii_Sa:0,ii_Sb:0,ii_Sc:0,ii_Sd:0,ii_Ea:0,ii_Fa:0,ii_Fb:0,ii_c:0,ii_m:0,ii_e:0,ii:0,ir_c:0,ir_m:0,ir_e:0,ir:0});e.effects.push(a),c.causes.push(a)}}})),f}function j(_,i){var c=_.riskFiles,r=_.cascades,a=_.participations,n=_.directAnalyses,d=_.cascadeAnalyses,u=c.reduce((function(_,i){return t(t({},_),{},e({},i.cr4de_riskfilesid,i))}),{}),o=(r.reduce((function(_,i){return t(t({},_),{},e({},i.cr4de_bnrariskcascadeid,i))}),{}),P(c,u,r,a,n,d));return o.map((function(_,e){var c,r=function(_){return t(t({},_),{},{effects:m(_.effects,[_.riskId])})}(t(t({},c=_),{},{causes:E(c.causes,[c.riskId])}));return console.log("ok"),S(r),s(r),function(_){_.tr_c=_.tp_c*_.ti_c,_.tr_m=_.tp_m*_.ti_m,_.tr_e=_.tp_e*_.ti_e,_.tr=(_.tr_c+_.tr_m+_.tr_e)/3,_.causes.forEach((function(i){i.ir_c=0===_.tp_c?0:_.tr_c*i.ip_c/_.tp_c,i.ir_m=0===_.tp_m?0:_.tr_m*i.ip_m/_.tp_m,i.ir_e=0===_.tp_e?0:_.tr_e*i.ip_e/_.tp_e,i.ir=(i.ir_c+i.ir_m+i.ir_e)/3})),_.effects.forEach((function(i){i.ir_c=0===_.ti_c?0:_.tr_c*(i.ii_c/_.ti_c),i.ir_m=0===_.ti_m?0:_.tr_m*(i.ii_m/_.ti_m),i.ir_e=0===_.ti_e?0:_.tr_e*(i.ii_e/_.ti_e),i.ir=(i.ir_c+i.ir_m+i.ir_e)/3}));var i=function(_){return _.tr_c>_.tr_m&&_.tr_c>_.tr_e?"_c":_.tr_m>_.tr_c&&_.tr_m>_.tr_e?"_m":"_e"}(_);_.dp=_["dp".concat(i)],_.tp=_["tp".concat(i)],_.causes.forEach((function(_){_.ip=_["ip".concat(i)]})),_.di=_["di".concat(i)],_.ti=_["ti".concat(i)],v.forEach((function(e){_["ti_".concat(e)]=_["ti_".concat(e).concat(i)]})),_.effects.forEach((function(_){_.ii=_["ii".concat(i)]}))}(r),i(100*(e+1)/o.length),r}))}self.onmessage=function(_){var i=j(_.data,(function(_){return self.postMessage({type:"progress",value:_})}));self.postMessage({type:"result",value:i})}}();
//# sourceMappingURL=83.2d7aa141.chunk.js.map