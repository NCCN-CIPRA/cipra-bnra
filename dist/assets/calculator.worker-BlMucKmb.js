(function(){"use strict";var c=(_=>(_.CONSIDERABLE="considerable",_.MAJOR="major",_.EXTREME="extreme",_))(c||{});const w=_=>_==="considerable"?"_c":_==="major"?"_m":"_e",j=_=>{const i=[_.tp_c*_.ti_c,_.tp_m*_.ti_m,_.tp_e*_.ti_e];return["considerable","major","extreme"][i.indexOf(Math.max(...i))]},x=["Ha","Hb","Hc","Sa","Sb","Sc","Sd","Ea","Fa","Fb"],y=_=>_===c.CONSIDERABLE?"_c":_===c.MAJOR?"_m":"_e",K=(_,i)=>i===c.CONSIDERABLE?_.di_c:i===c.MAJOR?_.di_m:_.di_e,V=(_,i)=>i===c.CONSIDERABLE?_.ii_c:i===c.MAJOR?_.ii_m:_.ii_e,Y=(_,i,e,d,r)=>{const u=y(i);x.forEach(n=>{_[`ii_${n}${u}`]=e*_.effect[`ti_${n}_c`]+d*_.effect[`ti_${n}_m`]+r*_.effect[`ti_${n}_e`]}),_[`ii${u}`]=e*_.effect.ti_c+d*_.effect.ti_m+r*_.effect.ti_e},H=(_,i,e)=>i===c.CONSIDERABLE&&e===c.CONSIDERABLE?_.c2c:i===c.CONSIDERABLE&&e===c.MAJOR?_.c2m:i===c.CONSIDERABLE&&e===c.EXTREME?_.c2e:i===c.MAJOR&&e===c.CONSIDERABLE?_.m2c:i===c.MAJOR&&e===c.MAJOR?_.m2m:i===c.MAJOR&&e===c.EXTREME?_.m2e:i===c.EXTREME&&e===c.CONSIDERABLE?_.e2c:i===c.EXTREME&&e===c.MAJOR?_.e2m:_.e2e,Z=_=>({..._,effects:L(_.effects,[_.riskId])}),L=(_,i=[])=>{if(_.length<=0)return[];const e=[],d=[...i,..._.map(u=>u.effect.riskId)];_.forEach(u=>{u.effect.effects.forEach(n=>{d.indexOf(n.effect.riskId)<0&&e.push(n)})});const r=L(e,d);return _.map(u=>({...u,effect:{...u.effect,effects:u.effect.effects.reduce((n,f)=>{const a=r.find(l=>f.effect.riskId===l.effect.riskId);return a?[...n,{...f,effect:a.effect}]:n},[])}}))};function $(_){C(_,c.CONSIDERABLE),C(_,c.MAJOR),C(_,c.EXTREME)}function C(_,i){const e=y(i);_[`ti${e}`]=K(_,i)+_.effects.reduce((d,r)=>(r.effect.ti<=0&&$(r.effect),Y(r,i,H(r,i,c.CONSIDERABLE),H(r,i,c.MAJOR),H(r,i,c.EXTREME)),d+V(r,i)),0),x.forEach(d=>{_[`ti_${d}${e}`]=_[`di_${d}${e}`]+_.effects.reduce((r,u)=>r+u[`ii_${d}${e}`],0)}),_.ti=-1}const Q=(_,i)=>i===c.CONSIDERABLE?_.dp_c:i===c.MAJOR?_.dp_m:_.dp_e,k=(_,i)=>i===c.CONSIDERABLE?_.dp50_c:i===c.MAJOR?_.dp50_m:_.dp50_e,__=(_,i)=>i===c.CONSIDERABLE?_.ip_c:i===c.MAJOR?_.ip_m:_.ip_e,e_=(_,i)=>i===c.CONSIDERABLE?_.ip50_c:i===c.MAJOR?_.ip50_m:_.ip50_e,i_=(_,i,e)=>{i===c.CONSIDERABLE&&(_.ip_c=e),i===c.MAJOR&&(_.ip_m=e),i===c.EXTREME&&(_.ip_e=e)},t_=(_,i,e)=>{i===c.CONSIDERABLE&&(_.ip50_c=e),i===c.MAJOR&&(_.ip50_m=e),i===c.EXTREME&&(_.ip50_e=e)},q=(_,i,e)=>i===c.CONSIDERABLE&&e===c.CONSIDERABLE?_.c2c:i===c.CONSIDERABLE&&e===c.MAJOR?_.c2m:i===c.CONSIDERABLE&&e===c.EXTREME?_.c2e:i===c.MAJOR&&e===c.CONSIDERABLE?_.m2c:i===c.MAJOR&&e===c.MAJOR?_.m2m:i===c.MAJOR&&e===c.EXTREME?_.m2e:i===c.EXTREME&&e===c.CONSIDERABLE?_.e2c:i===c.EXTREME&&e===c.MAJOR?_.e2m:_.e2e,d_=_=>({..._,causes:v(_.causes,[_.riskId])}),v=(_,i=[])=>{if(_.length<=0)return[];const e=[],d=[...i,..._.map(u=>u.cause.riskId)];_.forEach(u=>{u.cause.causes.forEach(n=>{d.indexOf(n.cause.riskId)<0&&e.push(n)})});const r=v(e,d);return _.map(u=>({...u,cause:{...u.cause,causes:u.cause.causes.reduce((n,f)=>{const a=r.find(l=>f.cause.riskId===l.cause.riskId);return a?[...n,{...f,cause:a.cause}]:n},[])}}))};function D(_){_.tp_c=N(_,c.CONSIDERABLE),_.tp_m=N(_,c.MAJOR),_.tp_e=N(_,c.EXTREME),_.tp=-1,_.tp50_c=g(_,c.CONSIDERABLE),_.tp50_m=g(_,c.MAJOR),_.tp50_e=g(_,c.EXTREME),_.tp50=-1}function N(_,i){return Q(_,i)+_.causes.reduce((e,d)=>(d.cause.tp<=0&&D(d.cause),i_(d,i,d.cause.tp_c*q(d,c.CONSIDERABLE,i)+d.cause.tp_m*q(d,c.MAJOR,i)+d.cause.tp_e*q(d,c.EXTREME,i)),d.ip=-1,e+__(d,i)),0)}function g(_,i){return k(_,i)+_.causes.reduce((e,d)=>(d.cause.tp50<=0&&D(d.cause),t_(d,i,d.cause.tp50_c*q(d,c.CONSIDERABLE,i)+d.cause.tp50_m*q(d,c.MAJOR,i)+d.cause.tp50_e*q(d,c.EXTREME,i)),d.ip50=-1,e+e_(d,i)),0)}const c_=["Ha","Hb","Hc","Sa","Sb","Sc","Sd","Ea","Fa","Fb"];function r_(_){_.tr_c=_.tp_c*_.ti_c,_.tr_m=_.tp_m*_.ti_m,_.tr_e=_.tp_e*_.ti_e,_.tr=(_.tr_c+_.tr_m+_.tr_e)/3,_.tr50_c=_.tp50_c*_.ti_c,_.tr50_m=_.tp50_m*_.ti_m,_.tr50_e=_.tp50_e*_.ti_e,_.tr50=(_.tr50_c+_.tr50_m+_.tr50_e)/3,_.causes.forEach(e=>{e.ir_c=_.tp_c===0?0:_.tr_c*e.ip_c/_.tp_c,e.ir_m=_.tp_m===0?0:_.tr_m*e.ip_m/_.tp_m,e.ir_e=_.tp_e===0?0:_.tr_e*e.ip_e/_.tp_e,e.ir=(e.ir_c+e.ir_m+e.ir_e)/3,e.ir50_c=_.tp50_c===0?0:_.tr50_c*e.ip50_c/_.tp50_c,e.ir50_m=_.tp50_m===0?0:_.tr50_m*e.ip50_m/_.tp50_m,e.ir50_e=_.tp50_e===0?0:_.tr50_e*e.ip50_e/_.tp50_e,e.ir50=(e.ir50_c+e.ir50_m+e.ir50_e)/3}),_.effects.forEach(e=>{e.ir_c=_.ti_c===0?0:_.tr_c*(e.ii_c/_.ti_c),e.ir_m=_.ti_m===0?0:_.tr_m*(e.ii_m/_.ti_m),e.ir_e=_.ti_e===0?0:_.tr_e*(e.ii_e/_.ti_e),e.ir=(e.ir_c+e.ir_m+e.ir_e)/3});const i=w(j(_));_.dp=_[`dp${i}`],_.tp=_[`tp${i}`],_.dp50=_[`dp50${i}`],_.tp50=_[`tp50${i}`],_.causes.forEach(e=>{e.ip=e[`ip${i}`],e.ip50=e[`ip50${i}`]}),_.di=_[`di${i}`],_.ti=_[`ti${i}`],c_.forEach(e=>{_[`ti_${e}`]=_[`ti_${e}${i}`]}),_.effects.forEach(e=>{e.ii=e[`ii${i}`]})}var S=(_=>(_.CONSENSUS="consensus",_.AVERAGE="average",_.MISSING="no input",_))(S||{}),R=(_=>(_.STANDARD="Standard Risk",_.MANMADE="Malicious Man-made Risk",_.EMERGING="Emerging Risk",_))(R||{});const u_={0:0,"0.5":5e3,1:16e3,"1.5":5e4,2:16e4,"2.5":5e5,3:16e5,"3.5":5e6,4:16e6,"4.5":5e7,5:16e7,"5.5":5e8};function p(_){return _===null?0:1e3*u_[_.slice(2)]}const A={0:3e4,1:3e3,2:300,3:30,4:3,5:.3},M={0:.01,1:.5,2:0,3:1},n_={0:0,"0.5":.001,1:.004,"1.5":.01,2:.04,"2.5":.1,3:.3,"3.5":.5,4:.7,"4.5":.9,5:.95},F=(_,i)=>(i-_)/(Math.log10(i)-Math.log10(_)),B=(_,i)=>(_+i)/2;function a_(_){if(_==="DP0")return F(A[0],A[0]*10);if(_.indexOf(".")>=0){const i=Math.floor(parseFloat(_.replace("DP","")));return A[i]}else{const i=parseInt(_.replace("DP",""),10),e=A[i-1],d=A[i];return F(d,e)}}function m_(_){if(_==="M0")return B(0,M[0]);if(_.indexOf(".")>=0){const i=Math.floor(parseFloat(_.replace("M","")));return M[i]}else{const i=parseInt(_.replace("M",""),10);return B(M[i-1],M[i])}}function f_(_){return _===null?0:1-Math.exp(-1/(a_(_)*365))}function p_(_){return _===null?0:-1*Math.log(1-m_(_))/(3*365)}function m(_,i=1){return _===null?0:_.startsWith("DP")?f_(_)*i:_.startsWith("CP")?n_[_.replace("CP","")]*i:_.startsWith("M")?p_(_)*i:-1}["cr4de_dp_quali_c","cr4de_dp_quanti_c","cr4de_dp_quali_m","cr4de_dp_quanti_m","cr4de_dp_quali_e","cr4de_dp_quanti_e","cr4de_di_quali_h_c","cr4de_di_quanti_ha_c","cr4de_di_quanti_hb_c","cr4de_di_quanti_hc_c","cr4de_di_quali_s_c","cr4de_di_quanti_sa_c","cr4de_di_quanti_sb_c","cr4de_di_quanti_sc_c","cr4de_di_quanti_sd_c","cr4de_di_quali_e_c","cr4de_di_quanti_ea_c","cr4de_di_quali_f_c","cr4de_di_quanti_fa_c","cr4de_di_quanti_fb_c","cr4de_di_quali_h_m","cr4de_di_quanti_ha_m","cr4de_di_quanti_hb_m","cr4de_di_quanti_hc_m","cr4de_di_quali_s_m","cr4de_di_quanti_sa_m","cr4de_di_quanti_sb_m","cr4de_di_quanti_sc_m","cr4de_di_quanti_sd_m","cr4de_di_quali_e_m","cr4de_di_quanti_ea_m","cr4de_di_quali_f_m","cr4de_di_quanti_fa_m","cr4de_di_quanti_fb_m","cr4de_di_quali_h_e","cr4de_di_quanti_ha_e","cr4de_di_quanti_hb_e","cr4de_di_quanti_hc_e","cr4de_di_quali_s_e","cr4de_di_quanti_sa_e","cr4de_di_quanti_sb_e","cr4de_di_quanti_sc_e","cr4de_di_quanti_sd_e","cr4de_di_quali_e_e","cr4de_di_quanti_ea_e","cr4de_di_quali_f_e","cr4de_di_quanti_fa_e","cr4de_di_quanti_fb_e","cr4de_cross_border_impact_quali_c","cr4de_cross_border_impact_quali_m","cr4de_cross_border_impact_quali_e","cr4de_dp50_quanti_c","cr4de_dp50_quanti_m","cr4de_dp50_quanti_e"].filter(_=>_.indexOf("quanti")>0);function E_(_){const i=_.filter(d=>d!==null);if(i.length<=0)return null;const e=i[0].slice(0,i[0].search(/\d/));return{prefix:e,numbers:i.map(d=>parseInt(d.replace(e,""),10))}}function l_(_,i){const e=i?i.reduce((d,r)=>d+r):_.length;return Math.round(2*_.reduce((d,r,u)=>i?d+r*i[u]/e:d+r/e,0))/2}function s(_,i){const e=E_(_);return e?`${e.prefix}${l_(e.numbers,i)}`:null}const O=1/10,T=1/10,s_=1/10,b_=1/100,o_=1/10,S_=1/10,P=1/10,J=1/10,q_=["M01","MO2","M03","M04","M05"],G=["CO3","C04","C05","M06","M07","M08","M09","M10","M11","M12","M13","M14","M15","M16","M17","M18","M19","M20"],X=["H09","H10"],b=(_,i,e,d,r)=>{const u=e.indexOf("climate_change")>=0?"cr4de_dp50_quanti":e,n=u==="di_Sc"?O:1;return{[`${_}_c`]:r(s(d.map(f=>f[`${u}_c`]),d.map(f=>f.cr4de_quality&&f.cr4de_quality[`${i}_c`]||2.5)))*n,[`${_}_m`]:r(s(d.map(f=>f[`${u}_m`]),d.map(f=>f.cr4de_quality&&f.cr4de_quality[`${i}_m`]||2.5)))*n,[`${_}_e`]:r(s(d.map(f=>f[`${u}_e`]),d.map(f=>f.cr4de_quality&&f.cr4de_quality[`${i}_e`]||2.5)))*n}},R_=(_,i,e)=>{const d=e?e.filter(a=>i.some(l=>l._cr4de_contact_value===a.cr4de_expert.contactid&&l.cr4de_role==="expert"&&l.cr4de_direct_analysis_finished)):[],r=_.cr4de_title.indexOf("International Armed")>=0?P:1;let u=_.cr4de_title.indexOf("Meteorite")>=0?b_:1;const n=s_,f=_.cr4de_title.indexOf("food supply")>=0?S_:1;return G.indexOf(_.cr4de_hazard_id)>=0&&(u*=J),_.cr4de_consensus_date&&new Date(_.cr4de_consensus_date)<=new Date||_.cr4de_risk_type===R.EMERGING?{quality:S.CONSENSUS,reliability:d.length,dp_c:m(_.cr4de_dp_quanti_c,u),dp_m:m(_.cr4de_dp_quanti_m,u),dp_e:m(_.cr4de_dp_quanti_e,u),di_Ha_c:p(_.cr4de_di_quanti_ha_c)*r,di_Hb_c:p(_.cr4de_di_quanti_hb_c)*r,di_Hc_c:p(_.cr4de_di_quanti_hc_c)*r,di_Sa_c:p(_.cr4de_di_quanti_sa_c)*r,di_Sb_c:p(_.cr4de_di_quanti_sb_c)*r,di_Sc_c:p(_.cr4de_di_quanti_sc_c)*r*O,di_Sd_c:p(_.cr4de_di_quanti_sd_c)*r*T,di_Ea_c:p(_.cr4de_di_quanti_ea_c)*r*n,di_Fa_c:p(_.cr4de_di_quanti_fa_c)*r,di_Fb_c:p(_.cr4de_di_quanti_fb_c)*r,di_Ha_m:p(_.cr4de_di_quanti_ha_m)*r,di_Hb_m:p(_.cr4de_di_quanti_hb_m)*r,di_Hc_m:p(_.cr4de_di_quanti_hc_m)*r,di_Sa_m:p(_.cr4de_di_quanti_sa_m)*r,di_Sb_m:p(_.cr4de_di_quanti_sb_m)*r,di_Sc_m:p(_.cr4de_di_quanti_sc_m)*r*O,di_Sd_m:p(_.cr4de_di_quanti_sd_m)*r*T,di_Ea_m:p(_.cr4de_di_quanti_ea_m)*r*n,di_Fa_m:p(_.cr4de_di_quanti_fa_m)*r,di_Fb_m:p(_.cr4de_di_quanti_fb_m)*r,di_Ha_e:p(_.cr4de_di_quanti_ha_e)*r*f,di_Hb_e:p(_.cr4de_di_quanti_hb_e)*r*f,di_Hc_e:p(_.cr4de_di_quanti_hc_e)*r*f,di_Sa_e:p(_.cr4de_di_quanti_sa_e)*r*f,di_Sb_e:p(_.cr4de_di_quanti_sb_e)*r*f,di_Sc_e:p(_.cr4de_di_quanti_sc_e)*r*O*f,di_Sd_e:p(_.cr4de_di_quanti_sd_e)*r*T*f,di_Ea_e:p(_.cr4de_di_quanti_ea_e)*r*n*f,di_Fa_e:p(_.cr4de_di_quanti_fa_e)*r*f,di_Fb_e:p(_.cr4de_di_quanti_fb_e)*r*f,dp50_c:_.cr4de_climate_change_quanti_c?m(_.cr4de_climate_change_quanti_c):m(_.cr4de_dp_quanti_c,u),dp50_m:_.cr4de_climate_change_quanti_m?m(_.cr4de_climate_change_quanti_m):m(_.cr4de_dp_quanti_m,u),dp50_e:_.cr4de_climate_change_quanti_e?m(_.cr4de_climate_change_quanti_e):m(_.cr4de_dp_quanti_e,u)}:d.length>0?{quality:S.AVERAGE,reliability:d.length,...b("dp","dp","cr4de_dp_quanti",d,m),...b("di_Ha","h","cr4de_di_quanti_ha",d,p),...b("di_Hb","h","cr4de_di_quanti_hb",d,p),...b("di_Hc","h","cr4de_di_quanti_hc",d,p),...b("di_Sa","s","cr4de_di_quanti_sa",d,p),...b("di_Sb","s","cr4de_di_quanti_sb",d,p),...b("di_Sc","s","cr4de_di_quanti_sc",d,p),...b("di_Sd","s","cr4de_di_quanti_sd",d,p),...b("di_Ea","e","cr4de_di_quanti_ea",d,p),...b("di_Fa","f","cr4de_di_quanti_fa",d,p),...b("di_Fb","f","cr4de_di_quanti_fb",d,p),...b("dp50","cc","cr4de_climate_change_quanti",d,m)}:{quality:S.MISSING,reliability:0,dp_c:0,dp_m:0,dp_e:0,di_Ha_c:0,di_Hb_c:0,di_Hc_c:0,di_Sa_c:0,di_Sb_c:0,di_Sc_c:0,di_Sd_c:0,di_Ea_c:0,di_Fa_c:0,di_Fb_c:0,di_Ha_m:0,di_Hb_m:0,di_Hc_m:0,di_Sa_m:0,di_Sb_m:0,di_Sc_m:0,di_Sd_m:0,di_Ea_m:0,di_Fa_m:0,di_Fb_m:0,di_Ha_e:0,di_Hb_e:0,di_Hc_e:0,di_Sa_e:0,di_Sb_e:0,di_Sc_e:0,di_Sd_e:0,di_Ea_e:0,di_Fa_e:0,di_Fb_e:0,dp50_c:0,dp50_m:0,dp50_e:0}},h_=(_,i,e,d,r)=>{const u=r?r.filter(a=>d.some(l=>l._cr4de_contact_value===a.cr4de_expert.contactid&&l.cr4de_role==="expert"&&l.cr4de_direct_analysis_finished)).map(a=>i.cr4de_title.indexOf("food supply")>=0&&a.cr4de_expert.emailaddress1==="laurie.phillips@economie.fgov.be"?{...a,cr4de_c2c:a.cr4de_c2e,cr4de_c2e:a.cr4de_c2c,cr4de_m2c:a.cr4de_m2e,cr4de_m2e:a.cr4de_m2c,cr4de_e2c:a.cr4de_e2e,cr4de_e2e:a.cr4de_e2c}:a):[];let n=1;(_.cr4de_riskfilesid==="9458db5b-aa6c-ed11-9561-000d3adf7089"||i.cr4de_riskfilesid==="9458db5b-aa6c-ed11-9561-000d3adf7089"&&_.cr4de_risk_type!==R.MANMADE)&&(n*=o_),q_.indexOf(_.cr4de_hazard_id)>=0&&G.indexOf(i.cr4de_hazard_id)>=0&&(n*=J);const f=i.cr4de_title.indexOf("International Armed")>=0?P:1;return(i.cr4de_consensus_date&&new Date(i.cr4de_consensus_date)<=new Date||i.cr4de_risk_type===R.EMERGING)&&(i.cr4de_title.indexOf("food supply")<0||["Failure of electricity supply","Failure of road transport","Agricultural Plant Diseases & Pests","Commodities shortage"].indexOf(_.cr4de_title)<0)?e.cr4de_c2c_cause!==null?{quality:S.CONSENSUS,reliabilty:u.length,c2c:(m(e.cr4de_c2c)+m(e.cr4de_c2c_cause))/2*n,c2m:(m(e.cr4de_c2m)+m(e.cr4de_c2m_cause))/2*n,c2e:(m(e.cr4de_c2e)+m(e.cr4de_c2e_cause))/2*n*f,m2c:(m(e.cr4de_m2c)+m(e.cr4de_m2c_cause))/2*n,m2m:(m(e.cr4de_m2m)+m(e.cr4de_m2m_cause))/2*n,m2e:(m(e.cr4de_m2e)+m(e.cr4de_m2e_cause))/2*n*f,e2c:(m(e.cr4de_e2c)+m(e.cr4de_e2c_cause))/2*n,e2m:(m(e.cr4de_e2m)+m(e.cr4de_e2m_cause))/2*n,e2e:(m(e.cr4de_e2e)+m(e.cr4de_e2e_cause))/2*n*f}:{quality:S.CONSENSUS,reliabilty:u.length,c2c:m(e.cr4de_c2c)*n,c2m:m(e.cr4de_c2m)*n,c2e:m(e.cr4de_c2e)*n*f,m2c:m(e.cr4de_m2c)*n,m2m:m(e.cr4de_m2m)*n,m2e:m(e.cr4de_m2e)*n*f,e2c:m(e.cr4de_e2c)*n,e2m:m(e.cr4de_e2m)*n,e2e:m(e.cr4de_e2e)*n*f}:u.length>0?{quality:S.AVERAGE,reliabilty:u.length,c2c:m(s(u.map(a=>a.cr4de_c2c),u.map(a=>a.cr4de_quality||2.5)))*n,c2m:m(s(u.map(a=>a.cr4de_c2m),u.map(a=>a.cr4de_quality||2.5)))*n,c2e:m(s(u.map(a=>a.cr4de_c2e),u.map(a=>a.cr4de_quality||2.5)))*n,m2c:m(s(u.map(a=>a.cr4de_m2c),u.map(a=>a.cr4de_quality||2.5)))*n,m2m:m(s(u.map(a=>a.cr4de_m2m),u.map(a=>a.cr4de_quality||2.5)))*n,m2e:m(s(u.map(a=>a.cr4de_m2e),u.map(a=>a.cr4de_quality||2.5)))*n,e2c:m(s(u.map(a=>a.cr4de_e2c),u.map(a=>a.cr4de_quality||2.5)))*n,e2m:m(s(u.map(a=>a.cr4de_e2m),u.map(a=>a.cr4de_quality||2.5)))*n,e2e:m(s(u.map(a=>a.cr4de_e2e),u.map(a=>a.cr4de_quality||2.5)))*n}:{quality:S.MISSING,reliabilty:0,c2c:0,c2m:0,c2e:0,m2c:0,m2m:0,m2e:0,e2c:0,e2m:0,e2e:0}},A_=_=>{const i=(1-_.c2c)*(1-_.c2m)*(1-_.c2e),e=(1-_.m2c)*(1-_.m2m)*(1-_.m2e),d=(1-_.e2c)*(1-_.e2m)*(1-_.e2e),r=i+_.c2c+_.c2m+_.c2e,u=e+_.m2c+_.m2m+_.m2e,n=d+_.e2c+_.e2m+_.e2e;return{..._,c2c:_.c2c/r,c2m:_.c2m/r,c2e:_.c2e/r,m2c:_.m2c/u,m2m:_.m2m/u,m2e:_.m2e/u,e2c:_.e2c/n,e2m:_.e2m/n,e2e:_.e2e/n}};function M_(_,i,e,d,r,u){const n=e.filter(E=>X.indexOf(E.cr4de_cause_hazard.cr4de_hazard_id)<0&&X.indexOf(E.cr4de_effect_hazard.cr4de_hazard_id)<0),f=n.map(E=>E.cr4de_bnrariskcascadeid),a=u.filter(E=>f.indexOf(E._cr4de_cascade_value)>=0),l=r.reduce((E,t)=>E[t._cr4de_risk_file_value]?{...E,[t._cr4de_risk_file_value]:[...E[t._cr4de_risk_file_value],t]}:{...E,[t._cr4de_risk_file_value]:[t]},{}),h=a.reduce((E,t)=>E[t._cr4de_cascade_value]?{...E,[t._cr4de_cascade_value]:[...E[t._cr4de_cascade_value],t]}:{...E,[t._cr4de_cascade_value]:[t]},{}),z=_.filter(E=>E.cr4de_risk_type!==R.EMERGING).map(E=>{const t=R_(E,d.filter(I=>I._cr4de_risk_file_value===E.cr4de_riskfilesid),l[E.cr4de_riskfilesid]),o={riskId:E.cr4de_riskfilesid,riskTitle:E.cr4de_title,timestamp:Date.now(),...t,dp:0,dp50:0,ip_c:0,ip_m:0,ip_e:0,ip:0,ip50_c:0,ip50_m:0,ip50_e:0,ip50:0,tp_c:0,tp_m:0,tp_e:0,tp:0,tp50_c:0,tp50_m:0,tp50_e:0,tp50:0,rp_c:0,rp_m:0,rp_e:0,di_Ha:t.di_Ha_c+t.di_Ha_m+t.di_Ha_e,di_Hb:t.di_Hb_c+t.di_Hb_m+t.di_Hb_e,di_Hc:t.di_Hc_c+t.di_Hc_m+t.di_Hc_e,di_Sa:t.di_Sa_c+t.di_Sa_m+t.di_Sa_e,di_Sb:t.di_Sb_c+t.di_Sb_m+t.di_Sb_e,di_Sc:t.di_Sc_c+t.di_Sc_m+t.di_Sc_e,di_Sd:t.di_Sd_c+t.di_Sd_m+t.di_Sd_e,di_Ea:t.di_Ea_c+t.di_Ea_m+t.di_Ea_e,di_Fa:t.di_Fa_c+t.di_Fa_m+t.di_Fa_e,di_Fb:t.di_Fb_c+t.di_Fb_m+t.di_Fb_e,di_c:t.di_Ha_c+t.di_Hb_c+t.di_Hc_c+t.di_Sa_c+t.di_Sb_c+t.di_Sc_c+t.di_Sd_c+t.di_Ea_c+t.di_Fa_c+t.di_Fb_c,di_m:t.di_Ha_m+t.di_Hb_m+t.di_Hc_m+t.di_Sa_m+t.di_Sb_m+t.di_Sc_m+t.di_Sd_m+t.di_Ea_m+t.di_Fa_m+t.di_Fb_m,di_e:t.di_Ha_e+t.di_Hb_e+t.di_Hc_e+t.di_Sa_e+t.di_Sb_e+t.di_Sc_e+t.di_Sd_e+t.di_Ea_e+t.di_Fa_e+t.di_Fb_e,di:0,ii_Ha_c:0,ii_Hb_c:0,ii_Hc_c:0,ii_Sa_c:0,ii_Sb_c:0,ii_Sc_c:0,ii_Sd_c:0,ii_Ea_c:0,ii_Fa_c:0,ii_Fb_c:0,ii_Ha_m:0,ii_Hb_m:0,ii_Hc_m:0,ii_Sa_m:0,ii_Sb_m:0,ii_Sc_m:0,ii_Sd_m:0,ii_Ea_m:0,ii_Fa_m:0,ii_Fb_m:0,ii_Ha_e:0,ii_Hb_e:0,ii_Hc_e:0,ii_Sa_e:0,ii_Sb_e:0,ii_Sc_e:0,ii_Sd_e:0,ii_Ea_e:0,ii_Fa_e:0,ii_Fb_e:0,ii_Ha:0,ii_Hb:0,ii_Hc:0,ii_Sa:0,ii_Sb:0,ii_Sc:0,ii_Sd:0,ii_Ea:0,ii_Fa:0,ii_Fb:0,ii_c:0,ii_m:0,ii_e:0,ii:0,ti_Ha_c:0,ti_Hb_c:0,ti_Hc_c:0,ti_Sa_c:0,ti_Sb_c:0,ti_Sc_c:0,ti_Sd_c:0,ti_Ea_c:0,ti_Fa_c:0,ti_Fb_c:0,ti_Ha_m:0,ti_Hb_m:0,ti_Hc_m:0,ti_Sa_m:0,ti_Sb_m:0,ti_Sc_m:0,ti_Sd_m:0,ti_Ea_m:0,ti_Fa_m:0,ti_Fb_m:0,ti_Ha_e:0,ti_Hb_e:0,ti_Hc_e:0,ti_Sa_e:0,ti_Sb_e:0,ti_Sc_e:0,ti_Sd_e:0,ti_Ea_e:0,ti_Fa_e:0,ti_Fb_e:0,ti_Ha:0,ti_Hb:0,ti_Hc:0,ti_Sa:0,ti_Sb:0,ti_Sc:0,ti_Sd:0,ti_Ea:0,ti_Fa:0,ti_Fb:0,ti_c:0,ti_m:0,ti_e:0,ti:0,tr_c:0,tr_m:0,tr_e:0,tr:0,tr50_c:0,tr50_m:0,tr50_e:0,tr50:0,causes:[],effects:[]};return o.di=o.di_c+o.di_m+o.di_e,o}),U=z.reduce((E,t)=>({...E,[t.riskId]:t}),{});return n.forEach(E=>{if(E.cr4de_cause_hazard.cr4de_risk_type===R.EMERGING)return;const t=U[E._cr4de_cause_hazard_value],o=U[E._cr4de_effect_hazard_value];if(!t||!o)return;const I={cause:t,effect:o,cascadeId:E.cr4de_bnrariskcascadeid,cascadeTitle:`${t.riskTitle} causes ${o.riskTitle}`,damp:E.cr4de_damp||!0,...A_(h_(i[E._cr4de_cause_hazard_value],i[E._cr4de_effect_hazard_value],E,d.filter(W=>W._cr4de_risk_file_value===E._cr4de_cause_hazard_value||W._cr4de_risk_file_value===E._cr4de_effect_hazard_value),h[E.cr4de_bnrariskcascadeid])),ip_c:0,ip_m:0,ip_e:0,ip:0,ip50_c:0,ip50_m:0,ip50_e:0,ip50:0,ii_Ha_c:0,ii_Hb_c:0,ii_Hc_c:0,ii_Sa_c:0,ii_Sb_c:0,ii_Sc_c:0,ii_Sd_c:0,ii_Ea_c:0,ii_Fa_c:0,ii_Fb_c:0,ii_Ha_m:0,ii_Hb_m:0,ii_Hc_m:0,ii_Sa_m:0,ii_Sb_m:0,ii_Sc_m:0,ii_Sd_m:0,ii_Ea_m:0,ii_Fa_m:0,ii_Fb_m:0,ii_Ha_e:0,ii_Hb_e:0,ii_Hc_e:0,ii_Sa_e:0,ii_Sb_e:0,ii_Sc_e:0,ii_Sd_e:0,ii_Ea_e:0,ii_Fa_e:0,ii_Fb_e:0,ii_Ha:0,ii_Hb:0,ii_Hc:0,ii_Sa:0,ii_Sb:0,ii_Sc:0,ii_Sd:0,ii_Ea:0,ii_Fa:0,ii_Fb:0,ii_c:0,ii_m:0,ii_e:0,ii:0,ir_c:0,ir_m:0,ir_e:0,ir:0,ir50_c:0,ir50_m:0,ir50_e:0,ir50:0};t.effects.push(I),o.causes.push(I)}),z}function O_({riskFiles:_,cascades:i,participations:e,directAnalyses:d,cascadeAnalyses:r},u){const n=_.reduce((a,l)=>({...a,[l.cr4de_riskfilesid]:l}),{}),f=M_(_,n,i,e,d,r);return f.map((a,l)=>{const h=Z(d_(a));return D(h),$(h),r_(h),u(100*(l+1)/f.length),h})}self.onmessage=_=>{const i=O_(_.data,e=>self.postMessage({type:"progress",value:e}));self.postMessage({type:"result",value:i})}})();
